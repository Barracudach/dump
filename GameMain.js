import * as e from "./rollupPluginModLoBabelHelpers.js";
import * as a from "./rollupPluginModLoBabelHelpers.js";
import * as g from "./cc.js";
import * as u from "./cc.js";
import * as h from "./cc.js";
import * as F from "./cc.js";
import * as G from "./cc.js";
import * as f from "./cc.js";
import * as p from "./cc.js";
import * as n from "./cc.js";
import * as U from "./cc.js";
import * as H from "./cc.js";
import * as N from "./cc.js";
import * as V from "./cc.js";
import * as r from "./cc.js";
import * as P from "./cc.js";
import * as c from "./cc.js";
import * as s from "./cc.js";
import * as E from "./cc.js";
import * as z from "./cc.js";
import * as m from "./cc.js";
import * as C from "./cc.js";
import * as B from "./cc.js";
import * as x from "./cc.js";
import * as S from "./cc.js";
import * as _ from "./cc.js";
import * as M from "./cc.js";
import * as D from "./cc.js";
import * as w from "./cc.js";
import * as b from "./cc.js";
import * as A from "./cc.js";
import * as o from "./cc.js";
import * as O from "./cc.js";
import * as l from "./cc.js";
import * as W from "./cc.js";
import * as d from "./cc.js";
import * as R from "./cc.js";
import * as v from "./cc.js";
import * as L from "./cc.js";
import * as i from "./cc.js";
import * as I from "./cc.js";
import * as k from "./cc.js";
import * as T from "./cc.js";
import * as Z from "./cc.js";
import * as y from "./cc.js";
import * as j from "./gs_protocol.mjs_cjs=&original=.js";
import * as q from "./ws_protocol.mjs_cjs=&original=.js";
import * as Y from "./GameReview.js";
import * as J from "./cv.js";
import * as mod6 from "./FaceView.js";
import * as X from "./FaceBarrage.js";
import * as Q from "./LuckTurntablesButton.js";
import * as K from "./PokerInfoNew.js";
import * as tt from "./Audit.js";
import * as et from "./Buyin.js";
import * as at from "./Card.js";
import * as nt from "./GameDataManager.js";
import * as ot from "./GameDataManager.js";
import * as st from "./GameDataManager.js";
import * as it from "./GameDataManager.js";
import * as lt from "./GameDataManager.js";
import * as rt from "./PokerData.js";
import * as ht from "./RoomData.js";
import * as dt from "./GameChipsMove.js";
import * as ut from "./Seat.js";
import * as mt from "./ZoomCurentTime.js";
import * as ct from "./GuessHandCard.js";
import * as gt from "./InsuranceData.js";
import * as pt from "./InsuranceEntrance.js";
import * as _t from "./InsuranceHitOutsTips.js";
import * as St from "./UpgradeView.js";
import * as Ct from "./Tag.js";
import * as ft from "./AgoraSdk.js";
import * as bt from "./StarPrivateInfo.js";
import * as yt from "./StarPrivateInfo.js";
import * as Tt from "./StarPrivateInfo.js";
import * as Dt from "./StarPrivateInfo.js";
import * as It from "./StarPrivateInfo.js";
import * as kt from "./Commentator.js";
import * as vt from "./Enum.js";
import * as Rt from "./HitbackFaceItem.js";
import * as At from "./winRateTools.js";
import * as Pt from "./GiftData.js";
import * as wt from "./StarRedpacketButton.js";
import * as Bt from "./AppConfig.js";
import * as Et from "./JurisdLoader.js";
import * as Mt from "./TablePositionContainerHandler.js";
import * as Gt from "./borderGraphic.js";
import * as Nt from "./CurrencyValue.js";
import * as Ft from "./FormatParser.js";
import * as Ot from "./CommonTools.js";
import * as Lt from "./CommonTools.js";
import * as Ut from "./MultiWindowFocusManager.js";
import * as xt from "./MultiWindowFocusManager.js";
import * as Wt from "./CrashTracing.js";
import * as Vt from "./CrashTracing.js";
import * as zt from "./GameSceneInstance.js";
import * as Ht from "./MultipleGame.js";
import * as Zt from "./Holdem_RestPopup.js";
import * as jt from "./MultipleRoomManager.js";
import * as Yt from "./GameJackPotEventController.js";
import * as qt from "./GameJackPotEventController.js";
import * as Jt from "./otel-api.mjs.js";
import * as t from "./BottomMenuHandler.js";
import * as Xt from "./BottomMenuHandlerMobile.js";
import * as Qt from "./TimeTrack.js";
import * as Kt from "./EmojiView.js";
import * as te from "./EmojiLoader.js";
import * as ee from "./AnalyticsHandler.js";
import * as ae from "./HoneyPotHelper.js";
import * as ie from "./ToggleSwitch.js";
import * as ne from "./SidePotHandler.js";
import * as oe from "./SeasonalBackgrounds.js";
import * as se from "./node-extension.js";
import * as le from "./AudioComp.js";
import * as re from "./soundEffect.js";
import * as he from "./RoomInstance.js";
import * as de from "./TweenControl.js";
import * as ue from "./PeekCardDisplay.js";
import * as me from "./PeekCardPopup.js";
import * as ce from "./ecdhHandler.js";
import * as ge from "./RightItemNewReplayerRenderer.js";
import * as pe from "./LobbyHelper.js";
import * as _e from "./NewReplayerMobile.js";

function main() {
    var Se, Ce, fe, be, De, Ie, ye, Te, ke, ve, Re, Ae, Pe, we, Be, Ee, Me, Ge, Ne, Fe, Le, Oe, xe, Ue, Ve, We, ze, He, Ze, je, qe, Ye, Je, $e, Xe, Qe, Ke, ta, ea, aa, ia, na, oa, sa, la, ra, ha, da, ua, ma, ca, ga, pa, _a, Sa, Ca, fa, ba, Da, Ia, ya, Ta, ka, va, Ra, Aa, Pa, wa, Ba, Ea, Ma, Ga, Na, Fa, La, Oa, xa, Ua, Va, Wa, za, Ha, Za, ja, qa, Ya, Ja, $a, Xa, Qa, Ka, ti, ei, ai, ii, ni, oi, si, li, ri, hi, di, ui, mi, ci, gi, pi, _i, Si, Ci, fi, bi, Di, Ii, yi, Ti, ki, vi, Ri, Ai, Pi, wi, Bi, Ei, Mi, Gi, Ni, Fi, Li, Oi, xi, Ui, Vi, Wi, zi, Hi, Zi, ji, qi, Yi, Ji, $i, Xi, Qi, Ki, tn, en, an, nn, on, sn, ln, rn, hn, dn, un, mn, cn, gn, pn, _n, Sn, Cn, fn, bn, Dn, In, yn, Tn, kn, vn, Rn, An, Pn, wn, Bn, En, Mn, Gn, Nn, Fn, Ln, On, xn, Un, Vn, Wn, zn, Hn, Zn, jn, qn, Yn, Jn, $n, Xn, Qn, Kn, to, eo, ao, io, no, oo, so, lo, ro, ho, uo, mo, co, go, po, _o, So, Co, fo, bo, Do, Io, yo, To, ko, vo, Ro, Ao, Po, wo, Bo, Eo, Mo, Go, No, Fo, Lo, Oo;
    i._RF.push({}, "acc3abser1IhbCNNWQjCtrx", "GameMain", void 0);
    const {
        ccclass: xo,
        property: Uo
    } = c;
    t("GameMain", (Se = Uo(qt), Ce = Uo(ge), fe = Uo(n), be = Uo(n), De = Uo(Bt), Ie = Uo(n), ye = Uo(n), Te = Uo(o), ke = Uo(n), ve = Uo(n), Re = Uo(n), Ae = Uo(n), Pe = Uo(n), we = Uo(n), Be = Uo(n), Ee = Uo(n), Me = Uo(n), Ge = Uo(n), Ne = Uo(o), Fe = Uo(n), Le = Uo(n), Oe = Uo(n), xe = Uo(n), Ue = Uo(n), Ve = Uo(n), We = Uo(n), ze = Uo(o), He = Uo(s), Ze = Uo(n), je = Uo(l), qe = Uo(n), Ye = Uo(n), Je = Uo(n), $e = Uo(n), Xe = Uo(n), Qe = Uo(n), Ke = Uo(o), ta = Uo(o), ea = Uo(n), aa = Uo(o), ia = Uo(r), na = Uo(n), oa = Uo(h), sa = Uo(o), la = Uo(h), ra = Uo(o), ha = Uo(o), da = Uo(o), ua = Uo(o), ma = Uo(o), ca = Uo(o), ga = Uo(h), pa = Uo(Et), _a = Uo(d), Sa = Uo(d), Ca = Uo(h), fa = Uo(h), ba = Uo(o), Da = Uo(r), Ia = Uo(h), ya = Uo(n), Ta = Uo(r), ka = Uo(r), va = Uo(r), Ra = Uo(r), Aa = Uo(r), Pa = Uo(o), wa = Uo(o), Ba = Uo(o), Ea = Uo(o), Ma = Uo(o), Ga = Uo(Mt), Na = Uo(n), Fa = Uo(n), La = Uo(o), Oa = Uo(n), xa = Uo(n), Ua = Uo(o), Va = Uo(n), Wa = Uo(n), za = Uo(n), Ha = Uo(n), Za = Uo(d), ja = Uo(Zt), qa = Uo(d), Ya = Uo(d), Ja = Uo(d), $a = Uo(d), Xa = Uo(d), Qa = Uo(d), Ka = Uo(d), ti = Uo(d), ei = Uo(d), ai = Uo(r), ii = Uo(n), ni = Uo(d), oi = Uo(d), si = Uo(r), li = Uo(d), ri = Uo(d), hi = Uo(d), di = Uo(n), ui = Uo(n), mi = Uo(u), ci = Uo(d), gi = Uo(d), pi = Uo(n), _i = Uo(d), Si = Uo(ee), Ci = Uo(d), fi = Uo(d), bi = Uo(n), Di = Uo(n), Ii = Ut(), yi = Ut("GameDataInstance"), Ti = Uo(m), ki = Uo(m), xo((Ai = e((Ri = class extends g {
        constructor(...t) {
            super(...t), this.USE_DEBUG_AUTO_PLAY = !1, this.DURATION_DO_ANIM_POT_TO_WIN_PLAYER = 1.3, this.CARD_SCALE_ON_DEAL_LANDSCAPE = .6, this.CARD_SCALE_ON_DEAL_MOBILE = 1, this.CARD_SCALE_PRE_OPEN = 1, a(this, "bottomMenuHandler", Ai, this), a(this, "newReplayer", Pi, this), a(this, "seatPanel", wi, this), a(this, "pokerNameText", Bi, this), a(this, "tablePositions", Ei, this), a(this, "deal_button", Mi, this), this.deal_button_Posy = null, a(this, "shop_button", Gi, this), a(this, "deal_text", Ni, this), a(this, "deal_icon", Fi, this), a(this, "addTime_button", Li, this), a(this, "damon_img", Oi, this), a(this, "waitForStart_img", xi, this), a(this, "allReview_button", Ui, this), a(this, "face_button", Vi, this), a(this, "emoji_button", Wi, this), a(this, "record_button_img", zi, this), a(this, "record_button", Hi, this), a(this, "gaopai", Zi, this), a(this, "dichiChip_text", ji, this), a(this, "mainpool", qi, this), a(this, "sidePot", Yi, this), a(this, "D_img", Ji, this), a(this, "actionButtonView", $i, this), a(this, "actionButtonView_2", Xi, this), a(this, "sliderBg", Qi, this), a(this, "freeSliderText_bg", Ki, this), a(this, "freeSliderText", tn, this), a(this, "freeSlider", en, this), a(this, "freeSliderContainer", an, this), a(this, "freeSliderProgressBar", nn, this), a(this, "freeHandle", on, this), a(this, "backGame_button", sn, this), a(this, "backAllTable_button", ln, this), a(this, "backGamePanel", rn, this), a(this, "forceShowCard_button", hn, this), this.forceShowCard_button_PosY = null, a(this, "showcardDamon_img", dn, this), a(this, "forceShowCard_text", un, this), a(this, "mainpool_text", mn, this), a(this, "mainpool_chips", cn, this), a(this, "mangZhu_text", gn, this), a(this, "freeFill_button", pn, this), a(this, "freeFill_button_img", _n, this), a(this, "preBetFold", Sn, this), a(this, "preBetFoldText", Cn, this), a(this, "preBetCheck", fn, this), a(this, "preBetCheckText", bn, this), a(this, "preBetCheckAmountText", Dn, this), a(this, "buttonFoldText", In, this), a(this, "buttonCheckText", yn, this), a(this, "buttonCallText", Tn, this), a(this, "gameTypeText", kn, this), a(this, "bgImageList", vn, this), a(this, "borderGraphicsImageList", Rn, this), a(this, "prefab_report", An, this), a(this, "seat", Pn, this), a(this, "followFill_Blue", wn, this), a(this, "giveUpRed", Bn, this), a(this, "followFill_text", En, this), a(this, "followFill_button", Mn, this), a(this, "allInDichi", Gn, this), a(this, "dichiButtonContainer", Nn, this), a(this, "dichi_button0", Fn, this), a(this, "dichi_button1", Ln, this), a(this, "dichi_button2", On, this), a(this, "dichi_button3", xn, this), a(this, "dichi_button4", Un, this), this.dichi_buttonList = [], a(this, "dichi_mangZhuText0", Vn, this), a(this, "dichi_mangZhuText1", Wn, this), a(this, "dichi_mangZhuText2", zn, this), a(this, "dichi_mangZhuText3", Hn, this), a(this, "dichi_mangZhuText4", Zn, this), a(this, "addTime_text", jn, this), a(this, "publicCard_panel", qn, this), a(this, "totalPotTextContainer", Yn, this), a(this, "winnerCombinationText", Jn, this), a(this, "card_panel", $n, this), a(this, "modal_panel", Xn, this), a(this, "cardFunTips_text", Qn, this), a(this, "sliderAllin", Kn, this), a(this, "short_pai", to, this), a(this, "zoomWaitNode", eo, this), a(this, "youwin", ao, this), a(this, "upgradePref", io, this), a(this, "gameJackPotEventController", no, this), this.sidepoolList = [], this.menuBtnList = [], this.seatList = [], this.postList = new Array, this.roomPlayerNumber = void 0, this.m_bIsInit = !1, this.pokerInfoNode_new = null, this.m_bIsInitDone = !1, this.m_selfActionType = 1, this._isSeat = !1, this._forceShowColorfulBg = !0, this._isShowAudit = !1, a(this, "headAni", oo, this), a(this, "calmDown_prefab", so, this), a(this, "fist_prefab", lo, this), a(this, "zhuaji_prefab", ro, this), a(this, "flower_prefab", ho, this), a(this, "money_prefab", uo, this), a(this, "towel_prefab", mo, this), a(this, "fan_prefab", co, this), a(this, "zoomSurePref", go, this), a(this, "redEnvelope_btn", po, this), a(this, "luckWelcomePopup_layer", _o, this), a(this, "luckWelcomePopup_prefab", So, this), a(this, "luckButton_prefab", Co, this), a(this, "guess_hand_card_button", fo, this), a(this, "guess_result_panel", bo, this), a(this, "addtimePrefab", Do, this), a(this, "wpto_bomb_ani_prefab", Io, this), a(this, "bomb_node", yo, this), a(this, "autoBuyinMessage_node", To, this), a(this, "autoBuyinMessage_richTxt", ko, this), a(this, "peekCardDisplay", vo, this), this._peekCardDisplay = void 0, a(this, "peekCardPopup", Ro, this), this._peekCardPupup = void 0, a(this, "peekCardDisplayHolder", Ao, this), this._addtime_action = null, this.lostDesc = null, this.luckLayer = null, this._roleInfo_panel = null, this._headAni_arr = [], this.calmDown_arr = [], this.fist_arr = [], this.zhuaji_arr = [], this.flower_arr = [], this.money_arr = [], this.towel_arr = [], this.fan_arr = [], this.nodeUITransform = null, this.mainpoolUITransform = null, a(this, "bighead", Po, this), this.bighead_node = null, a(this, "toggleZoomObserveOnFold", wo, this), this.actionButtonStatus = void 0, this.giveUp_buttonIsCheck = void 0, this.followFill_buttonIsCheck = void 0, this.m_pkPublicCard = [], this.m_pkSelfCard = [], this.publicPos = new p(281.6, 907, 0), this.publicCard_hgp = 129, this.selfCardPos = new _(485, 140), this.CARD_DEAL_POS = new _(540, 1448), this.m_u32DelayTimeCount = 0, this.clickSeatServerId = 0, this.trunIngSeatViewId = 0, this.hitbackSeatServerId = 0, this.TIPS_TAG = "tips_tag", this.isRight = !1, this.m_bIsSelfShowDown = !1, this.dissolveTimeNum = 0, this.GAME_DELAY_RESET_GAME_TAG = 8e4, this.GAME_DELAY_ELECT_DEALER_TAG = 80001, this.GAME_DELAY_ANTE_TAG = 80002, this.GAME_DELAY_BLIND_TAG = 80003, this.GAME_DELAY_HOLECARD_TAG = 80004, this.GAME_DELAY_ACTION_TURN_TAG = 80007, this.GAME_DELAY_ENDROUND_TAG = 80008, this.GAME_DELAY_NONEEDINSURANCE_TAG = 80010, this.GAME_SHOW_GUESS_SETTLE_TAG = 80011, this.GAME_REAL_COMMUNITY_CARD_TAG = 80012, this.GAME_END_SETSTAKE_TAG = 80013, this.GAME_CHIPS_MOVE_ACTION_TAG = 80014, this.GAME_TURN_MAIN_USER_CARD_TAG = 80015, this.GAME_DELAY_RESET_TABLE_TAG = 80016, this.GAME_SIDE_POT_TAG_BEGIN = 9e4, this.GAME_SIDE_POT_TAG_END = 90010, this.thinkCdtime = 100, this.maxtime = 10, this.ChipsLevel = [], this.freeSliderStep = 0, this.greatest_bet = void 0, this.percent_imgPosY = 0, this.perPercent = 0, this._sliderMaxBetNum = 0, this.m_hashitJackpotCard = !1, this.roomHasEnd = !1, this.giveUpImg = "", this.giveUpGrayImg = "", this.giveUpLookImg = "", this.giveUpLookGrayImg = "", this.quickFoldImg = "", this.quickFoldGrayImg = "", this.checkImg = "", this.checkGrayImg = "", this.callImg = "", this.callGrayImg = "", this.dichiButtonImg = "", this.allInImg = "", this.allInGrayImg = "", this.midSmallButton = "", this.midBigButton = "", this.silenceMusic = "zh_CN/game/dzpoker/audio/silence", this.game = void 0, this.gameManager = void 0, this._runZoomSeatAction = !1, this._isLeaveRoom = !1, this._recordTime = 10, this._androidRecord = !1, this.lastPercent = 0, this._isShowGuess = !1, this._isGuessClose = !1, this._guess_settle_amount = -1, this.onclickSliderDown = !1, this._bReciviceCriticsStart = !1, this._bCriticsimRound = !1, this.isBuyinEff = !1, this.isTurnSeat = !1, this._turnSeatTime = .2, this._bTouchStop = !1, this._isAllin = !1, this._selfCardPosY = 315, this._needCreateVideoEngine = !0, this._runningOnDevice = 0, this._isShowDownDone = void 0, a(this, "hitback_faceitem_prefab", Bo, this), a(this, "sidePot_prefab", Eo, this), this.hitback_left = null, this.hitback_upper_left = null, this.hitback_upper_right = null, this.hitbackOn = !0, this.greetOn = !0, this.m_curAllinSeats = void 0, this.starRedpacketButton = void 0, this.forceShowCardCurrency = null, this.dealNumCurrency = null, this.movePoints = void 0, a(this, "pkchipsNode", Mo, this), this.isShowingSidePot = !1, this.chipSidePotIconPosX = 0, this.chipSidePotIconPosY = 0, this._poolCardRabbitHunt = new S, this._freeSliderValue = 0, this._dichiChipValue = 0, this._dichiButton0Value = 0, this._dichiButton1Value = 0, this._dichiButton2Value = 0, this._dichiButton3Value = 0, this._dichiButton4Value = 0, this._followFillValue = 0, this._mainPoolValue = "", this._sidePotValue = {}, this._onGameEventTraceList = [], a(this, "dealCenterNode", Go, this), a(this, "gameSceneInstance", No, this), a(this, "gameDataInstance", Fo, this), a(this, "normalMaterial", Lo, this), a(this, "grayMaterial", Oo, this), this.multipleGameType = void 0, this.multipleGameInfo = null, this.multipleGameIndex = -1, this._isFistLoadSnapshot = !0, this._electDealerSeatId = -1, this._userCardResult = null, this.lastUnhandledGuessHandTime = void 0, this._isAutoGuessHandOn = !1, this._luckWelcomePopupNode = null, this._hasShownLuckWelcomePopup = !1, this._roleInfo = null, this._isPeekRound = !1, this._windowTitle = "", this.windowTitleUpdatedCallback = null, this.durationForGift = .3, this.rightItemNewReplayerDataList = [], this._lastButtonStatus = void 0, this._forceShowCardGameUuidRequest = "", this._forceShowCardGameTimeOutFunc = this._forceShowCardGameTimeOut.bind(this), this._forceShowCardGameTime = 10, this._closePopup = () => {
                this._roleInfo_panel.active = !1
            }, this.recoverDealDownCallback = null, this.preActionButtonStatus = q.Enum.ActionButtonStatus.Control_Null, this.callStackOfSetControlBtn = "", this.callStackOfPreSetControlBtn = "", this._initializedBetButtonsFlag = !1
        }
        onLoad() {
            C(this.emoji_button) || (this.emoji_button = new n, this.emoji_button.addComponent(r)), this._userCardResult = f("Label", this.gaopai).getComponent(o), this.mainpoolUITransform = this.mainpool.getComponent(b), this.nodeUITransform = this.node.getComponent(b), this.checkAndInitPkChipsNode(), this.pkchipsNode.parent = this.node;
            for (let t = 0; t < 8; t++) {
                let e = D(this.sidePot_prefab);
                e.active = !1, this.sidepoolList[t] = e
            }
            this.bottomMenuHandler.setClickHandCb(this.onClickHandCb.bind(this)), this.bottomMenuHandler.setClickGameLogCb(this.onClickGameLogCb.bind(this)), this.dealNumCurrency = this.deal_button.getComponent(Mt), this.forceShowCardCurrency = this.forceShowCard_button.getComponent(Mt), this.deal_button_Posy = this.deal_button.getPosition().y, this.forceShowCard_button_PosY = this.forceShowCard_button.getPosition().y, this.dichi_buttonList.push(this.dichi_button0), this.dichi_buttonList.push(this.dichi_button1), this.dichi_buttonList.push(this.dichi_button2), this.dichi_buttonList.push(this.dichi_button3), this.dichi_buttonList.push(this.dichi_button4), this.gameTypeText.node.active = !1, C(this.game) && (this.game.guess_hand_card.active = !1), this.guess_hand_card_button.node.active = !1, q.action.setButtonActiveFalse(this.forceShowCard_button.getComponent(r)), q.action.setButtonActiveFalse(this.deal_button.getComponent(r)), this.onclickSliderDown = !1, this.setActionButtonsView(!1), this.setActionButtonsView2(!1), this.addTime_button.active = !1, this.enableSlider(!1), this.setFreeSliderTextBgNodeAcive(!1), this.setFreeSliderTextNodeAcive(!1), this.zoomWaitNode.active = !1, this._isLeaveRoom = !1, this._bReciviceCriticsStart = !1, this.short_pai.active = !1, this.backGamePanel.active = !1;
            let t = D(this.wpto_bomb_ani_prefab);
            t.name = "bombAnim", this.bomb_node.addChild(t), this.face_button.active = !1, this.emoji_button.active = !1, this.updateSlider(), this.turnEndSitDown(), this.freeHandle.on(n.EventType.TOUCH_START, this.onsliderHandDown.bind(this)), this.freeHandle.on(n.EventType.TOUCH_END, this.onsliderHandUp.bind(this)), this.freeHandle.on(n.EventType.TOUCH_CANCEL, this.onsliderHandUp.bind(this)), this.record_button.on(n.EventType.TOUCH_START, this.onbtnRecordClick.bind(this)), this.record_button.on(n.EventType.TOUCH_END, this.onbtnRecordClick.bind(this)), this.record_button.on(n.EventType.TOUCH_CANCEL, this.onbtnRecordClick.bind(this)), this.youwin.active = !1, this.initPos(), this.initPublicCard(), this.onChangeTableBg(), this.initInsurance(), this._updateUIWithAppConfig(), this.initHitback(), this.setRecordEnabled(!1), null == this.bighead_node && (this.bighead_node = D(this.bighead), this.bighead_node.name = "bighead", this.gameSceneInstance.gameNode.addChild(this.bighead_node), this.bighead_node.setSiblingIndex(q.Enum.ZORDER_TYPE.ZORDER_TOP), this.bighead_node.position = I(.5 * q.config.WIDTH, .5 * q.config.HEIGHT, 0)), this.bighead_node.active = !1, null == this._roleInfo_panel && (this._roleInfo_panel = D(this.game.starInfo), this._roleInfo_panel.name = "privateinfo", this.gameSceneInstance.gameNode.addChild(this._roleInfo_panel), this._roleInfo_panel.setSiblingIndex(q.Enum.ZORDER_TYPE.ZORDER_TOP), this.setPanelInfoPosition()), this._roleInfo = this._roleInfo_panel.getComponent(Ct), this._roleInfo_panel.active = !1, q.config.isSiyuType() ? (q.MessageCenter.register("on_syOnEnterBackground", this.OnAppEnterBackground.bind(this), this.node), q.MessageCenter.register("on_syOnEnterForeground", this.OnAppEnterForeground.bind(this), this.node)) : (y.on(T.EVENT_HIDE, this.OnAppEnterBackground, this), y.on(T.EVENT_SHOW, this.OnAppEnterForeground, this)), this.onUpdataStarRedpacket(), q.MessageCenter.register("on_snapshot_roominfo", this.OnSnapShotRoomInfo.bind(this), this.node), q.MessageCenter.register("show_replay", this.showReplay.bind(this), this.node), q.appConfig.isLandscapeLayout || q.MessageCenter.register("show_Audit", this.showAudit.bind(this), this.node), q.MessageCenter.register("on_delaycount", this.showDelay.bind(this), this.node), q.MessageCenter.register("tipspanel_removed", this.Hide_tips.bind(this), this.node), q.MessageCenter.register("buyin_room", this.Pwd_tips.bind(this), this.node), q.MessageCenter.register("needClub", this.needClub.bind(this), this.node), q.MessageCenter.register("get_aof_game_thouthand", this.updateLabaNum.bind(this), this.node), q.MessageCenter.register("showLuckButton", this.onShowLuckButton.bind(this), this.node), q.MessageCenter.register("on_room_destroy_noti", this.OnDestroyRoom.bind(this), this.node), q.MessageCenter.register("on_startgame_noti", this.OnStartGame.bind(this), this.node), q.MessageCenter.register("on_update_self_buyin_stake", this.OnUpdateSelfBuyin.bind(this), this.node), q.MessageCenter.register("update_player_buyout", this.OnUpdataSelfBuyout.bind(this), this.node), q.MessageCenter.register("sendNoticeMsg", this.showNoticeMsg.bind(this), this.node), q.MessageCenter.register(q.Enum.MessageCenterAction.changedBBGameplaySetting, this.onChangedBBGameplaySetting.bind(this), this.node), q.MessageCenter.register(q.Enum.MessageCenterAction.onSitInAllTable, this.onSitBackInAllTableEvent.bind(this), this.node), q.MessageCenter.register(q.Enum.MessageCenterAction.betValueSettingChanged, this.onSettingBetValueChanged.bind(this), this.node), q.MessageCenter.register(q.Enum.MessageCenterAction.changeTableBackground, this.onChangeTableBg.bind(this), this.node), q.MessageCenter.register("minigame_buy_in_failed", (t => {
                this.trackInfo(q.Enum.segmentEvent.PlayerBuyInFailed, t)
            }), this.node), q.MessageCenter.register("minigame_table_notification_dismissed", (t => {
                this.trackInfo(q.Enum.segmentEvent.TableNotificationDismissed, t)
            }), this.node), q.MessageCenter.register("peek_card", this.onPeekStart.bind(this), this.node), q.MessageCenter.register("peek_card_finish", this.onPeekFinish.bind(this), this.node), this.OnStartGame(this.gameDataInstance), this.removeOthersBtnEvent(this.allReview_button), this.removeOthersBtnEvent(this.face_button), this.removeOthersBtnEvent(this.emoji_button), this.removeOthersBtnEvent(this.followFill_button.node), this.removeOthersBtnEvent(this.backGame_button), this.removeOthersBtnEvent(this.backAllTable_button), this.removeOthersBtnEvent(this.forceShowCard_button), this.removeOthersBtnEvent(this.deal_button), this.removeOthersBtnEvent(this.shop_button), this.removeOthersBtnEvent(this.guess_hand_card_button.node), this.initScene(), this.updateLabaNum(!1), this.showDichiChipText(!1), zt.requestingJoinPaceGame && (Kt.getInstance().sendEvent(q.Enum.CurrentScreen.room, q.Enum.segmentEvent.CasinoGameStarted, q.Enum.Functionality.casino, {
                game: "mtt",
                context: "clickThePopUp",
                buttonName: "playPace",
                crosssell: !0
            }), zt.requestingJoinPaceGame = !1), zt.requestingJoinGlobalSpinGame && (Kt.getInstance().sendEvent(q.Enum.CurrentScreen.room, q.Enum.segmentEvent.CasinoGameStarted, q.Enum.Functionality.casino, {
                game: "mtt",
                context: "clickThePopUp",
                buttonName: "playGlobalSpin",
                crosssell: !0
            }), zt.requestingJoinGlobalSpinGame = !1), q.appConfig.getGameConfig().enableMultipleCashGamesMobile && this.initMultipleGame(Vt.CASH, Wt.currentMultipleGameIndex), this.scheduleOnce(this._timeoutWaitingForSnapshotRoomInfo, 5), this.checkForRedEnvelopeContent(), this._checkForHoneyPot(), q.appConfig.isWebApp && (this.backAllTable_button.active = !1)
        }
        setUserCardResultText(t) {
            this._userCardResult && (this._userCardResult.string = t)
        }
        _timeoutWaitingForSnapshotRoomInfo() {
            var t;
            const e = null == (t = this.gameSceneInstance) ? void 0 : t.room;
            if (!e || e.isDisconnected()) return;
            e.checkGameIsZoom(e.gameId) && (q.netWorkManager.clearLoginGameServerSuccFlag(e.gameId), q.roomManager.RequestJoinRoom(e.gameId, e.firstId));
            const a = {
                gameId: e.gameId,
                roomId: e.roomId,
                firstRoomID: e.firstId
            };
            this._logWrongSnapshotRoomMsg(a)
        }
        checkForRedEnvelopeContent() {
            let t = q.clubDataMgr.getClubCurrentBoardList().find((t => this.gameSceneInstance && this.gameSceneInstance.room && t.room_id === this.gameSceneInstance.room.firstId));
            t && q.appConfig.getGameConfig().redEnvelopeEnabled && t.red_envelope_switch && this.showLuckButton()
        }
        _logWrongSnapshotRoomMsg(t) {
            var e;
            t.stackTrace = Lt.getTrace(0, 20), null == (e = Lt.getInstance()) || e.trace(Ot.CashGameIssues, "WrongSnapshotRoomInfo", t)
        }
        setMainPoolLabel(t) {
            this.mainpool_text.string = t
        }
        initMultipleGame(t, e) {
            this.multipleGameType = t, this.setMultipleGameIndex(e);
            const a = Ht.instance.listRoom[this.multipleGameIndex];
            a && (a.type == Vt.HOLDEM || (a.type, Vt.CASH), this.multipleGameInfo = a)
        }
        setMultipleGameIndex(t) {
            this.multipleGameIndex = t
        }
        setPanelInfoPosition() {
            this._roleInfo_panel.position = new p(.5 * q.config.WIDTH, .5 * q.config.HEIGHT)
        }
        setSliderAllInPosition() {}
        updateSlider() {
            this.setSliderAllInPosition(), this.setFreeSliderPercentImgNodeAcive(!1), this.percent_imgPosY = this.sliderBg.getPosition().y + this.freeHandle.getComponent(b).contentSize.height + 80
        }
        setActionButtonsView(t) {
            this.actionButtonView && (this.actionButtonView.active = t)
        }
        setActionButtonsView2(t) {}
        _updateUIWithAppConfig() {
            this.checkChatAvailable(), this.checkFullscreenEmojiAvailable(), !q.appConfig.getGameConfig().audioChatEnabled && (this.record_button.parent = null), !q.appConfig.getGameConfig().redEnvelopeEnabled && (this.redEnvelope_btn.node.parent = null), this.shop_button.active = q.appConfig.getGameConfig().depositButtonEnabled
        }
        OnUpdateSelfBuyin(t) {
            xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node) || (this.isBuyinEff = !0)
        }
        OnUpdataSelfBuyout(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || this.showAutoBuyinMessage(!1, t.buyoutGold)
        }
        onChangedBBGameplaySetting() {
            void 0 !== q.GameDataManager.listCoinModeTableSet[this.gameDataInstance.tRoomData.pkRoomParam.game_name] && null !== q.GameDataManager.listCoinModeTableSet[this.gameDataInstance.tRoomData.pkRoomParam.game_name] || (this.gameDataInstance.tRoomData.coinMode = q.tools.isGameplayBBChoice() ? 1 : 0, this.updateCoinModeValue())
        }
        _getNameColor(t) {
            if (this.isGameStarSeat()) return k.BLACK;
            switch (t) {
                case 0:
                case 1:
                case 2:
                    return new k(k.WHITE);
                case 3:
                case 4:
                case 5:
                case 6:
                case 7:
                case 8:
                default:
                    return new k(k.BLACK)
            }
        }
        _getNameAlpha(t) {
            if (this.isGameStarSeat()) return 127.5;
            switch (t) {
                case 0:
                case 1:
                case 2:
                    return 102;
                case 3:
                case 4:
                case 5:
                case 6:
                case 7:
                case 8:
                case 9:
                default:
                    return 127.5
            }
        }
        initScene() {
            this.HideMainPool(), this.record_button_img.active = !1, this.setEnableWaitingPlayerText(!1), this.gaopai.active = !1, this.getPokerNameTextNode().active = !1, this.setMangZhuText(!1)
        }
        onDestroy() {
            this._poolCardRabbitHunt.clear(), q.config.isSiyuType() ? (q.MessageCenter.unregister("on_syOnEnterBackground", this.node), q.MessageCenter.unregister("on_syOnEnterForeground", this.node)) : (y.off(T.EVENT_HIDE, this.OnAppEnterBackground, this), y.off(T.EVENT_SHOW, this.OnAppEnterForeground, this)), q.MessageCenter.unregister("on_snapshot_roominfo", this.node), q.MessageCenter.unregister("onSetShowAuditState", this.node), q.MessageCenter.unregister("show_replay", this.node), q.appConfig.isLandscapeLayout || q.MessageCenter.unregister("show_Audit", this.node), q.MessageCenter.unregister("on_delaycount", this.node), q.MessageCenter.unregister("showRoleInfoView", this.node), q.MessageCenter.unregister("showObRoleInfo", this.node), q.MessageCenter.unregister("on_sitdown_succ", this.node), q.MessageCenter.unregister("on_need_buyin", this.node), q.MessageCenter.unregister("on_standup_succ", this.node), q.MessageCenter.unregister("on_room_destroy_noti", this.node), q.MessageCenter.unregister("on_startgame_noti", this.node), q.MessageCenter.unregister("on_resetgame_noti", this.node), q.MessageCenter.unregister("on_game_elect_dealer_noti", this.node), q.MessageCenter.unregister("on_game_blind_noti", this.node), q.MessageCenter.unregister("on_game_holecard_noti", this.node), q.MessageCenter.unregister("on_game_notiplayer_holecard_noti", this.node), q.MessageCenter.unregister("on_game_action_turn_noti", this.node), q.MessageCenter.unregister("on_back_seat", this.node), q.MessageCenter.unregister("on_game_action_noti", this.node), q.MessageCenter.unregister("on_game_endround_noti", this.node), q.MessageCenter.unregister("on_game_communitycard_noti", this.node), q.MessageCenter.unregister("player_show_cards", this.node), q.MessageCenter.unregister("on_waiting_other_player", this.node), q.MessageCenter.unregister("on_game_anti_noti", this.node), q.MessageCenter.unregister("currentRoomJackpot", this.node), q.MessageCenter.unregister("on_jackpot_data", this.node), q.MessageCenter.unregister("update_jackpotAmount", this.node), q.MessageCenter.unregister("on_game_settlement_noti", this.node), q.MessageCenter.unregister("on_add_room_timecount", this.node), q.MessageCenter.unregister("on_PauseGame_succ", this.node), q.MessageCenter.unregister("StartGame", this.node), q.MessageCenter.unregister("on_game_showdown_noti", this.node), q.MessageCenter.unregister("GameChipsMoveOutHide", this.node), q.MessageCenter.unregister("on_leave_seat", this.node), q.MessageCenter.unregister("on_response_stay_position", this.node), q.MessageCenter.unregister("on_force_showcard", this.node), q.MessageCenter.unregister("on_game_send_card_fun", this.node), q.MessageCenter.unregister("on_need_slider_verify_cash_game", this.node), q.MessageCenter.unregister("on_need_buy_insurance", this.node), q.MessageCenter.unregister("no_need_insurace", this.node), q.MessageCenter.unregister("player_hit_the_outs", this.node), q.MessageCenter.unregister("player_miss_the_outs", this.node), q.MessageCenter.unregister("buyin_start", this.node), q.MessageCenter.unregister("buyin_failed_by_server", this.node), q.MessageCenter.unregister("buyin_failed_by_local", this.node), q.MessageCenter.unregister("click_btn_exit_room", this.node), q.MessageCenter.unregister("click_btn_leave_seat", this.node), q.MessageCenter.unregister("resp_sit_down_failed", this.node), q.appConfig.getGameConfig().opponentEmojiEnabled && (q.MessageCenter.unregister("effet_call", this.node), q.MessageCenter.unregister("on_fly_emoji", this.node), q.MessageCenter.unregister("effect_hit_call", this.node)), q.appConfig.getGameConfig().emojiTabEnabled && (q.MessageCenter.unregister("on_showFace", this.node), q.MessageCenter.unregister("on_SendChat", this.node)), q.appConfig.getGameConfig().fullscreenEmojiEnabled && (q.MessageCenter.unregister("on_SendMagicEmoji", this.node), q.MessageCenter.unregister("on_SendNoticeDynamicConfig", this.node)), q.MessageCenter.unregister("add_action_time", this.node), q.MessageCenter.unregister("on_voice_record_count_down", this.node), q.MessageCenter.unregister("on_voice_record_finish", this.node), q.MessageCenter.unregister("on_play_voice", this.node), q.MessageCenter.unregister("on_voice_record_too_short", this.node), q.MessageCenter.unregister("on_upload_voice_done", this.node), q.MessageCenter.unregister("on_voice_show_micPhoneToast", this.node), q.MessageCenter.unregister("SYStartRecord", this.node), q.MessageCenter.unregister("SYStopRecord", this.node), q.MessageCenter.unregister("SYCancelRecord", this.node), q.MessageCenter.unregister("show_hit_jackPotCardType", this.node), q.MessageCenter.unregister("add_room_time", this.node), q.MessageCenter.unregister("buyin_room", this.node), q.MessageCenter.unregister("tipspanel_removed", this.node), q.MessageCenter.unregister("on_room_not_exist", this.node), q.MessageCenter.unregister("update_player_stake", this.node), q.MessageCenter.unregister("on_update_self_buyin_stake", this.node), q.MessageCenter.unregister("update_player_buyout", this.node), q.MessageCenter.unregister("showLuckButton", this.node), q.MessageCenter.unregister("get_aof_game_thouthand", this.node), q.MessageCenter.unregister("needClub", this.node), q.MessageCenter.unregister("turntableResultNotice", this.node), q.MessageCenter.unregister("on_need_more_gold", this.node), q.MessageCenter.unregister("on_action_error", this.node), q.MessageCenter.unregister("quick_leave_notice", this.node), q.MessageCenter.unregister("showLastRoundWin", this.node), q.MessageCenter.unregister("zoom_quickfold_tips", this.node), q.MessageCenter.unregister("action_fold_error", this.node), q.MessageCenter.unregister("on_leave_room_succ", this.node), q.MessageCenter.unregister("sit_down_limit", this.node), q.MessageCenter.unregister("change_tables", this.node), q.MessageCenter.unregister("sit_down_limit_error", this.node), q.MessageCenter.unregister("notice_critisicm_start", this.node), q.MessageCenter.unregister("notice_critisicm_not_enough", this.node), q.MessageCenter.unregister("guess_begin_bet", this.node), q.MessageCenter.unregister("guess_bet_rsp", this.node), q.MessageCenter.unregister("guess_set_bet_opt", this.node), q.MessageCenter.unregister("guess_settle", this.node), q.MessageCenter.unregister("guess_close_button", this.node), q.MessageCenter.unregister("on_auto_buyin_eff", this.node), q.MessageCenter.unregister("hide_bombInfoTips", this.node), q.MessageCenter.unregister("showUpgradeView", this.node), this.destroyVideoEngine(), q.MessageCenter.unregister("liveStatus", this.node), q.MessageCenter.unregister("mikeMode", this.node), q.MessageCenter.unregister("voicePrivateNotice", this.node), q.MessageCenter.unregister("canSpeakNotice", this.node), q.MessageCenter.unregister("openMike", this.node), q.MessageCenter.unregister("NotDisturb", this.node), q.MessageCenter.unregister("commentatorChannel", this.node), q.MessageCenter.unregister("closeStarNotice", this.node), q.MessageCenter.unregister("inviterSeatFreedNotice", this.node), q.MessageCenter.unregister("welcome", this.node), q.MessageCenter.unregister("closehitback", this.node), q.MessageCenter.unregister("IsEmojiFree", this.node), q.MessageCenter.unregister("onBarrageMute", this.node), q.MessageCenter.unregister("onBarrageConfChange", this.node), q.MessageCenter.unregister("updata_star_redpacket", this.node), q.MessageCenter.unregister("star_redpacket_result_action", this.node), q.MessageCenter.unregister(q.Enum.MessageCenterAction.changedBBGameplaySetting, this.node), q.MessageCenter.unregister(q.Enum.MessageCenterAction.onSitInAllTable, this.node), q.MessageCenter.unregister(q.Enum.MessageCenterAction.changeTableBackground, this.node), q.MessageCenter.unregister(q.Enum.MessageCenterAction.betValueSettingChanged, this.node), q.MessageCenter.unregister("minigame_buy_in_failed", this.node), q.MessageCenter.unregister("minigame_table_notification_dismissed", this.node), q.MessageCenter.unregister("sendNoticeMsg", this.node), q.MessageCenter.unregister("debug_guess_settle", this.node), q.MessageCenter.unregister("peek_card", this.node), q.MessageCenter.unregister("peek_card_finish", this.node), this._cleanPeekCard(!0)
        }
        start() {
            var t, e;
            if (q.viewAdaptive.isselfchange = !1, this.checkAndInitPkChipsNode(), 1 == (null == (t = this.gameDataInstance) || null == (t = t.tRoomData) ? void 0 : t.isShowNeedClub) && q.MessageCenter.send("needClub", this.gameDataInstance), 1 == et.isShowNeedShop && this.OnNeedMoreGold(), this.requestSnapshot(), this.toggleZoomObserveOnFold) {
                var a;
                const t = null == (a = this.gameDataInstance) || null == (a = a.tRoomData) ? void 0 : a.isZoom();
                this.toggleZoomObserveOnFold.node.active = t, this.toggleZoomObserveOnFold.init(q.tools.getObserverOnFoldZoomKey(), !1, (() => {
                    if (!q.tools.isNoticedObserverOnFoldZoom()) {
                        var t;
                        const e = {
                            title: q.config.getStringData("ZoomQuickFold_remind_title"),
                            txt: q.config.getStringData("ZoomQuickFold_remind_message"),
                            isPopupDarkActive: !0,
                            hideAllBtnsDarkPopup: !0,
                            cashGameScene: null == (t = this.gameSceneInstance) || null == (t = t.room) ? void 0 : t.gameScene
                        };
                        q.popUp.showMsg(e), q.tools.setNoticedObserverOnFoldZoom(!0)
                    }
                }))
            }
            const i = null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.quickLeaveData;
            i && this.onQuickLeave({
                msg: i,
                gameData: this.gameDataInstance
            })
        }
        checkAndInitPkChipsNode() {
            if (C(this.pkchipsNode)) return;
            const t = this.node.getChildByName("pkChipsNode");
            C(t) ? this.pkchipsNode = t : (this.pkchipsNode = new n("pkChipsNode"), this.node.addChild(this.pkchipsNode))
        }
        requestSnapshot() {
            q.gameNet.RequestSnapshot(xt.getInstanceRoomId(null == this ? void 0 : this.node))
        }
        OnAddActionTime(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            const e = t.msg;
            let a = this.getSeatBySeverId(e.action_seatid);
            if (a) {
                this.playEffectOnCurrentRoom(se.PlayerTurn);
                const t = e.rest_action_time - a.thinkCdTime;
                if (e.action_seatid != this.gameDataInstance.tRoomData.i32SelfSeat) a.stopBlink(), a.setThankCdTime(e.rest_action_time, 2), a.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_OnAction), a.setAddTimeThinkProgress(t);
                else {
                    if (this.updateTimeBlink(a, e.rest_action_time, 2), this.showSelfThinkCd(e.rest_action_time, this.m_selfActionType), this.showAddTimeAction(this.m_selfActionType), a.setAddTimeThinkProgress(t), this.m_u32DelayTimeCount++, e.count < 9) {
                        this.gameDataInstance.tRoomData.pkPayMoneyItem.actionCount = e.count;
                        let t = this.gameDataInstance.tRoomData.pkPayMoneyItem.actionDelayCountsFee[e.count];
                        const a = this.gameDataInstance.tRoomData.neededFeeAsPerCurrency(t);
                        this.setAddTimeValue(a)
                    }
                    this.gameDataInstance.tGameData.m_bIsOnSelfAction = !0;
                    let n = this.getActionButtonStatus();
                    var i;
                    if (n > 0) null == (i = Lt.getInstance()) || i.traceEvent(Ot.CashGameIssues, "ActionButtonsNotShowWhenAddTime", {
                        status: n,
                        curActionButtonStatus: this.actionButtonStatus,
                        preActionButtonStatus: this.preActionButtonStatus,
                        callStackOfSetCtrBtn: this.callStackOfSetControlBtn,
                        callStackOfPreSetCtrBtn: this.callStackOfPreSetControlBtn,
                        timeRemain: e.rest_action_time
                    }), this.reUpdateActionButtonStatus()
                }
            }
        }
        reUpdateActionButtonStatus() {
            if (this.actionButtonStatus === q.Enum.ActionButtonStatus.Control_Null && this.preActionButtonStatus === q.Enum.ActionButtonStatus.Control_Null) this.requestSnapshot();
            else {
                const t = this.actionButtonStatus === q.Enum.ActionButtonStatus.Control_Null ? this.preActionButtonStatus : this.actionButtonStatus;
                this.setControlButtonStatus(t);
                let e = this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat);
                e.progressBar.node.active = !0, e.countDown_text.node.active = !0, this.scheduleOnce((() => {
                    this.getActionButtonStatus() > 0 && this.gameDataInstance.tRoomData.curActionPlayerId == this.getUserIDData() && this.requestSnapshot()
                }), .1)
            }
        }
        updateTimeBlink(t, e, a) {}
        OnForceShowCard(t) {
            var e;
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            this.unschedule(this._forceShowCardGameTimeOutFunc);
            const a = t.msg;
            if (a.playerid === this.getUserIDData()) {
                if (!this.gameDataInstance.tGameData.game_settlement_uuid.length || !this._forceShowCardGameUuidRequest.length || this._forceShowCardGameUuidRequest == this.gameDataInstance.tGameData.game_settlement_uuid) {
                    this.gameDataInstance.tRoomData.pkPayMoneyItem.showCardCount = a.count, this.gameDataInstance.tRoomData.pkPayMoneyItem.spectatorShowCardCount = a.spectatorCount;
                    for (let t = 0; t < a.show_seats.length; ++t) {
                        let e = a.show_seats[t],
                            n = this.getSeatBySeverId(e.show_seat_id);
                        if (n) {
                            const t = this._forceShowCardGameUuidRequest.length && this._forceShowCardGameUuidRequest == this.gameDataInstance.tGameData.game_settlement_uuid;
                            n.showDownByForceExpose(e, t)
                        } else {
                            var i;
                            let a = "";
                            a = e ? "not show " + (e.cards ? e.cards.map((t => `(${t.number},${t.suit}`)).join() : "null") + ` because seat_id ${e.show_seat_id} not found or just left seat` : `not found data index ${t}`, null == (i = Lt.getInstance()) || i.trace(Ot.HandRevealNotShown, "MultipleCashGame", {
                                name: "OnForceShowCard",
                                issue: a + ` with uuid ${this._forceShowCardGameUuidRequest}`,
                                rooms: q.roomManager.rooms.map((t => `GameId: ${t.getCurrentGameID()} - RoomId: ${t.getCurrentRoomID()} - IsJoined: ${t.joinedGame}`)).join(),
                                roomLength: q.roomManager.rooms.length
                            }, !1, !1)
                        }
                    }
                }
                this._forceShowCardGameUuidRequest = "", this.UpdateForceShowCardPrice(), q.action.setButtonActiveFalse(this.forceShowCard_button.getComponent(r)), q.TT.showMsg(q.StringTools.formatC(q.config.getStringData("ForceShowCardToast"), a.playername), q.Enum.ToastType.ToastTypeWarning, !1, !1, null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene)
            }
        }
        UpdateForceShowCardPrice() {
            const t = this._isSpectatorReveal() ? this.gameDataInstance.tRoomData.pkPayMoneyItem.showCardCountsSpectatorFee : this.gameDataInstance.tRoomData.pkPayMoneyItem.showCardCountsFee,
                e = this._isSpectatorReveal() ? this.gameDataInstance.tRoomData.pkPayMoneyItem.spectatorShowCardCount + 1 : this.gameDataInstance.tRoomData.pkPayMoneyItem.showCardCount + 1;
            for (let a = 0; a < t.length; ++a)
                if (e >= t[a].startCount && e <= t[a].endCount) {
                    const e = this.gameDataInstance.tRoomData.neededFeeAsPerCurrency(t[a]);
                    this.updateForceShowCardImageUi(e);
                    break
                }
        }
        updateForceShowcardCurrency(t) {
            this.forceShowCardCurrency && null != t && this.forceShowCardCurrency.updateVal(t, this.gameDataInstance.tRoomData.currency.type)
        }
        updateForceShowCardImageUi(t) {
            this.forceShowCard_text.string = q.StringTools.numberToString(q.StringTools.clientGoldByServer(t)), this.updateForceShowcardCurrency(this.forceShowCard_text.string), this.updateForceShowCardPositions()
        }
        updateForceShowCardPositions() {
            let t = q.resMgr.getLabelStringSize(this.forceShowCard_text).width;
            !this.forceShowCardCurrency.isIconShown ? this.forceShowCard_text.node.setPosition(0, 0) : (this.showcardDamon_img.setPosition(-t / 2 - 2, this.showcardDamon_img.getPosition().y), this.forceShowCard_text.node.setPosition(this.showcardDamon_img.getComponent(b).contentSize.width / 2 * this.showcardDamon_img.scale.x + 2, this.forceShowCard_text.node.getPosition().y))
        }
        OnSendCardFun(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            const e = t.msg;
            switch (this.collectGameEventTrace(`OnSendCardFun,state:${e.round_state}`), this.cardFunTips_text.node.active = !1, this.cardFunTips_text.string = q.config.getStringData("UICardFunTips"), e.round_state) {
                case q.Enum.BettingRoundType.Enum_BettingRound_Preflop: {
                    for (let t = 0; t < e.cards.length; ++t) {
                        let a = e.cards[t];
                        this.m_pkPublicCard[t].setContent(a.number, a.suit), this.m_pkPublicCard[t].setActive(!0)
                    }
                    this.DealFlop(!0);
                    const t = this.gameDataInstance.tRoomData.neededFeeAsPerCurrency(this.gameDataInstance.tRoomData.pkPayMoneyItem.showLeftCardFee[0]);
                    let a = q.StringTools.clientGoldByServer(t);
                    this.setDealNum(a)
                }
                break;
                case q.Enum.BettingRoundType.Enum_BettingRound_Flop: {
                    let t = e.cards[0];
                    this.m_pkPublicCard[3].setContent(t.number, t.suit), this.DealTurn(!0);
                    const a = this.gameDataInstance.tRoomData.neededFeeAsPerCurrency(this.gameDataInstance.tRoomData.pkPayMoneyItem.showLeftCardFee[1]);
                    let i = q.StringTools.clientGoldByServer(a);
                    this.setDealNum(i)
                }
                break;
                case q.Enum.BettingRoundType.Enum_BettingRound_Turn: {
                    let t = e.cards[0];
                    this.m_pkPublicCard[4].setContent(t.number, t.suit), console.log("DealRiver :: CardFun"), this.DealRiver(!0);
                    const a = this.gameDataInstance.tRoomData.neededFeeAsPerCurrency(this.gameDataInstance.tRoomData.pkPayMoneyItem.showLeftCardFee[2]);
                    let i = q.StringTools.clientGoldByServer(a);
                    this.setDealNum(i)
                }
                break;
                case q.Enum.BettingRoundType.Enum_BettingRound_River:
            }
        }
        _onMsgNeedSliderVerify(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || this.game && this.game.sliderVerify_panel && this.game.sliderVerify_panel.autoShow((() => {
                q.gameNet.RequestSitdown(t.msg.roomId, t.msg.seatId)
            }), !0, this.gameDataInstance.tRoomData.u32GameID)
        }
        _onMsgNeedBuyInsurance(t) {
            if (!xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) && !q.netWorkManager.isAppEnterBackground() && this.game.insurance_panel)
                if (115 === t.msg.error) {
                    var e;
                    if (!q.appConfig.getGameConfig().isAutoCancelInsurrance) q.TT.showMsg(q.config.getStringData("Insurance_bg_tips_no_rates_text"), q.Enum.ToastType.ToastTypeInfo, !1, !1, null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene)
                } else {
                    this.gameDataInstance.tGameData.m_u32InsuranceSeq = t.msg.action_seq;
                    let e = this.gameDataInstance.tRoomData.u32GameID,
                        a = 1 === this.gameDataInstance.tRoomData.pkRoomParam.is_mirco,
                        i = this.game.insurance_panel.getComponent(ct);
                    i.setViewMode(mt.InsuranceViewMode.VIEW_NORMAL), i.parseInsuranceData(e, t.msg, a);
                    {
                        let e = [],
                            a = this.gameDataInstance.tRoomData.GetTablePlayer(t.msg.buyer_uid);
                        if (t.msg.buyer_uid === this.getUserIDData()) {
                            this.m_bIsSelfShowDown = !0;
                            for (let t = 0; t < q.StringTools.getArrayLength(this.m_pkSelfCard); ++t) {
                                let a = pe.protocol.CardItem.create();
                                a.number = this.m_pkSelfCard[t].eCardNum, a.suit = this.m_pkSelfCard[t].eCardSuit, e.push(a)
                            }
                        } else {
                            let t = this.getSeatBySeverId(a.seatid);
                            for (let a = 0; a < t.getHandsCardsCount(); ++a) {
                                let i = t.getShowCard(a);
                                if (i) {
                                    let t = pe.protocol.CardItem.create();
                                    t.number = i.eCardNum, t.suit = i.eCardSuit, e.push(t)
                                }
                            }
                        }
                        i.addPlayerCardsData(a.playerid, a.name, 0, e, !0)
                    }
                    for (let e = 0; e < q.StringTools.getArrayLength(t.msg.player_seats); ++e) {
                        let a = pe.protocol.PlayerSeatInfo.create(t.msg.player_seats[e]),
                            n = this.getSeatBySeverId(a.seatid);
                        if (!n) continue;
                        let o = n.PlayerInfo.playerid,
                            s = n.PlayerInfo.name;
                        if (i.addPlayerCardsData(o, s, a.outs_count, a.holecards, !1), a.seatid != this.gameDataInstance.tRoomData.i32SelfSeat)
                            for (let t = 0; t < q.StringTools.getArrayLength(a.holecards); ++t) n.getShowCard(t).setContent(a.holecards[t].number, a.holecards[t].suit), n.getShowCard(t).isFace() || n.showDown(t + 1)
                    }!q.appConfig.isLandscapeLayout && this.game.guess_hand_card.active && i.isInsuranceSmallBox() || i.autoShow(), this.hideBombInfoPrompt()
                }
        }
        playEffectOnCurrentRoom(t) {
            q.AudioMgr.playEffectByAudioCompInGameCash(oe.Instance().setUrl(t).setRoomId(this.gameSceneInstance.room.getCurrentRoomID()))
        }
        _onMsgNoNeedBuyInsurance(t) {
            var e;
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || q.TT.showMsg(q.config.getStringData("UIGameSceneTips6"), q.Enum.ToastType.ToastTypeInfo, !1, !1, null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene)
        }
        _onMsgHitOuts(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let e = this.gameDataInstance.tRoomData.GetTablePlayer(t.msg.playerid);
            if (!e) return;
            let a = this.getSeatBySeverId(e.seatid);
            if (!a) return;
            e.stake = e.stake + t.msg.payment, a.setStake(e.stake);
            let i = "+" + q.StringTools.serverGoldToShowString(t.msg.payment);
            a.SetName(i, q.Enum.NameTextType.SetNameType_setWinNumber), this.PotOfAppropriationEff(this.mainpool, a.node, e, .5), this.scheduleOnce((() => {
                var e;
                this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/insure_success"), q.TT.showMsg(q.config.getStringData("UIGameSceneTips8"), q.Enum.ToastType.ToastTypeInfo, !1, !1, null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene), this.m_pkPublicCard[4].node.active ? this.m_pkPublicCard[4].setCrackAnim(!0) : this.m_pkPublicCard[3].node.active && this.m_pkPublicCard[3].setCrackAnim(!0);
                let a = 1 === this.gameDataInstance.tRoomData.pkRoomParam.is_mirco ? 2 : 0,
                    i = q.StringTools.clientGoldByServer(t.msg.payment);
                i = q.StringTools.toFixed(i, a, q.StringTools.RoundingMode.ROUND_HALF_UP), this._showHitOutsTipsAnim(i)
            }), .8)
        }
        _onMsgMissOuts(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || this.scheduleOnce((() => {
                var t;
                q.TT.showMsg(q.config.getStringData("UIGameSceneTips7"), q.Enum.ToastType.ToastTypeInfo, !1, !1, null == (t = this.gameSceneInstance) || null == (t = t.room) ? void 0 : t.gameScene)
            }), .7)
        }
        _showHitOutsTipsAnim(t) {
            if (this.game.insuranceHitOutsTips) {
                do {
                    let t = this.m_pkPublicCard[0].node,
                        e = this.game.insuranceHitOutsTips;
                    if (!C(t, !0) || !C(e, !0)) continue;
                    let a = t.getComponent(b),
                        i = e.getComponent(b),
                        n = I(v.getVisibleSize().width / 2, v.getVisibleSize().height / 2);
                    n.y = a.convertToWorldSpaceAR(I(p.ZERO)).y - 10, n.y -= (1 - a.anchorY) * a.height * t.scale.y, n.y -= (1 - i.anchorY) * i.height * e.scale.y, e.parent.getComponent(b).convertToNodeSpaceAR(n, n), e.setPosition(n)
                } while (0);
                this.game.insuranceHitOutsTips.getComponent(gt).showAnim(t)
            }
        }
        setFreeSliderText(t) {
            this._freeSliderValue = t, this.freeSliderText.string = this.gameDataInstance.tRoomData.getDataPointValue(t)
        }
        getFreeSliderPercent(t, e, a) {
            return e / a
        }
        onSliderDownEventResetSlider() {
            return !this.onclickSliderDown && (this.setFreeSliderProgress(0), !0)
        }
        getSliderPercent() {
            let t = Math.floor(this.freeSlider.progress / this.freeSliderStep);
            return t = t == this.ChipsLevel.length ? t - 1 : t, t
        }
        getMaxPercent() {
            return this.ChipsLevel.length - 1
        }
        setSliderTextAmount(t) {
            this.setFreeSliderText(q.StringTools.clientGoldByServer(this.ChipsLevel[t]))
        }
        sliderEvent(t, e) {
            if (this.onSliderDownEventResetSlider()) return;
            let a = this.getSliderPercent(),
                i = this.getMaxPercent();
            this.gameDataInstance.tGameData.m_u32FullPot;
            a != i ? (this.setSliderTextAmount(a), this.lastPercent != this.gameDataInstance.tRoomData.getChipAmountFromDataPoint(this.freeSliderText.string) && (this.lastPercent = this.gameDataInstance.tRoomData.getChipAmountFromDataPoint(this.freeSliderText.string), this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/slider.mp3"))) : this.setSliderTextAmount(this.getMaxPercent()), console.log("sliderEvent::" + this.freeSlider.node.getComponent(b).contentSize.width);
            let n = this.ChipsLevel[a];
            this.freeSliderProgressBar && (this.freeSliderProgressBar.progress = this.freeSlider.progress), a === i ? this.perPercent !== i && (this.isEqualSliderBetMaximum(n) ? (this.enableSlider(!0), this.setSliderBg(255), this.setActionButtonsView2(!1), this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/slider_top.mp3")) : this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/slider")) : (this.perPercent === i && this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/slider"), this.sliderAllin.active = !1), this.perPercent = a
        }
        isEqualSliderBetMaximum(t) {
            return this._sliderMaxBetNum === t
        }
        onsliderHandDown(t) {
            this.onclickSliderDown = !0, this.setActionButtonsView2(!1), this.setFreeSliderProgress(0), this.setFreeSliderNodeOpacity(255), this.setSliderBg(255), this.setFreeSliderTextNodeAcive(!0), this.setFreeSliderTextBgNodeAcive(!0), this.setFreeSliderPercentImgNodeAcive(!0)
        }
        onSliderSetValue(t) {
            this.OnRaise(t)
        }
        onsliderHandUp(t) {
            if (!this.onclickSliderDown) return;
            this.onclickSliderDown = !1;
            let e = Math.floor(this.freeSlider.progress / this.freeSliderStep);
            e = e == this.ChipsLevel.length ? e - 1 : e;
            let a = this.ChipsLevel.length - 1,
                i = this.gameDataInstance.tGameData.m_u32MiniRaise,
                n = this.ChipsLevel[e];
            var o;
            0 != e && (n >= i || e == a) && (Lt.SetTrackAttributesToSpan(Ot.CashGameActions, {
                userClick: !0,
                action: n,
                type: "sliderup"
            }), null == (o = Lt.getInstance()) || o.startSpan(Ot.CashGameRaise, "SliderSelect", {
                minRaise: i,
                amount: n
            }), this.onSliderSetValue(n));
            this.gameDataInstance.tGameData.m_bIsOnSelfAction && (this.setActionButtonsView(!0), this.addTime_button.active = !0), this.setFreeSliderNodeOpacity(0), this.setSliderBg(0), this.setActionButtonsView2(!0), this.setFreeSliderTextNodeAcive(!1), this.setFreeSliderTextBgNodeAcive(!1), this.setFreeSliderProgress(0);
            let s = f("allinfire", this.sliderAllin);
            s && s.getComponent(R).stop(), this.sliderAllin.active = !1, this.setFreeSliderPercentImgNodeAcive(!1)
        }
        onsliderHandCancel(t) {
            var e;
            if (!this.onclickSliderDown) return;
            this.onclickSliderDown = !1;
            let a = this.freeSlider.progress,
                i = this.gameDataInstance.tGameData.m_u32MiniRaise,
                n = this.ChipsLevel[a];
            Lt.SetTrackAttributesToSpan(Ot.CashGameActions, {
                userClick: !0,
                action: n,
                type: "slidercancel"
            }), null == (e = Lt.getInstance()) || e.startSpan(Ot.CashGameRaise, "SliderCancel", {
                minRaise: i,
                amount: n
            }), (n >= i || 1 == a) && this.OnRaise(n), this.gameDataInstance.tGameData.m_bIsOnSelfAction && (this.setActionButtonsView(!0), this.addTime_button.active = !0), this.setFreeSliderNodeOpacity(0), this.setSliderBg(0), this.setActionButtonsView2(!0), this.setFreeSliderTextNodeAcive(!1), this.setFreeSliderTextBgNodeAcive(!1), this.setFreeSliderProgress(0), this.sliderAllin.getComponent(R).stop(), this.sliderAllin.active = !1, this.setFreeSliderPercentImgNodeAcive(!1)
        }
        onGameChipsMoveOutHide(t) {
            this.getSeatBySeverId(t).hideChips()
        }
        OnShowDown(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || (this.collectGameEventTrace("OnShowDown"), this.RealShowDown(t.msg))
        }
        RealShowDown(t) {
            console.log("RealShowDown===============");
            let e = this.seatList.length,
                a = this.gameDataInstance.tRoomData.pkRoomParam.game_mode;
            for (let t = 0; t < e; t++) this.seatList[t].stopCDtime();
            for (let e = 0; e < t.shows.length; ++e) {
                let i = t.shows[e],
                    n = i.seatid;
                if (i.playerid != this.getUserIDData()) {
                    let t = this.getSeatBySeverId(n);
                    if (t) {
                        let e = [],
                            n = [];
                        for (let n = 0; n < i.cards.length; ++n) {
                            let o = i.cards[n].number,
                                s = i.cards[n].suit;
                            t.getShowCard(n).setContent(o, s);
                            let l = new at(a);
                            l.initWhitValue(at.getLocalValue(o, a), s, a), e.push(l.getNumber(a))
                        }
                        for (let t = 0; t < this.m_pkPublicCard.length; ++t) {
                            let e = this.m_pkPublicCard[t];
                            if (e.isActive) {
                                let t = new at(a);
                                t.initWhitValue(at.getLocalValue(e.eCardNum, a), e.eCardSuit, a), n.push(t.getNumber(a))
                            }
                        }
                        if (this.isGamePLO() ? t.showCardType(at.getPokerTypeString(e, n, a, 2, 3), .5) : t.showCardType(at.getPokerTypeString(e, n, a), .5), i.cards.length === this.m_pkSelfCard.length) {
                            t.showDown(0);
                            let e = this.m_pkPublicCard[4].node && this.m_pkPublicCard[4].node.active ? .7 : .55;
                            this.doAllinWinRate(e)
                        } else {
                            let t = i.cards.length,
                                e = this.m_pkSelfCard.length;
                            console.error(`GameMain - RealShowDown: hands cards length error: sclen = ${t}, cclen = ${e}`)
                        }
                    } else console.error(`GameMain - RealShowDown: can't find Seat: ${n}`)
                } else this.SelfShowCardAnim(this.m_pkSelfCard.length)
            }
            for (let e = 0; e < t.muck_list.length; ++e) {
                let a = this.getSeatBySeverId(t.muck_list[e]);
                if (a) {
                    let t = !0;
                    for (let e = 0; e < a.getHandsCardsCount(); ++e) t = t && !a.getShowCard(e).isActive;
                    t && (a.showTips(q.config.getStringData("ActionTips10"), q.Enum.TipsType.Tips_check), a.doGray(!0))
                }
            }
            this._isShowDownDone = !0
        }
        SelfShowCardAnim(t) {
            if (!this.m_bIsSelfShowDown)
                for (let e = 0; e < this.m_pkSelfCard.length; ++e) e < t && (this.m_pkSelfCard[e].isFace() ? this.m_pkSelfCard[e].setFace(!0) : (this.m_pkSelfCard[e].setFace(!1), this.m_pkSelfCard[e].turn(0)), this.m_bIsSelfShowDown = !0)
        }
        onGameStart(t) {
            if (!xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node)) {
                for (let t = 0; t < 5; t++) {
                    let e = this.m_pkPublicCard[t];
                    null != e && C(e) && (e.setContent(q.Enum.CardNum.CARD_2, q.Enum.CardSuit.CARD_DIAMOND), e.clearContent())
                }
                this.setEnableWaitingPlayerText(!1), this.showDichiChipText(!0), this.OnPauseGame(null)
            }
        }
        OnPauseGame(t) {}
        OnSettlement(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            const e = t.msg;
            this.collectGameEventTrace("OnSettlement"), this.setForbidChat(!1);
            let a = this.seatList.length;
            this._isShowGuess = q.appConfig.getGameConfig().enableShowGuess, this.gameDataInstance.tRoomData.curActionPlayerId = 0, this.closeZoomTips();
            for (let t = 0; t < a; t++) this.seatList[t].getStatus() != q.Enum.SeatStatus.SeatStatus_waiting && this.seatList[t].getStatus() != q.Enum.SeatStatus.SeatStatus_leave_a_monment && (this.seatList[t].stopCDtime(), this.seatList[t].resetActionType(), this.seatList[t].getTips() != q.config.getStringData("ActionTips10") && this.seatList[t].hideTips());
            if (this.MarkSelfCardTypeForPlo(!0), this.gameDataInstance.tRoomData.isSelfFold = !1, this.gameDataInstance.tRoomData.m_isAllInMode = !1, this.game.updateMenu(), this.isZoom()) this.toggleZoomObserveOnFold.setChecked(!1), $t.start("LastPaceTable");
            else {
                let t = !this.m_pkPublicCard[4].node.active && this.gameDataInstance.tRoomData.isBuyin && this._isSeat;
                1 == t ? this.deal_button.active = t : 0 == t && q.action.setButtonActiveFalse(this.deal_button.getComponent(r))
            }
            if (this.gameDataInstance.tRoomData.pkRoomParam.showAllHole) {
                q.action.setButtonActiveFalse(this.forceShowCard_button.getComponent(r));
                for (let t = 0; t < e.seatInfo.length; ++t) {
                    let a = e.seatInfo[t],
                        i = this.getSeatBySeverId(a.show_seat_id);
                    if (i && (i && !i.isShowDown)) {
                        for (let t = 0; t < i.getHandsCardsCount(); ++t) i.getShowCard(t).setContent(a.cards[t].number, a.cards[t].suit), i.getShowCard(t).setFace(!1);
                        i.showDown(0)
                    }
                }
            } else {
                let t = this.gameDataInstance.tRoomData.pkRoomParam.force_showcard,
                    e = this.isGameStarSeat() && this.isEnableGameStarSeat(),
                    a = !0;
                for (let t = 0; t < this.gameDataInstance.tRoomData.kTablePlayerList.length; ++t) {
                    let e = this.gameDataInstance.tRoomData.kTablePlayerList[t];
                    if (!e || !e.in_game) continue;
                    let i = this.getSeatBySeverId(e.seatid);
                    i && !i.isSelfSeat() && (i && !i.isShowDown && (a = !1))
                }
                const i = t && !a && (e || this._isSeat || this._isSpectatorReveal());
                i ? (this.forceShowCard_button.active = i, this.UpdateForceShowCardPrice()) : q.action.setButtonActiveFalse(this.forceShowCard_button.getComponent(r))
            }
            let i = 0;
            for (let t = 0; t < this.m_pkPublicCard.length; ++t) this.m_pkPublicCard[t].node.active && ++i;
            let n = 0;
            if (n = 0 === i ? q.StringTools.clientGoldByServer(this.gameDataInstance.tRoomData.neededFeeAsPerCurrency(this.gameDataInstance.tRoomData.pkPayMoneyItem.showLeftCardFee[0])) : 3 === i ? q.StringTools.clientGoldByServer(this.gameDataInstance.tRoomData.neededFeeAsPerCurrency(this.gameDataInstance.tRoomData.pkPayMoneyItem.showLeftCardFee[1])) : q.StringTools.clientGoldByServer(this.gameDataInstance.tRoomData.neededFeeAsPerCurrency(this.gameDataInstance.tRoomData.pkPayMoneyItem.showLeftCardFee[2])), this.setDealNum(n), A.stopAllByTag(this.GAME_DELAY_ELECT_DEALER_TAG), A.stopAllByTag(this.GAME_DELAY_ANTE_TAG), A.stopAllByTag(this.GAME_DELAY_BLIND_TAG), A.stopAllByTag(this.GAME_DELAY_HOLECARD_TAG), A.stopAllByTag(this.GAME_DELAY_ACTION_TURN_TAG), A.stopAllByTag(this.GAME_DELAY_NONEEDINSURANCE_TAG), this.scheduleOnce(this.CloseSendFun.bind(this), 3.2), this.gameDataInstance.tRoomData.pkRoomState.paused) {
                this.gameDataInstance.tRoomData.u32OwnerId, this.getUserIDData()
            }
            this.game.insurance_panel.active && this.game.insurance_panel.getComponent(ct).autoHide(), this.RealSettlement(e), this.addDataForRightPanelNewReplayer(e), this._cleanPeekCard(!0)
        }
        addDataForRightPanelNewReplayer(t) {
            var e, a, i, n, o;
            null == this.rightItemNewReplayerDataList && (this.rightItemNewReplayerDataList = []);
            let s = new me;
            s.roomId = t.roomid, s.gameId = this.currentGameId, s.gameuuid_js = t.gameuuid_js, s.totalPot = t.pots.reduce(((t, e) => t + e.amount), 0), s.winners = this.getNameWinners(t.winners), s.myCards = this.getMyCards(), s.index = this.rightItemNewReplayerDataList.length, s.isChosing = !1, s.isCash = !0, s.isMtt = !1, s.dataPointInfo = {
                isShortDeck: null == (e = this.gameDataInstance) || null == (e = e.tRoomData) ? void 0 : e.isShortDeck,
                ante: (null == (a = this.gameDataInstance) || null == (a = a.tRoomData) || null == (a = a.pkRoomParam) ? void 0 : a.rule_ante_amount) ?? 0,
                bigBlind: (null == (i = this.gameDataInstance) || null == (i = i.tRoomData) || null == (i = i.pkRoomParam) ? void 0 : i.BB) ?? (null == (n = this.gameDataInstance) || null == (n = n.tRoomData) || null == (n = n.pkTableStates) ? void 0 : n.bb_amount) ?? 0,
                currency: null == (o = this.gameDataInstance) || null == (o = o.tRoomData) ? void 0 : o.currency
            }, this.rightItemNewReplayerDataList.unshift(s), q.MessageCenter.send("updateRightPanelNewReplayer", {
                roomId: ce.getRoomId(this),
                dataList: this.rightItemNewReplayerDataList
            })
        }
        getMyCards() {
            let t = [];
            if (null == this.m_pkSelfCard || 0 == this.m_pkSelfCard.length) t = null;
            else
                for (let e = 0; e < this.m_pkSelfCard.length; e++) {
                    let a = this.m_pkSelfCard[e];
                    if (C(a)) {
                        let e = {
                            number: a.eCardNum,
                            suit: a.eCardSuit
                        };
                        t.push(e)
                    }
                }
            return t
        }
        getDataRightPanelNewReplayer() {
            return this.rightItemNewReplayerDataList
        }
        getNameWinners(t) {
            let e = [];
            for (let a = 0; a < t.length; ++a) {
                let i = t[a];
                if (i.amount - i.total_investment <= 0) continue;
                let n = this.gameDataInstance.tRoomData.GetTablePlayer(i.playerid),
                    o = {
                        name: n.name,
                        winningPot: i.amount
                    };
                n && e.push(o)
            }
            return e
        }
        CloseSendFun(t) {
            q.action.setButtonActiveFalse(this.deal_button.getComponent(r)), q.action.setButtonActiveFalse(this.forceShowCard_button.getComponent(r))
        }
        dealNumUpdateCurrency(t) {
            this.dealNumCurrency && null != t && this.dealNumCurrency.updateVal(t, this.gameDataInstance.tRoomData.currency.type)
        }
        setDealNum(t) {
            this.deal_text.string = q.StringTools.numberToShowString(t), this.dealNumUpdateCurrency(this.deal_text.string), this.deal_text.node.active = t > 0;
            let e = !this.dealNumCurrency.isIconShown;
            this.deal_icon.active = t > 0 && !e, this.updateDealUiPositions(e)
        }
        updateDealUiPositions(t) {
            let e = q.resMgr.getLabelStringSize(this.deal_text).width;
            t ? this.deal_text.node.setPosition(0, 0) : (this.deal_icon.setPosition(-e / 2 - 2, this.deal_icon.getPosition().y), this.deal_text.node.setPosition(this.deal_icon.getComponent(b).contentSize.width / 2 * this.deal_icon.scale.x + 2, this.deal_text.node.getPosition().y))
        }
        addDataRightPanelNewPlayer(t) {}
        RealSettlement(t) {
            q.appConfig.getGeneralConfig().multiWindowEnabled && Ft.getInstance().endTurn(q.roomManager.getGameScene(this.gameSceneInstance.room.getCurrentGameID(), this.gameSceneInstance.room.getCurrentRoomID()));
            for (let t = 0; t < this.seatList.length; ++t) this.getSeatBySeverId(t).hideFire();
            for (let t = 0; t < this.gameDataInstance.tRoomData.pkTableStates.players.length; ++t) {
                let e = this.gameDataInstance.tRoomData.pkTableStates.players[t];
                e.last_action = q.Enum.ActionType.Enum_Action_Null, e.in_game = !1
            }
            let e = [],
                a = [];
            for (let a = 0; a < t.winners.length; a++) {
                let i = t.winners[a];
                for (let t = 0; t < i.pots.length; ++t) {
                    let a = new nt;
                    a.pot = new it, q.StringTools.deepCopy(i.pots[t], a.pot), a.playerid = i.playerid, e.push(a)
                }
            }
            for (let t = 0; t < e.length; ++t) {
                let i = e[t],
                    n = a.length,
                    o = !1;
                for (let t = 0; t < n; t++) i.pot.potid == a[t].potid && (a[t].potInfo.playerids.push(i.playerid), o = !0);
                if (!o) {
                    let t = new ot;
                    q.StringTools.deepCopy(i.pot, t.pot), t.playerids.push(i.playerid);
                    let e = new st;
                    e.potid = i.pot.potid, e.potInfo = t, a.unshift(e)
                }
            }
            let i = .3;
            this.isGamePLO() && (i = 1.8 + 2.1 - .6 - .3);
            parseInt(this.mainpool_text.node.name);
            let n = [];
            this.scheduleOnce((t => {
                this.hideAllWinRate()
            }), 1);
            let o = this;
            for (let e = 0; e < a.length; e++)
                for (let l = 0; l < a[e].potInfo.playerids.length; l++) {
                    let r = this.gameDataInstance.tRoomData.GetTablePlayer(a[e].potInfo.playerids[l]),
                        h = a[e].potInfo.playerids.length > 1;
                    if (r) {
                        let d = this.getSeatBySeverId(r.seatid);
                        if (d)
                            if (a.length > 1) {
                                let t = this.GetSidePotById(a[e].potid),
                                    n = null;
                                t && (n = t.getComponent(b).convertToWorldSpaceAR(new p(0, 0, 0)));
                                let s = this.addPkChips(n);
                                o.PotOfAppropriationEff(this.mainpool, d.node, r, .6, i, !1, s, h)
                            } else {
                                var s;
                                let t = this.findAllPkChips(),
                                    n = null == (s = a[e]) || null == (s = s.potInfo) || null == (s = s.playerids) ? void 0 : s.length;
                                for (; t.length != n;) t.length < n ? t.push(this.addPkChips()) : t.pop().node.destroy();
                                o.PotOfAppropriationEff(this.mainpool, d.node, r, .6, i, !1, t[l], h)
                            } for (let e = 0; e < t.winners.length; e++) {
                            let a = t.winners[e];
                            if (r.playerid == a.playerid && a.total_investment < a.amount) {
                                let t = !1;
                                for (let e = 0; e < n.length; e++)
                                    if (n[e] == r.seatid) {
                                        t = !0;
                                        break
                                    } 0 == t && (a.playerid == this.getUserIDData() ? (this.showSelfWin(), n.push(r.seatid)) : 0 == t && (this.showOtherWin(r.seatid), n.push(r.seatid)))
                            }
                        }
                    }
                }
            a.length > 1 && this.HideSidePot();
            for (let e = 0; e < t.winners.length; e++) {
                let a = t.winners[e],
                    i = a.seatid,
                    n = this.getSeatBySeverId(i),
                    o = this.gameDataInstance.tRoomData.GetTablePlayerBySeatId(i);
                if (o)
                    if (o.stake = o.stake + a.amount, n) {
                        let t = "%d";
                        a.amount - a.total_investment > 0 ? t = "+%f" : (a.amount - a.total_investment < 0 || a.amount - a.total_investment == 0) && (t = "%f");
                        let e = q.StringTools.numberToString(q.StringTools.clientGoldByServer(q.StringTools.minus(a.amount, a.total_investment)));
                        n.SetName(q.StringTools.formatC(t, e), q.Enum.NameTextType.SetNameType_setWinNumber)
                    } else console.log("can't find Seat:" + i)
            }
            for (let t = 0; t < this.seatList.length; ++t) {
                let e = !1;
                for (let a = 0; a < n.length; a++)
                    if (n[a] == t) {
                        e = !0;
                        break
                    } e || (this.getSeatBySeverId(t).isSelfSeat() ? this.showSelfLose() : this.getSeatBySeverId(t).showLose())
            }
            for (let e = 0; e < t.jinfo.length; e++) {
                let a = t.jinfo[e].win_jackpot_id,
                    i = t.jinfo[e],
                    n = this.gameDataInstance.tRoomData.GetTablePlayer(a);
                if (n) {
                    let t = this.getSeatBySeverId(n.seatid);
                    t && t.addStake(i.win_jackpot_num)
                }
            }
            P(this.node).delay(4).call((() => {
                this.resetTable(!0)
            })).tag(this.GAME_DELAY_RESET_TABLE_TAG).start(), te.config.enabled && q.MessageCenter.send("cashgame_on_game_settlement_noti", {
                key: this,
                handId: t.gameuuid_js
            })
        }
        demoPlayersWin() {
            for (let t = 0; t < this.gameDataInstance.tRoomData.pkTableStates.players.length; t++) {
                let e = this.gameDataInstance.tRoomData.pkTableStates.players[t];
                if (e) {
                    let t = this.getSeatBySeverId(e.seatid);
                    if (t) {
                        let a = this,
                            i = this.addPkChips();
                        i.showChipInPot(!0, (() => {
                            a.PotOfAppropriationEff(this.mainpool, t.node, e, .13, .3, !1, i, !0)
                        }))
                    }
                }
            }
        }
        sidePotEndRound(t = !1, e = (() => {})) {
            if (this.sidepoolList.length > 0) {
                q.appConfig.isLandscapeLayout, q.appConfig.isLandscapeLayout;
                for (let a = 0; a < this.sidepoolList.length; a++) {
                    let i = this.sidepoolList[a];
                    const n = i.getComponent(ae);
                    if (!n) continue;
                    let o = n.sidePotBgLayout,
                        s = n.sidePotDot,
                        l = n.chipIcon,
                        r = n.sidePotText;
                    if (!l || !r || !o) continue;
                    let h = o.getComponent(w),
                        d = .06,
                        u = .2,
                        m = .27;
                    if (t) this.isShowingSidePot = !1, h.enabled = !0, l.getComponent(B).opacity = 255, l.setPosition(I(this.chipSidePotIconPosX, this.chipSidePotIconPosY, 0)), r.getComponent(B).opacity = 255, s && (s.getComponent(B).opacity = 255);
                    else {
                        0 == this.chipSidePotIconPosX && 0 == this.chipSidePotIconPosY && (this.chipSidePotIconPosX = l.position.x, this.chipSidePotIconPosY = l.position.y), h.enabled = !1;
                        let t = i.getComponent(b).convertToNodeSpaceAR(this.mainpool.position),
                            a = this,
                            n = P;
                        n(l).parallel(n().to(m, {
                            position: {
                                value: t,
                                easing: "sineOut"
                            }
                        }), n(l.getComponent(B)).to(m, {
                            opacity: 0
                        }), n().delay(d).call((() => {
                            a.findPkChips().showChipInPot(!0, (() => {
                                e && e()
                            }))
                        }))).start(), P(r.getComponent(B)).to(u, {
                            opacity: 0
                        }).start(), s && P(s.getComponent(B)).to(u, {
                            opacity: 0
                        }).start()
                    }
                }
            }
        }
        getPkStartLocalPosition(t) {
            return t.getPosition()
        }
        _ChipsMoveAction(t, e, a) {
            let i = this.addPkChips(),
                n = t.getParent().getComponent(b).convertToWorldSpaceAR(t.getPosition());
            i.node.setPosition(this.nodeUITransform.convertToNodeSpaceAR(n));
            let o = e,
                s = new p(0, 0, 0);
            o.getComponent(b).convertToWorldSpaceAR(I(0, 0, 0), s), i.MoveOutToTarget(e, s, a)
        }
        ChipsMoveAction(t, e, a, i = null) {
            this._ChipsMoveAction(t, e, a), i && P(this.node).delay(a + .6).call(i).tag(this.GAME_CHIPS_MOVE_ACTION_TAG).start()
        }
        addPkChips(t = null) {
            let e = D(this.game.ChipsMoveprefab),
                a = e.getComponent(rt);
            a.isMainPot = !0, this.pkchipsNode.addChild(e);
            let i = t || this.mainpoolUITransform.convertToWorldSpaceAR(I(0, 0, 0));
            return this.pkchipsNode.addComponent(b), e.setPosition(this.pkchipsNode.getComponent(b).convertToNodeSpaceAR(i)), e.name = "pkChips", a.showChipInPot(!1), a
        }
        findPkChips(t = !0) {
            let e, a = null,
                i = this.findAllPkChips();
            return i.length > 0 && (a = i[0].node), t ? (a ? e = a.getComponent("GameChipsMove") : (e = this.addPkChips(), a = e.node), e || (e = this.addPkChips(), a = e.node)) : a && (e = a.getComponent("GameChipsMove")), e
        }
        findAllPkChips() {
            this.checkAndInitPkChipsNode();
            let t = [];
            for (let e = 0; e < this.pkchipsNode.children.length; ++e) {
                let a = this.pkchipsNode.children[e];
                a.isValid && t.push(a.getComponent(rt))
            }
            return t
        }
        _ChipsMoveOutToTarget(t, e, a, i = null, n = !1) {
            let o = this,
                s = null != i ? i : this.findPkChips(),
                l = e.getComponent(ht).getWorldPositionChipsAnimation();
            s.MoveOutToTarget(e, l, a, n), n ? (P(o.mainpool_text.node.getComponent(B)).to(.13, {
                opacity: 0
            }).call(o.resetMainPool.bind(this)).start(), P(o.mainpool_chips.getComponent(B)).to(.13, {
                opacity: 0
            }).call(o.resetMainPool.bind(this)).start()) : P(o.mainpool_text.node.getComponent(B)).delay(a).to(.3, {
                opacity: 0
            }).call(o.resetMainPool.bind(this)).start()
        }
        showChipInPot() {
            this.findPkChips().showChipInPot()
        }
        hideChipInPot() {
            this.resetMainPool(), this.removeMainPoolChip()
        }
        resetMainPool() {
            A.stopAllByTarget(this.mainpool_text.node), A.stopAllByTarget(this.mainpool_chips), this.setActiveMainPoolBg(!1), this.mainpool_chips.active = !1, this.mainpool_chips.getComponent(B).opacity = 255, this.setMainPoolLabel(""), this.mainpool_text.node.getComponent(B).opacity = 255
        }
        PotOfAppropriationEff(t, e, a, i, n = .3, o = !1, s = null, l = !1) {
            if (this._ChipsMoveOutToTarget(t, e, i, s, l), !o && a) {
                let t = {
                    player: a,
                    target: e
                };
                P(this.node).delay(i + n).call((() => {
                    this.DelayShowStake(this.node, t)
                })).tag(this.GAME_END_SETSTAKE_TAG).start()
            }
        }
        DelayPlayAudio(t) {
            this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/chips_to_pot.mp3")
        }
        DelayShowStake(t, e) {
            e.target.getComponent(ht).setStake(e.player.stake);
            let a = 0,
                i = q.GameDataManager.tJackPot.noticeJackPotAwardInfo.awardInfo;
            if (i)
                for (let t = 0; t < i.length; t++) {
                    let n = i[t];
                    if (n.award_playid == e.player.playerid) {
                        a = n.award_amount;
                        break
                    }
                }
            this.m_hashitJackpotCard && (e.target.getComponent(ht).addStake(a), this.m_hashitJackpotCard = !1, e.target.getComponent(ht).setStake(e.player.stake + a))
        }
        GetSidePotById(t) {
            for (let e = 0; e < this.sidepoolList.length; ++e)
                if (parseInt(this.sidepoolList[e].name) == t) return this.sidepoolList[e];
            return null
        }
        showSelfLose() {
            for (let t = 0; t < this.m_pkSelfCard.length; ++t) this.m_pkSelfCard[t].setGary(!0)
        }
        showOtherLose(t) {
            this.getSeatBySeverId(t).showLose()
        }
        highlightWinnersCombination(t, e) {
            if (!this._isShowDownDone) return;
            this._isShowDownDone = !1;
            let a = this.gameDataInstance.tRoomData.pkRoomParam.game_mode,
                i = this.getPokers(a, t),
                n = this.getPokers(a, this.m_pkPublicCard),
                o = i.concat(n),
                s = [],
                l = "";
            if (this.isGamePLO()) {
                let t = [],
                    e = [];
                l = at.getPokerTypeString(i, n, a, 2, 3, t, e), s = t.concat(e)
            } else {
                let t = at._getPokerType(o, a, s);
                l = at.getPokerTypeStringFromTypeCode(t)
            }
            this.winnerCombinationText.string = l, this.showWinnerCombination(!0);
            for (let a = 0; a < i.length; ++a) {
                let n = i[a],
                    o = !1;
                for (let t = 0; t < s.length; ++t) {
                    if (s[t] == n) {
                        o = !0;
                        break
                    }
                }
                o || (e ? t[a].setGary(!0) : t[a].garyOpponent(0))
            }
            for (let t = 0; t < n.length; ++t) {
                let e = n[t],
                    a = !1;
                for (let t = 0; t < s.length; ++t) {
                    if (s[t] == e) {
                        a = !0;
                        break
                    }
                }
                a || this.m_pkPublicCard[t].setGary(!0)
            }
        }
        showSelfWin() {
            let t = this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat);
            t && t.showWin(), this.highlightWinnersCombination(this.m_pkSelfCard, !0)
        }
        winBack(t) {
            t.active = !1
        }
        removeWin() {}
        showOtherWin(t) {
            let e = this.getSeatBySeverId(t);
            e.showWin(), this.MarkOtherCardTypeForPlo(t), this.highlightWinnersCombination(e.getShowCards(), !1)
        }
        OnPlayerShowCards(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            const e = t.msg;
            if (this.collectGameEventTrace("OnPlayerShowCards"), !q.appConfig.getGameConfig().enableShowOpponentCards) return;
            let a = 0;
            for (let t = 0; t < e.players.length; ++t) {
                let i = e.players[t],
                    n = this.getSeatBySeverId(i.seatid);
                if (n) {
                    for (let t = 0; t < i.cards.length; ++t)
                        if (!(a >= e.show_card_id.length)) {
                            if (i.playerid != this.getUserIDData()) {
                                let o = e.show_card_id[a],
                                    s = i.cards[t];
                                n.getShowCard(o).setContent(s.number, s.suit)
                            }
                            a += 1
                        }(i.playerid != this.getUserIDData() || this.gameDataInstance.tRoomData.isSelfFold) && n.showDown(0)
                }
            }
        }
        OnLeaveSeat(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let e = this.gameDataInstance.tRoomData.GetTablePlayer(t.playerid);
            this.leaveTable(e), this.game.updateMenu()
        }
        OnReponseStayPosition(t) {
            if (!xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) && -1 != this.gameDataInstance.tRoomData.i32SelfSeat && 1 == t.error) {
                var e;
                let t = {
                    txt: "SitOutNextHand",
                    title: "Attention",
                    msgType: q.Enum.ToastType.ToastTypeWarning,
                    cashGameScene: null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene
                };
                q.popUp.showMsgI18n(t)
            }
        }
        OnGameAnteNoti(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            const e = t.msg;
            this.collectGameEventTrace("OnGameAnteNoti"), this.gameDataInstance.tGameData.m_u32DelayTime += 0, this.gameDataInstance.tGameData.m_bIsAnte = !0, this.gameDataInstance.tGameData.m_u32DelayTime > 0 ? P(this.node).delay(this.gameDataInstance.tGameData.m_u32DelayTime).call((() => {
                this.RealAnteNoti(this.node, e)
            })).tag(this.GAME_DELAY_ANTE_TAG).start() : this.RealAnteNoti(this, e)
        }
        RealAnteNoti(t, e) {
            let a = 0;
            for (let t = 0; t < e.seat_list.length; ++t) {
                let i = this.gameDataInstance.tRoomData.GetTablePlayerBySeatId(e.seat_list[t]),
                    n = this.getSeatBySeverId(e.seat_list[t]);
                i && (i.in_game = !0, i.stake = i.stake - e.amount_list[t], i.round_bet = e.amount_list[t], this.UpdateDeadPot(e.amount_list[t]), a += e.amount_list[t], this.ShowMainPool(t, a), n ? (this.isTurnSeat || n.ChipsMoveOut(!0), n.setStake(i.stake)) : console.log(q.StringTools.formatC("can't find Seat(%d)", e.seat_list[t]))), n ? this.gameDataInstance.tRoomData.pkRoomParam.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Short && (this.gameDataInstance.tRoomData.pkRoomParam.short_game_double_ante || n.Bet(e.amount_list[t])) : console.log(q.StringTools.formatC("can't find Seat(%d)", e.seat_list[t]))
            }
        }
        OnWaitingOtherPlayer(t) {
            xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node) || (this.setEnableWaitingPlayerText(this.isWaitingPlayers(t)), A.stopAllByTag(9911), q.action.setButtonActiveFalse(this.deal_button.getComponent(r)), q.action.setButtonActiveFalse(this.forceShowCard_button.getComponent(r)), P(this.node).delay(4.5).call((() => {
                this.DelayReset()
            })).tag(9911).start())
        }
        DelayReset() {
            this.resetTable();
            for (let t = 0; t < this.gameDataInstance.tRoomData.kTablePlayerList.length; ++t) {
                let e = this.gameDataInstance.tRoomData.kTablePlayerList[t];
                if (e) {
                    e.last_action = q.Enum.ActionType.Enum_Action_Null, e.in_game = !1;
                    let t = this.getSeatBySeverId(e.seatid);
                    t && (t.getStatus() != q.Enum.SeatStatus.SeatStatus_leave_a_monment && t.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_waiting, q.Enum.ActionType.Enum_Action_Null), t.SetName(e.name), t.setStake(e.stake))
                }
            }
            for (let t = 0; t < this.m_pkSelfCard.length; ++t) this.m_pkSelfCard[t].setFace(!1);
            this.D_img.active = !1, this.showDichiChipText(!1), this.gameDataInstance.tRoomData.m_isAllInMode = !1, this.game.updateMenu()
        }
        OnCommunityCard(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || this.RealCommunityCard(null, t.msg)
        }
        RealCommunityCard(t, e) {
            switch (this.collectGameEventTrace(`OnCommunityCard,state:${e.betting_round}`), e.betting_round) {
                case q.Enum.BettingRoundType.Enum_BettingRound_Preflop:
                    break;
                case q.Enum.BettingRoundType.Enum_BettingRound_Flop:
                    for (let t = 0; t < e.cards.length; ++t) {
                        let a = e.cards[t];
                        this.m_pkPublicCard[t].setContent(a.number, a.suit), this.m_pkPublicCard[t].setActive(!0)
                    }
                    this.DealFlop(), this.doAllinWinRate(.9);
                    break;
                case q.Enum.BettingRoundType.Enum_BettingRound_Turn:
                    if (this.m_pkPublicCard[0].node.active && this.m_pkPublicCard[1].node.active && this.m_pkPublicCard[2].node.active) {
                        let t = e.cards[0];
                        this.m_pkPublicCard[3].setContent(t.number, t.suit), this.DealTurn(), this.doAllinWinRate(.7)
                    }
                    break;
                case q.Enum.BettingRoundType.Enum_BettingRound_River:
                    if (this.m_pkPublicCard[0].node.active && this.m_pkPublicCard[1].node.active && this.m_pkPublicCard[2].node.active) {
                        let t = e.cards[0];
                        this.m_pkPublicCard[4].setContent(t.number, t.suit), this.DealRiver()
                    }
            }
            this.updatePublicCards(e), e.betting_round !== q.Enum.BettingRoundType.Enum_BettingRound_River && this._peekCardPupup && this._peekCardPupup.isValid && (this._peekCardPupup.node.active = !1), this._afterRealDealCard()
        }
        addAllinPlayerWinRate(t) {
            let e = !0;
            this.m_pkPublicCard[4].node && this.m_pkPublicCard[4].node.active && !t.isGameEnd && (e = !1), this.m_curAllinSeats.push({
                seatId: t.seatid,
                bCalcWin: e
            })
        }
        hideAllWinRate() {
            if (this.m_curAllinSeats = [], this.seatList)
                for (let t = 0; t < this.seatList.length; ++t) {
                    let e = this.getSeatBySeverId(t);
                    e ? e.setWinRateStatus(!1) : E(`GameMain - hideAllWinRate: can't find Seat ${t}`)
                }
        }
        addAllinPlayersWinRate() {
            let t = !0;
            this.m_pkPublicCard[4].node && this.m_pkPublicCard[4].node.active && (t = !1), this.m_curAllinSeats = [];
            for (let e = 0; e < this.gameDataInstance.tRoomData.kTablePlayerList.length; ++e) {
                let a = this.gameDataInstance.tRoomData.kTablePlayerList[e];
                if (a && !a.isGameEnd) {
                    let e = this.getSeatBySeverId(a.seatid);
                    e && (e.isallin || e.actionType == q.Enum.ActionType.Enum_Action_Allin) && (e.isallin = !0, e.setWinRateStatus(!1), this.m_curAllinSeats.push({
                        seatId: a.seatid,
                        bCalcWin: t
                    }))
                }
            }
            this.doAllinWinRate()
        }
        doAllinWinRate(t = 0) {
            this.unschedule(this.calcWinRate), this.scheduleOnce(this.calcWinRate, t)
        }
        calcWinRate() {
            if (this.m_curAllinSeats.length < 1) return void console.log("当前没有Allin的玩家.");
            let t = [],
                e = [];
            for (let e = 0; e < this.gameDataInstance.tRoomData.kTablePlayerList.length; ++e) {
                let a = this.gameDataInstance.tRoomData.kTablePlayerList[e];
                if (a) {
                    let e = a.seatid,
                        i = this.getSeatBySeverId(e),
                        n = [];
                    if (i.getStatus() <= q.Enum.SeatStatus.SeatStatus_leave_a_monment) continue;
                    let o = !0;
                    for (let t = 0; t < this.m_curAllinSeats.length; t++) e == this.m_curAllinSeats[t].seatId && 0 == this.m_curAllinSeats[t].bCalcWin && (o = !1);
                    if (!o) continue;
                    if (e == this.gameDataInstance.tRoomData.i32SelfSeat) {
                        if (!this.gameDataInstance.tRoomData.isSelfFold) {
                            for (let t = 0; t < this.m_pkSelfCard.length; ++t) {
                                let e = this.m_pkSelfCard[t];
                                n.push({
                                    suit: e.getCardSuit(),
                                    num: e.getCardNum()
                                })
                            }
                            t.push({
                                seatID: e,
                                handCards: n
                            })
                        }
                    } else {
                        for (let t = 0; t < i.getHandsCardsCount(); ++t) {
                            let e = i.getShowCard(t);
                            n.push({
                                suit: e.getCardSuit(),
                                num: e.getCardNum()
                            })
                        }
                        i.getHandsCardsCount() >= 2 && i.getbShowDown() && t.push({
                            seatID: e,
                            handCards: n
                        })
                    }
                }
            }
            if (t.length >= 2) {
                for (let t = 0; t < 5; ++t) {
                    let a = this.m_pkPublicCard[t];
                    C(a.node) && a.node.active && e.push({
                        suit: a.getCardSuit(),
                        num: a.getCardNum()
                    })
                }
                let a = [];
                a = vt.getInstance().getWinRateByCards(this.currentGameId, this.gameDataInstance.tRoomData.pkRoomParam.game_mode, t, e);
                for (let t = 0; t < a.length; t++) {
                    let e = a[t].seatId,
                        i = a[t].winRate,
                        n = a[t].bLead;
                    this.getSeatBySeverId(e).setWinRateStatus(!0, n, i)
                }
            }
        }
        resetDealPos() {
            for (let t = 0; t < 5; ++t) C(this.m_pkPublicCard[t].node) && this.m_pkPublicCard[t].node.active && (this.m_pkPublicCard[t].stopSchedulesAndActions(), this.m_pkPublicCard[t].setFace(!0), this.m_pkPublicCard[t].node.setPosition(this.getPublicCardPosition(t)))
        }
        getPublicCardPosition(t) {
            return p.ZERO
        }
        DealFlop(t = !1) {
            let e = this.m_pkPublicCard[0].node.getComponent(b),
                a = e.convertToWorldSpaceAR(I(-100, -220, 0)),
                i = e.convertToWorldSpaceAR(I(0, 0, 0));
            for (let e = 0; e < 3; ++e)
                if (this.m_pkPublicCard[e].stopSchedulesAndActions(), this.m_pkPublicCard[e].setFace(!0), this.m_pkPublicCard[e].setGary(!1), this.m_pkPublicCard[e].setOp(t), t) this.m_pkPublicCard[e].node.setPosition(this.getPublicCardPosition(e)), this.m_pkPublicCard[e].setFace(!0), this.createAndRunRabbitHuntAnm(this.m_pkPublicCard[e], e);
                else {
                    let t = this.m_pkPublicCard[e].node.getComponent(b),
                        n = t.convertToNodeSpaceAR(a),
                        o = t.convertToNodeSpaceAR(i);
                    this.dealCardAnim(this.m_pkPublicCard[e].node, n, o)
                } t || (P(this.node).delay(.8).call((() => {
                this.DealDown()
            })).tag(5566).start(), this.scheduleRecoverDealDown())
        }
        DealTurn(t = !1) {
            this.m_pkPublicCard[3].stopSchedulesAndActions(), this.m_pkPublicCard[3].setFace(!0), this.m_pkPublicCard[3].setGary(!1), this.m_pkPublicCard[3].setOp(t), t ? (this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/dealcard"), this.m_pkPublicCard[3].setActive(!0), this.setPublicCardPosition(3), this.m_pkPublicCard[3].setFace(!0), this.createAndRunRabbitHuntAnm(this.m_pkPublicCard[3], 3)) : this.dealCardAnim(this.m_pkPublicCard[3].node, I(-60, -220, 0)), t || (P(this.node).delay(.7).call((() => {
                this.DealDown()
            })).tag(5566).start(), this.scheduleRecoverDealDown())
        }
        DealRiver(t = !1) {
            this.m_pkPublicCard[3].setCrackAnim(!1), this.m_pkPublicCard[4].stopSchedulesAndActions(), this.m_pkPublicCard[4].setFace(!0), this.m_pkPublicCard[4].setGary(!1), this.m_pkPublicCard[4].setOp(t), t ? (this._isPeekRound || this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/dealcard"), this.m_pkPublicCard[4].setActive(!0), this.setPublicCardPosition(4), this.m_pkPublicCard[4].setFace(!0), this.createAndRunRabbitHuntAnm(this.m_pkPublicCard[4], 4)) : this._isPeekRound || this.dealCardAnim(this.m_pkPublicCard[4].node, I(-60, -220, 0)), t || (P(this.node).delay(.7).call((() => {
                this.DealDown()
            })).tag(5566).start(), this.scheduleRecoverDealDown())
        }
        createAndRunRabbitHuntAnm(t, e) {
            const a = this._poolCardRabbitHunt.get() || D(t.node);
            a.parent = t.node.parent, a.position = t.node.position;
            const i = a.getComponent(tt);
            i.reset(), i.setContent(t.eCardNum, t.eCardSuit), i.setFace(!0), i.runRabbitHuntAnm(e, (() => {
                this._poolCardRabbitHunt.put(a)
            })), t.setActive(!1)
        }
        dealCardAnim(t, e, a = null) {
            this.findPkChips(!1);
            let i = t.parent,
                o = new n("tmpParent");
            o.addComponent(b), o.parent = i.parent, o.setPosition(i.getPosition()), t.parent = o, Nt.instance.changeParentKeepPos(o, this.node), t.active = !0, t.setScale(I(.8945, .8945, .8945)), t.setPosition(e), t.angle = -19, a ? (P(t).to(.35, {
                position: a,
                angle: 0,
                scale: I(1, 1, 1)
            }).delay(.1).to(.35, {
                position: new p(0, 0, 0)
            }).start(), this.scheduleOnce((() => {
                C(t, !0) && (t.setScale(I(1, 1, 1)), t.angle = 0, Nt.instance.changeParentKeepPos(t, i), o.destroy())
            }), .7)) : (P(t).to(.35, {
                position: new p(0, 0, 0),
                angle: 0,
                scale: I(1, 1, 1)
            }).start(), this.scheduleOnce((() => {
                C(t, !0) && (t.setScale(I(1, 1, 1)), t.angle = 0, Nt.instance.changeParentKeepPos(t, i), o.destroy())
            }), .35))
        }
        OnEndRound(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            const e = t.msg;
            this.collectGameEventTrace("OnEndRound"), this.closeZoomTips(), this.onCloseTips(), this.gameDataInstance.tGameData.m_bIsAnte ? (this.gameDataInstance.tRoomData.pkRoomParam.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Normal ? this.gameDataInstance.tGameData.m_u32DelayTime += 0 : this.gameDataInstance.tRoomData.pkRoomParam.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Short && (this.gameDataInstance.tRoomData.pkRoomParam.short_game_double_ante, this.gameDataInstance.tGameData.m_u32DelayTime += 0), this.gameDataInstance.tGameData.m_u32DelayTime > 0 ? P(this.node).delay(this.gameDataInstance.tGameData.m_u32DelayTime).call((() => {
                this.RealEndRound(this, e)
            })).tag(this.GAME_DELAY_ENDROUND_TAG).start() : this.RealEndRound(this.node, e)) : this.RealEndRound(this.node, e)
        }
        RealEndRound(t, e) {
            let a = !1,
                i = !1;
            for (let t = 0; t < this.gameDataInstance.tRoomData.kTablePlayerList.length; ++t) {
                let e = this.gameDataInstance.tRoomData.kTablePlayerList[t];
                if (e && e.in_game) {
                    e.round_bet = 0;
                    let t = this.getSeatBySeverId(e.seatid);
                    if (t) {
                        e.last_action, q.Enum.ActionType.Enum_Action_Fold, t.getStatus() != q.Enum.SeatStatus.SeatStatus_leave_a_monment && (e.last_action, q.Enum.ActionType.Enum_Action_Fold), t.stopCDtime(), 0 != t.getBetedNum() && (this.gameDataInstance.tGameData.m_bIsAnte ? (t.ChipsMoveOut(), a = !0, this.gameDataInstance.tGameData.m_bIsAnte = !1) : (t.ChipsMoveOut(), a = !0), i = !0)
                    } else console.log("can't find Seat:", e.seatid)
                }
            }
            if (i) {
                e.pots.length;
                this.scheduleOnce((() => {
                    if (e.pots.length >= 1 && !this.isShowingSidePot) {
                        let t = this.findPkChips();
                        this.mainpool_chips.active = !1, t.showChipInPot(!0, (t => {
                            this.ShowMainPool(e.pots[0].potid, e.pots[0].amount)
                        }))
                    }
                }), .25)
            }
            a && this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/chips_to_pot"), this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Null), this.giveUp_buttonIsCheck = !1, this.followFill_buttonIsCheck = !1;
            let n = 0;
            for (let t = 0; t < e.pots.length; ++t) n += e.pots[t].amount;
            e.pots.length > 1 && this.showSidepool(e.pots), this.gameDataInstance.tGameData.u32DeadPot = 0, this._dichiChipValue = 0;
            let o = q.StringTools.formatC(q.config.getStringData("dichiNum"), this._dichiChipValue);
            this.setTotalPotValue(this.gameDataInstance.tRoomData.getDataPointValue(o)), this.UpdateDeadPot(n), this.gameDataInstance.tGameData.m_bIsAnte ? this.gameDataInstance.tGameData.m_bIsAnte = !1 : this.gameDataInstance.tGameData.m_u32DelayTime = 0;
            for (let t = 0; t < e.public_card.length; ++t) {
                let a = e.public_card[t];
                this.QueckShowPublicCard(t, a.number, a.suit)
            }
            this.setPublicCards(e.public_card), this.onPotChange(e.pots.length > 0 ? e.pots[0].amount : 0), te.config.enabled && q.MessageCenter.send("cashgame_on_game_endround_noti", this)
        }
        setMainPoolText(t) {
            this._mainPoolValue = t;
            let e = this.mainpool_text.string,
                a = "" != t && "0" != t,
                i = "" != e && 0 != this.gameDataInstance.tRoomData.getChipAmountFromDataPoint(e);
            a && !i ? this.mainpool_chips.active = !1 : (this.mainpool_text.node.getComponent(B).opacity = 255, this.mainpool_chips.getComponent(B).opacity = 255, this.mainpool_chips.active = a), this.setMainPoolLabel(this.gameDataInstance.tRoomData.getDataPointValue(t))
        }
        setActiveMainPoolBg(t) {}
        checkLabelTruncatedAndLogToNR(t) {}
        stopSelfThinkCd() {
            let t = this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat);
            if (t && t.stopCDtime(), this.m_pkSelfCard)
                for (let t = 0; t < this.m_pkSelfCard.length; ++t) A.stopAllByTarget(this.m_pkSelfCard[t].node), this.clearPkSelfCardRotation(this.m_pkSelfCard[t].node)
        }
        clearPkSelfCardRotation(t) {
            t.angle = 0
        }
        moveFoldCardAnim(t, e, a) {
            let i = e.parent.getComponent(b).convertToNodeSpaceAR(this.mainpoolUITransform.convertToWorldSpaceAR(I(0, 0, 0))),
                n = e.getPosition(),
                o = new p;
            p.subtract(o, i, n);
            let s = o.length(),
                l = new p,
                r = s / 300;
            p.divide(l, o, I(r, r, r));
            let h = new p;
            r = s / 350, p.divide(h, o, I(r, r, r)), t ? P(e).by(.1, {
                position: new p(0, -40, 0)
            }).by(.5, {
                position: new p(n.x + l.x, n.y + l.y, 0)
            }).delay(.3).sequence(P(e).by(.5, {
                position: new p(n.x + h.x, n.y + h.y, 0)
            }), P(e).call((() => {
                P(e.getComponent(B)).to(.5, {
                    opacity: 0
                }).start()
            }))).call(a()).start() : P(e).to(.4, {
                position: new p(n.x + l.x, n.y + l.y, 0)
            }).delay(.3).sequence(P(e).to(.4, {
                position: new p(n.x + h.x, n.y + h.y, 0)
            }), P(e).call((() => {
                P(e.getComponent(B)).to(.4, {
                    opacity: 0
                }).start()
            }))).call(a()).start()
        }
        SelfFoldAnim() {
            let t = this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat);
            this.m_pkSelfCard.forEach(((e, a) => {
                e.setGary(!0), e.hideAnimation(a, q.appConfig.isLandscapeLayout ? e.node.parent : this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat).node.children[0], t ? t.getSrcCardScale(a) : .45)
            }))
        }
        removeFoldCard(t) {
            A.stopAllByTarget(t), t.removeFromParent(), t.destroy()
        }
        OtherFoldAnim(t) {}
        getOtherFoldAnimTargetPosition() {
            return this.mainpoolUITransform.convertToWorldSpaceAR(I(0, 0, 0))
        }
        UpdateRocketAngle(t, e, a) {
            t.angle = 180 * -Math.atan2(a.x - t.getPosition().x, a.y - t.getPosition().y) / Math.PI
        }
        OnPlayerAction(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            const e = t.msg;
            this.collectGameEventTrace("OnPlayerAction"), A.stopAllByTag(this.GAME_DELAY_ACTION_TURN_TAG), this.gameDataInstance.tGameData.m_u32DelayTime = 0, this.showDichiChipText(!0);
            let a = this.gameSceneInstance.gameNode.getChildByName(this.TIPS_TAG);
            a && a.removeFromParent(), this.onCloseTips();
            for (let t = 0; t < this.gameDataInstance.tRoomData.pkRoomParam.player_count_max; ++t) {
                let e = this.getSeatBySeverId(t);
                e ? e.getStatus() != q.Enum.SeatStatus.SeatStatus_leave_a_monment && e.stopCDtime() : console.log("can't find Seat:" + t)
            }
            let i = this.gameDataInstance.tRoomData.GetTablePlayerBySeatId(e.last_action_seat_id);
            if (i) {
                i.last_action = e.action_type, i.playerid == this.getUserIDData() && (this.stopSelfThinkCd(), this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Null), this.gameDataInstance.tGameData.m_bIsOnSelfAction = !1, this.scheduleOnce((() => {
                    var t, e;
                    null == (t = this.gameManager) || t.CheckAndChangePage(null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.roomId)
                })), q.gameNet.isPokerActions(e.action_type) && q.gameNet.responseReceived(pe.protocol.MSGID.MsgID_Action_Request, 0, e.roomid, 0));
                let t = this.getSeatBySeverId(i.seatid);
                if (e.action_type == q.Enum.ActionType.Enum_Action_Allin && this.addAllinPlayerWinRate(i), t) {
                    switch (e.action_type) {
                        case q.Enum.ActionType.Enum_Action_Check:
                            t.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_actionType, q.Enum.ActionType.Enum_Action_Check), this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/checkSound.mp3"), i.playerid == this.getUserIDData() && (this.followFill_buttonIsCheck = !1);
                            break;
                        case q.Enum.ActionType.Enum_Action_Fold:
                            t.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_actionType, q.Enum.ActionType.Enum_Action_Fold), i.playerid == this.getUserIDData() ? (this.SelfFoldAnim(), this.gameDataInstance.tRoomData.m_isAllInMode = !1, this.gameDataInstance.tRoomData.isSelfFold = !0, this.game.updateMenu(), this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Null), this._isShowGuess = q.appConfig.getGameConfig().enableShowGuess) : this.OtherFoldAnim(i.seatid), this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/foldCardSound");
                            break;
                        case q.Enum.ActionType.Enum_Action_Call:
                            i.round_bet = i.round_bet + e.amount, i.stake - e.amount >= 0 ? i.stake = i.stake - e.amount : i.stake = 0, this.UpdateDeadPot(e.amount), t.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_actionType, q.Enum.ActionType.Enum_Action_Call), t.Bet(e.amount, q.Enum.BType.BType_Call), t.setStake(i.stake), i.playerid == this.getUserIDData() && (this.followFill_buttonIsCheck = !1, this.markNode(this.followFill_Blue.node, "checkGrayImg"));
                            break;
                        case q.Enum.ActionType.Enum_Action_Bet:
                            this.UpdateDeadPot(e.amount - i.round_bet), i.stake = i.stake - (e.amount - i.round_bet), i.round_bet = e.amount, t.Bet(e.amount), t.setStake(i.stake), t.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_actionType, q.Enum.ActionType.Enum_Action_Bet), this.actionButtonStatus == q.Enum.ActionButtonStatus.Control_Default_Call && (this.followFill_buttonIsCheck = !1, this.markNode(this.followFill_Blue.node, "callGrayImg")), this.actionButtonStatus == q.Enum.ActionButtonStatus.Control_Default_fallOrCheck && (this.followFill_buttonIsCheck = !1, this.followFill_button.interactable = !1, this.dichi_button0.interactable = !1, this.dichi_button1.interactable = !1, this.dichi_button2.interactable = !1, this.setFreeSliderNodeAcive(!1), this.markNode(this.followFill_Blue.node, "checkGrayImg"));
                            break;
                        case q.Enum.ActionType.Enum_Action_Raise:
                            t.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_actionType, q.Enum.ActionType.Enum_Action_Raise), this.UpdateDeadPot(e.amount - i.round_bet), i.stake = i.stake - (e.amount - i.round_bet), i.round_bet = e.amount, t.setStake(i.stake), t.Bet(e.amount), this.actionButtonStatus == q.Enum.ActionButtonStatus.Control_Default_Call && (this.giveUp_buttonIsCheck ? this.markNode(this.giveUpRed.node, "giveUpImg") : this.markNode(this.giveUpRed.node, this.isZoom() ? "quickFoldGrayImg" : "giveUpGrayImg"), this.followFill_buttonIsCheck = !1, this.markNode(this.followFill_Blue.node, "callGrayImg")), this.actionButtonStatus == q.Enum.ActionButtonStatus.Control_Default_fallOrCheck && (this.giveUp_buttonIsCheck ? this.markNode(this.giveUpRed.node, "giveUpLookImg") : this.markNode(this.giveUpRed.node, this.isZoom() ? "quickFoldGrayImg" : "giveUpLookGrayImg"), this.followFill_buttonIsCheck = !1, this.markNode(this.followFill_Blue.node, "checkGrayImg"));
                            break;
                        case q.Enum.ActionType.Enum_Action_Allin:
                            this.hitback_left.active = !1, this.hitback_upper_left.active = !1, this.hitback_upper_right.active = !1, this.setForbidChat(!0), this.UpdateDeadPot(e.amount - i.round_bet), t.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_actionType, q.Enum.ActionType.Enum_Action_Allin), i.round_bet = e.amount, i.stake = 0, t.Bet(e.amount), t.setStake(0), i.seatid == this.gameDataInstance.tRoomData.i32SelfSeat && (this.gameDataInstance.tRoomData.m_isAllInMode = !0, this.game.updateMenu()), this.actionButtonStatus == q.Enum.ActionButtonStatus.Control_Default_Call && e.amount > this.gameDataInstance.tGameData.m_u32NeedCall && (this.followFill_buttonIsCheck = !1, this.markNode(this.followFill_Blue.node, "callGrayImg")), this.actionButtonStatus == q.Enum.ActionButtonStatus.Control_Default_fallOrCheck && (this.followFill_buttonIsCheck = !1, this.markNode(this.followFill_Blue.node, "checkGrayImg"))
                    }
                    i.playerid == this.getUserIDData() && (this.giveUp_buttonIsCheck = e.default_fold, this.giveUp_buttonIsCheck ? this.markNode(this.giveUpRed.node, "giveUpLookImg") : this.markNode(this.giveUpRed.node, this.isZoom() ? "quickFoldGrayImg" : "giveUpLookGrayImg"))
                } else console.log("can't find Seat:" + i.seatid)
            }
        }
        OnBackSeat(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let e = this.gameDataInstance.tRoomData.GetTablePlayer(t.playerid);
            this.BackTable(e), this.setEnableWaitingPlayerText(this.isWaitingPlayers(t.gameData))
        }
        BackTable(t) {
            if (t) {
                let e = this.getSeatBySeverId(t.seatid);
                e ? (e.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_waiting), this.getUserIDData() == t.playerid && (this.backGamePanel.active = !1, this.updateTableSpriteEffect())) : console.log("can't find Seat:" + t.seatid)
            }
        }
        OnGameElectDealer(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            this.collectGameEventTrace("OnGameElectDealer"), this.gameDataInstance.tGameData.m_u32DelayTime += 0, P(this.node).delay(this.gameDataInstance.tGameData.m_u32DelayTime).call((() => {
                this.RealElectDealerNoti(this.node, t.msg)
            })).tag(this.GAME_DELAY_ELECT_DEALER_TAG).start();
            let e = this.currentGameId;
            (e == q.Enum.GameId.StarSeat || q.Enum.GameId.Plo || e == q.Enum.GameId.Bet || e == q.Enum.GameId.Texas && this.gameDataInstance.tRoomData.pkRoomParam.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Short && this.gameDataInstance.tRoomData.pkRoomParam.auto_withdraw) && this.autoBuyinEff()
        }
        showAutoBuyinMessage(t, e = null) {
            if (!Pt.Instance.getGameConfig().showBuyInMessage) return;
            if (t && this.gameDataInstance.tRoomData.buyinAmount <= 0) return;
            const a = e || (t ? q.StringTools.serverGoldToShowString(q.Number(this.gameDataInstance.tRoomData.buyinAmount)) : 0);
            this.autoBuyinMessage_node.active = !0, this.autoBuyinMessage_richTxt.string = q.StringTools.formatC(t ? q.config.getStringData("Aof_game_buyin_tips_text") : q.config.getStringData("Aof_game_buyout_tips_text"), bt[this.gameDataInstance.tRoomData.currency.type].symbol + a);
            const i = this.autoBuyinMessage_node.getComponent(Et);
            P(this.autoBuyinMessage_node).set({
                scale: I(.74, .74, .74),
                position: p.ZERO.add(I(0, -46))
            }).call((() => {
                this.autoBuyinMessage_node.getComponent(B).opacity = 0
            })).parallel(P().to(.467, {
                scale: 1
            }), P().to(.3, {
                y: 0
            }), P(this.autoBuyinMessage_node.getComponent(B)).to(.133, {
                opacity: 255
            }), P().call((() => {
                i.runEffectOpacity(0, 255, .133)
            }))).delay(1).parallel(P().to(.433, {
                scale: .74
            }), P(this.autoBuyinMessage_node.getComponent(B)).to(.3, {
                opacity: 0
            }), P().call((() => {
                i.runEffectOpacity(255, 0, .3)
            }))).call((() => {
                this.autoBuyinMessage_node.active = !1
            })).start()
        }
        autoBuyinEff() {
            1 == this.isBuyinEff ? (this.showAutoBuyinMessage(!0), this.isBuyinEff = !1) : this.isBuyinEff = !1
        }
        onAutoBuyinEff(t) {
            if (xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node)) return;
            this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat);
            this.showAutoBuyinMessage(!0)
        }
        RealElectDealerNoti(t, e) {
            null != e && (this.gameDataInstance.tGameData.i32RoomId = e.roomid, this.gameDataInstance.tGameData.i32DealerSId = e.dealer_seatid, this.gameDataInstance.tGameData.i32SBSid = e.sb_seateid, this.gameDataInstance.tGameData.i32BBSid = e.bb_seatid, this._electDealerSeatId = e.dealer_seatid), this.gameJackPotEventController.resetJackpot(), this.DrunAction(-1 !== this._electDealerSeatId ? this._electDealerSeatId : this.gameDataInstance.tGameData.i32DealerSId)
        }
        OnAddRoomTimeCount(t) {}
        onSendPauseGame() {
            var t;
            q.gameNet.RequestPauseGame(null == (t = this.gameDataInstance) || null == (t = t.tRoomData) ? void 0 : t.u32RoomId, !1)
        }
        showPauseGameDlg() {
            var t;
            q.TP.showMsg(q.config.getStringData("GameScene_pausePoker_panel_hasPause_txt"), q.Enum.ButtonStyle.GOLD_BUTTON, this.onSendPauseGame.bind(this), null, !1, !1, q.config.getStringData("GameScene_pausePoker_panel_pausePoker_txt"), !1, o.HorizontalAlign.CENTER, !1, null == (t = this.gameSceneInstance) || null == (t = t.room) ? void 0 : t.gameScene), q.TP.setButtonText(q.Enum.ButtonType.TWO_BUTTON_PAUSE_GAME_TIPS), q.TP.setTag("GameScene_pausePoker_panel_hasPause_txt"), this.getUserIDData() == this.gameDataInstance.tRoomData.u32OwnerId || q.TP.hideDialogButton(q.Enum.ButtonStyle.GOLD_BUTTON)
        }
        hidePauseGameDlg() {
            let t = q.TP.getTag();
            null != t && "GameScene_pausePoker_panel_hasPause_txt" == t && q.TP.hideTipsPanel()
        }
        OnPauseGameSucc(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || (this.gameDataInstance.tRoomData.pkRoomState.isPause = t.msg.isPause, this.gameDataInstance.tRoomData.pkRoomState.paused = t.msg.paused, this.gameDataInstance.tRoomData.pkRoomState.paused ? this.showPauseGameDlg() : this.hidePauseGameDlg())
        }
        OnBlind(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            this.collectGameEventTrace("OnBlind");
            let e = 0;
            this.isZoom() || (this.gameDataInstance.tRoomData.pkRoomParam.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Normal ? 0 == this.gameDataInstance.tGameData.m_bIsAnte ? this.gameDataInstance.tGameData.m_u32DelayTime += 0 : this.gameDataInstance.tGameData.m_u32DelayTime = 0 : this.gameDataInstance.tRoomData.pkRoomParam.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Short && (this.gameDataInstance.tRoomData.pkRoomParam.short_game_double_ante ? this.gameDataInstance.tGameData.m_u32DelayTime = 0 : this.gameDataInstance.tGameData.m_u32DelayTime += 0), e = this.gameDataInstance.tGameData.m_u32DelayTime), e > 0 ? P(this.node).delay(e).call((() => {
                this.RealBlind(this.node, t.msg)
            })).tag(this.GAME_DELAY_BLIND_TAG).start() : this.RealBlind(this.node, t.msg)
        }
        RealBlind(t, e) {
            this.gameDataInstance.tGameData.i32DealerSId = e.dealer_seatid, this.gameDataInstance.tGameData.i32SBSid = e.sb_seatid, this.gameDataInstance.tGameData.i32BBSid = e.bb_seatid, this.gameDataInstance.tRoomData.m_kStraddleList = [], this.gameDataInstance.tRoomData.pkTableStates.curr_dealer_seatid = e.dealer_seatid, this.gameDataInstance.tRoomData.pkTableStates.curr_sb_seatid = e.sb_seatid, this.gameDataInstance.tRoomData.pkTableStates.curr_bb_seatid = e.bb_seatid;
            let a = this.gameDataInstance.tGameData.i32SBSid,
                i = this.gameDataInstance.tGameData.i32BBSid;
            this.gameDataInstance.tRoomData.u32SmallBlind = e.sb_amount, this.gameDataInstance.tRoomData.u32BigBlind = e.bb_amount;
            let n = this.gameDataInstance.tRoomData.GetTablePlayerBySeatId(a),
                o = this.gameDataInstance.tRoomData.GetTablePlayerBySeatId(i),
                s = this.getSeatBySeverId(a),
                l = this.getSeatBySeverId(i);
            this.gameDataInstance.tRoomData.pkTableStates.sb_amount = e.sb_amount, this.gameDataInstance.tRoomData.pkTableStates.bb_amount = e.bb_amount, this.UpdateDeadPot(e.sb_amount), this.UpdateDeadPot(e.bb_amount), n ? (n.stake = n.stake - e.sb_amount, n.round_bet = e.sb_amount, n.in_game = !0, s && (s.setStake(n.stake), console.log("SB=============:" + e.sb_amount), s.Bet(e.sb_amount, q.Enum.BType.BType_SB))) : console.log("Can't find player sb seaid::" + a), o ? (o.stake = o.stake - e.bb_amount, o.round_bet = e.bb_amount, o.in_game = !0, l && (l.setStake(o.stake), console.log("BB=============:" + e.bb_amount), l.Bet(e.bb_amount, q.Enum.BType.BType_BB))) : console.log("Can't find player sb seaid::" + a);
            for (let t = 0; t < e.straddle_seat_list.length; t++) {
                let a = e.straddle_seat_list[t];
                if (-1 == a) break;
                let i = e.straddle_amount_list[t],
                    n = this.gameDataInstance.tRoomData.GetTablePlayerBySeatId(a),
                    o = this.getSeatBySeverId(a);
                this.UpdateDeadPot(i), this.gameDataInstance.tRoomData.m_kStraddleList.push(a), this.gameDataInstance.tRoomData.pkTableStates.curr_straddle_seatid = a, n && (n.stake = n.stake - i, n.round_bet = i, n.in_game = !0, o && o.setStake(n.stake)), o && (o.showTips(q.config.getStringData("ActionTips5"), q.Enum.TipsType.Tips_straddle), o.Bet(i))
            }
            for (let t = 0; t < e.post_seat_list.length; ++t) {
                let a = e.post_seat_list[t],
                    i = e.bb_amount,
                    n = this.gameDataInstance.tRoomData.GetTablePlayerBySeatId(a),
                    o = this.getSeatBySeverId(a);
                if (this.UpdateDeadPot(i), n) {
                    let t = 0;
                    t = this.gameDataInstance.tRoomData.pkRoomParam.rule_switch_force_straddle && this.gameDataInstance.tRoomData.getIngamePlayer() > 3 ? 2 * i : i, n.stake = n.stake - t, n.round_bet = t, n.in_game = !0, o && (o.setStake(n.stake), o.Bet(t)), this.gameDataInstance.tRoomData.pkRoomParam.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Normal ? (this.gameDataInstance.tRoomData.pkRoomParam.rule_switch_force_straddle && this.gameDataInstance.tRoomData.getIngamePlayer(), o.showTips(q.config.getStringData("ActionTips8"), q.Enum.TipsType.Tips_mendAnte)) : o.showTips(q.config.getStringData("ActionTips8"), q.Enum.TipsType.Tips_mendAnte)
                }
            }
        }
        OnSendPlayerHoleCard(t) {
            if (!xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) {
                this.collectGameEventTrace("OnSendPlayerHoleCard"), this.setEnableWaitingPlayerText(!1), this.gameDataInstance.tGameData.m_u32DelayTime += 1.3;
                for (let e = 0; e < this.m_pkSelfCard.length; ++e) this.m_pkSelfCard[e].resetPos(), this.m_pkSelfCard[e].setFace(!1), this.m_pkSelfCard[e].setGary(!1), this.m_pkSelfCard[e].setContent(t.msg.holdcards[e].number, t.msg.holdcards[e].suit);
                this.TurnSelfCard(), this.DealDown()
            }
        }
        OnSendHoleCard(t) {
            if (!xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) {
                q.roomManager && q.roomManager.increaseTotalPlayedHand(), this.collectGameEventTrace("OnSendHoleCard"), this._bCriticsimRound && (this.gameDataInstance.tGameData.m_u32DelayTime = 0), console.log("this.gameDataInstance.tGameData.m_u32DelayTime=============:::" + this.gameDataInstance.tGameData.m_u32DelayTime);
                for (let t = 0; t < this.m_pkSelfCard.length; ++t) this.m_pkSelfCard[t].resetPos();
                this.gameDataInstance.tGameData.m_u32DelayTime > 0 ? P(this.node).delay(this.gameDataInstance.tGameData.m_u32DelayTime).call((() => {
                    this.RealSendHoleCard(this.node, t.msg)
                })).tag(this.GAME_DELAY_HOLECARD_TAG).start() : this.RealSendHoleCard(this.node, t.msg)
            }
        }
        checkHoleCardIILegal(t, e = 1) {
            let a = !1;
            if (t.length < this.m_pkSelfCard.length) a = !0;
            else {
                let i = !1,
                    n = t.length;
                for (let o = 0; o < n; ++o) {
                    let s = 0,
                        l = 0;
                    if (1 == e) {
                        let e = t[o];
                        s = e.number, l = e.suit
                    } else {
                        let e = t[o];
                        s = e.getCardNum(), l = e.getCardSuit()
                    }
                    for (let r = 0; r < n; ++r) {
                        if (o === r) continue;
                        let n = 0,
                            h = 0;
                        if (1 == e) {
                            let e = t[r];
                            n = e.number, h = e.suit
                        } else {
                            let e = t[r];
                            n = e.getCardNum(), h = e.getCardSuit()
                        }
                        if (s === n && l === h) {
                            console.error(`GameMain - TurnSelfCard: exist 2 identical hands idx = ${o}, ${r}, num = ${s}, suit = ${l}`), i = !0, a = !0;
                            break
                        }
                    }
                    if (i) break
                }
            }
            return a
        }
        RealSendHoleCard(t, e) {
            const a = q.appConfig.isLandscapeLayout ? this.CARD_SCALE_ON_DEAL_LANDSCAPE : this.CARD_SCALE_ON_DEAL_MOBILE,
                i = this.CARD_SCALE_PRE_OPEN;
            let n = .03,
                o = 0;
            if (this.isTurnSeat) {
                const t = this.seatList.length;
                this.isRight ? this.trunIngSeatViewId < t ? o += (t - this.trunIngSeatViewId) * this._turnSeatTime : o += this._turnSeatTime : this.trunIngSeatViewId > 0 ? o += this.trunIngSeatViewId * this._turnSeatTime : o += this._turnSeatTime
            }
            let s = this.gameDataInstance.tRoomData.GetTablePlayer(this.getUserIDData()),
                l = new p(0, 0, 0);
            const r = this.dealCenterNode || this.mainpool;
            r.getComponent(b).convertToWorldSpaceAR(p.ZERO, l);
            const h = cc_mtt.vv.DataManager.getNow().getTime(),
                d = e.seat_list.sort(((t, e) => this.getSeatBySeverId(t).getSeatViewId() - this.getSeatBySeverId(e).getSeatViewId()));
            for (let t = 0; t < d.length; ++t) {
                let l = d[t],
                    m = this.getSeatBySeverId(l);
                if (m) {
                    this.gameDataInstance.tRoomData.i32SelfSeat;
                    if (l == this.gameDataInstance.tRoomData.i32SelfSeat) {
                        var u;
                        let l = e.holdcards.length;
                        if (s) {
                            q.StringTools.clearArray(s.cards);
                            for (let t = 0; t < l; ++t) {
                                let a = new lt;
                                a.number = e.holdcards[t].number, a.suit = e.holdcards[t].suit, s.cards.push(a)
                            }
                        }
                        let d = t * n + o,
                            c = n * e.seat_list.length;
                        const g = d + (l - 1) * c;
                        for (let t = 0; t < l; ++t) {
                            const n = d + t * c;
                            let o = this.m_pkSelfCard[t];
                            o.setFace(!1), o.setGary(!1), o.setContent(e.holdcards[t].number, e.holdcards[t].suit, !1), o.setDealNode(r), o.setOpenCardDelay(h + 1e3 * (g + .5)), o.setCardPositionAfterDeal(!0);
                            const s = m.getSrcCardScale(t);
                            o.setCardScaleOnDeal(a * s, i * s);
                            const l = m.getSrcShowCardScale(t);
                            o.setCardScaleOnOpen(l);
                            const u = o.node.parent;
                            o.setDealCardCallback((() => {
                                if (!q.appConfig.isLandscapeLayout) {
                                    Nt.instance.changeParentKeepPos(o.node, u);
                                    const e = 20 + t;
                                    o.node.setSiblingIndex(e), o.node.setSiblingIndex(e)
                                }
                                this.scheduleOnce((() => {
                                    this.isSelfCardPlacedAtWrongPosition(m), this.initSelfCardPosition(this.getCardLen())
                                }), g)
                            })), q.appConfig.isLandscapeLayout || Nt.instance.changeParentKeepPos(o.node, m.node.children[0]), o.deal(n)
                        }
                        let p = d + n * e.seat_list.length * l;
                        if (l > 0 && 256 !== q.Number(e.holdcards[l - 1].number)) {
                            let t = .2;
                            P(this.node).delay(p).call((() => {
                                this.TurnSelfCard()
                            })).delay(t).call((() => {
                                this.showSelfCardType()
                            })).tag(this.GAME_TURN_MAIN_USER_CARD_TAG).start()
                        }
                        q.appConfig.isLandscapeLayout && null != (u = this.game) && u.gameSeatIsTurning || (Nt.instance.changeParentKeepPos(m.m_pkChipsMove.node, r), Nt.instance.changeParentKeepPos(m.m_pkChipsDrop.node, r), this.scheduleOnce((() => {
                            Nt.instance.changeParentKeepPos(m.m_pkChipsMove.node, m.node), Nt.instance.changeParentKeepPos(m.m_pkChipsDrop.node, m.node)
                        }), g + 1))
                    } else {
                        m.hideShowCard(), m.setWinRateStatus(!1), m.setCardFlip();
                        let s = t * n + o,
                            l = this.isGamePLO() ? m.getPkCardsLength() : 2,
                            h = n * e.seat_list.length;
                        m.setActiveCardMask(!1);
                        const d = m.SeatViewId > 0 && m.SeatViewId < this.roomPlayerNumber / 2;
                        let u = 0;
                        const c = () => {
                            ++u >= l && m.setActiveCardMask(!0)
                        };
                        for (let t = 0; t < l; ++t) {
                            const e = d ? l - 1 - t : t,
                                n = s + t * h;
                            let o = m.getCard(e);
                            o.setDealNode(r), o.setOpenCardDelay(0), o.setCardPositionAfterDeal(!1);
                            const u = m.getSrcCardScale(e);
                            if (o.setCardScaleOnDeal(a * u, i * u), o.setCardScaleOnOpen(u), o.setDealCardCallback((() => {
                                    c()
                                })), !q.appConfig.isLandscapeLayout) {
                                Nt.instance.changeParentKeepPos(o.node, m.seatBg);
                                const t = 20 - e;
                                o.node.setSiblingIndex(t), o.node.setSiblingIndex(t)
                            }
                            o.deal(n)
                        }
                    }
                } else console.log("can't find Seat", l)
            }
        }
        TurnSelfCard() {
            let t = this.checkHoleCardIILegal(this.m_pkSelfCard, 2);
            if (this.isZoom() && !t) {
                for (let t = 0; t < this.m_pkSelfCard.length; ++t) this.m_pkSelfCard[t].setFace(!0);
                return
            }
            let e = this.gameDataInstance.tRoomData.pkRoomParam.rule_ante_amount >= 500 && this.gameDataInstance.tRoomData.pkRoomParam.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Short;
            if (this.currentGameId === q.Enum.GameId.Bet || e && !this._bCriticsimRound || this.isGamePLO()) {
                if (t) return;
                this.m_bIsSelfShowDown = !0, this.gameDataInstance.tGameData.m_u32DelayTime = 0
            }
            for (let t = 0; t < this.m_pkSelfCard.length; ++t) this.m_pkSelfCard[t].setFace(!1);
            if (!t)
                for (let t = 0; t < this.m_pkSelfCard.length; ++t) this.m_pkSelfCard[t].turn(0);
            P(this.node).delay(.15 * 3).call((() => {
                this.showGuessSettle(this.node)
            })).tag(this.GAME_SHOW_GUESS_SETTLE_TAG).start()
        }
        OnActionTurn(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || (Lt.StartSpan(Ot.CashGameActions), Lt.AddEventToSpan(Ot.CashGameActions, "OnActionTurn", {
                gameId: t.gameId,
                roomId: t.roomId,
                message: t.msg
            }), t.consumeStatus++, this.collectGameEventTrace("OnActionTurn"), t.msg.curr_action_uid != this.getUserIDData() && (this._lastButtonStatus = -2), 0 == this.gameDataInstance.tGameData.m_u32DelayTime ? (t.consumeStatus++, this.RealActionTurn(this.node, t.msg, t.gameId, t.roomId)) : (P(this.node).delay(this.gameDataInstance.tGameData.m_u32DelayTime).call((() => {
                this.RealActionTurn(this.node, t.msg, t.gameId, t.roomId)
            })).tag(this.GAME_DELAY_ACTION_TURN_TAG).start(), t.consumeStatus += 2))
        }
        ShowMainPool(t, e) {
            A.stopAllByTarget(this.mainpool), this.mainpool_text.node.name = t.toString(), this.setMainPoolText(q.StringTools.serverGoldToShowString(e)), this.mainpoolUITransform.setContentSize(new M(this.getMainpoolWidth(), this.mainpoolUITransform.contentSize.height)), this.mainpool.active = !0, this.mainpool.getComponent(B).opacity = 255, this.setActiveMainPoolBg(!0), this.mainpool.active = !0, this.setEnableWaitingPlayerText(!1)
        }
        HideMainPool(t = !0) {
            A.stopAllByTarget(this.mainpool), this.mainpool.getComponent(B).opacity = 0, this.setMainPoolText(""), this.mainpoolUITransform.setContentSize(new M(this.getMainpoolWidth(), this.mainpoolUITransform.contentSize.height)), t && this.HideSidePot(), this.setEnableWaitingPlayerText(this.isWaitingPlayers(this.gameDataInstance))
        }
        UpdatePotsByAction(t) {
            let e = t.pots.length,
                a = 0;
            for (let i = 0; i < e; ++i) a += t.pots[i].amount;
            e >= 1 ? (this.showSidepool(t.pots), this.onPotChange(t.pots[0].amount)) : (this.setMainPoolText(""), this.onPotChange(0)), this.UpdateDeadPot(a)
        }
        UpdateRoundBetByAction(t) {
            for (let e = 0; e < t.players.length; e++) {
                let a = t.players[e],
                    i = this.getSeatBySeverId(a.seatid),
                    n = this.gameDataInstance.tRoomData.GetTablePlayerBySeatId(a.seatid);
                i && i.showChipsNow(a.round_bet), n && (n.round_bet = a.round_bet), this.UpdateDeadPot(a.round_bet)
            }
        }
        generateChipLevels() {
            let t = this.gameDataInstance.tGameData.m_u32StakeNow,
                e = this.gameDataInstance.tGameData.m_u32MiniRaise;
            this.ChipsLevel = q.tools.SplitChipsLevel(t, e, q.Enum.SliderType.Game_FreeFill, this.gameDataInstance.tRoomData.pkRoomParam.is_mirco)
        }
        GreaterBet(t, e) {
            let a = t;
            for (let t = 0; t < e.players.length; t++) {
                let i = e.players[t];
                i.round_bet > a && (a = i.round_bet)
            }
            return this.greatest_bet = a, a > t
        }
        setFollowFillText(t, e = !1) {
            this._followFillValue = t;
            const a = this.gameDataInstance.tRoomData.getDataPointValue(t);
            this.followFill_text.string = a;
            let i = t <= 0;
            this.preBetCheckText.node.active = i;
            let n = i ? q.config.getStringData("ActionTips6") : q.config.getStringData("ActionTips0");
            this.preBetCheckText.string = n, this.preBetCheckAmountText.string = n + " " + a, this.preBetCheckAmountText.node.active = !i;
            for (let t = 0; t < this.dichi_buttonList.length; t++) {
                let a = f(q.StringTools.formatC("dichi_wordText%d", t), this.dichi_buttonList[t].node);
                a && (a.getComponent(o).string = i && !e ? q.config.getStringData("ActionTips3") : q.config.getStringData("ActionTips2"))
            }
        }
        recoveredActionTurn() {
            let t = "",
                e = !1;
            var a;
            (this._lastButtonStatus >= 0 ? this._lastButtonStatus == q.Enum.ActionButtonStatus.Control_Null ? (t = "Can not recover", e = !0) : (this.gameDataInstance.tGameData.m_bIsOnSelfAction = !0, this.setControlButtonStatus(this._lastButtonStatus), t = "ButtonsRecover") : -2 == this._lastButtonStatus && (t = "NotUserTurn"), this._lastButtonStatus = -1, t.length) && (null == (a = Lt.getInstance()) || a.traceEvent(Ot.CashGameIssues, "MultipleCashGame", {
                name: "recoveredActionTurn",
                issue: t,
                rooms: q.roomManager.rooms.map((t => `GameId: ${t.getCurrentGameID()} - RoomId: ${t.getCurrentRoomID()} - IsJoined: ${t.joinedGame}`)).join(),
                roomLength: q.roomManager.rooms.length,
                curActionButtonStatus: this.actionButtonStatus,
                preActionButtonStatus: this.preActionButtonStatus,
                callStackOfSetCtrBtn: this.callStackOfSetControlBtn,
                callStackOfPreSetCtrBtn: this.callStackOfPreSetControlBtn
            }, null, !1, e))
        }
        OnActionError(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || 49 == t.msg && this.recoveredActionTurn()
        }
        RealActionTurn(t, e, a, i) {
            let n = `${Ot.NoticePlayerActionTurn}_${a}_${i}`;
            Lt.AddEventToSpan(n, "RealActionTurn"), this.gameDataInstance.tGameData.u32DeadPot = 0, this.UpdatePotsByAction(e), this.UpdateRoundBetByAction(e);
            for (let t = 0; t < this.seatList.length; ++t) {
                let e = this.getSeatBySeverId(t);
                if (e) {
                    if (e.getStatus() != q.Enum.SeatStatus.SeatStatus_leave_a_monment) {
                        if (e.isSelfSeat() && this.gameDataInstance.tGameData.m_bIsOnSelfAction) continue;
                        e.stopCDtime()
                    }
                } else console.error(`GameMain - RealActionTurn: can't find Seat ${t}`)
            }
            let o = e.curr_action_seat_id,
                s = this.getSeatBySeverId(o),
                l = this.gameDataInstance.tRoomData.GetTablePlayer(e.curr_action_uid);
            if (l) {
                this.gameDataInstance.tRoomData.curActionPlayerId = l.playerid;
                let t = 0,
                    a = 0,
                    i = this.GreaterBet(e.carr_action_seat_roundbet, e);
                e.call_amount;
                if (e.curr_action_uid == this.getUserIDData()) {
                    q.appConfig.getGeneralConfig().multiWindowEnabled && Ft.getInstance().startTurn(q.roomManager.getGameScene(this.gameSceneInstance.room.getCurrentGameID(), this.gameSceneInstance.room.getCurrentRoomID()));
                    let o = e.holdcards,
                        h = this.checkHoleCardIILegal(o, 1);
                    for (let t = 0; t < o.length; t++)
                        if (!h) {
                            let e = o[t];
                            this.m_pkSelfCard[t].setActive(!0), this.m_pkSelfCard[t].setContent(e.number, e.suit), this.m_pkSelfCard[t].setFace(!(256 === e.number)), this.m_pkSelfCard[t].finishOpenCard(!0), this.m_pkSelfCard[t].setOp(!1)
                        } if (s && this.isSelfCardPlacedAtWrongPosition(s) && this.initSelfCardPosition(this.getCardLen()), this.closeZoomTips(), this.gameDataInstance.tGameData.m_bIsOnSelfAction) return void Lt.EndSpan(n, "AlreadyAction");
                    if (this.gameDataInstance.tGameData.m_bIsOnSelfAction = !0, this.gameDataInstance.tGameData.m_u32ActionSeq = e.ActionSeq, e.default_fold) return void Lt.EndSpan(n, "DefaultFold");
                    if (this.gameDataInstance.tRoomData.pkRoomParam.is_allin_allfold) return this.giveUp_buttonIsCheck ? void this.RequestActionAndHideBetButtons(q.Enum.ActionType.Enum_Action_Fold, 0, !0) : this.followFill_buttonIsCheck ? void this.RequestActionAndHideBetButtons(q.Enum.ActionType.Enum_Action_Allin, q.StringTools.clientGoldByServer(l.stake + l.round_bet)) : (this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_AllIn), void this.showSelfThinkCd(e.action_time, 2));
                    switch (this.gameDataInstance.tRoomData.u32Stake = l.stake, t = e.minimum_bet_i64 >= l.stake + l.round_bet ? l.stake + l.round_bet : e.minimum_bet_i64, a = l.stake + l.round_bet, this._sliderMaxBetNum = a, this.isGamePLO() && e.max_round_bet > 0 && (a = Math.min(a, e.max_round_bet)), this.gameDataInstance.tGameData.m_u32StakeNow = a, this.gameDataInstance.tGameData.m_u32MiniRaise = t, this.gameDataInstance.tGameData.m_u32RoundBet = l.round_bet, this.gameDataInstance.tGameData.m_u32NeedCall = this.greatest_bet - l.round_bet, this.gameDataInstance.tGameData.m_u32GreatestBet = this.greatest_bet, this.gameDataInstance.tGameData.m_u32FullPot = this.gameDataInstance.tGameData.u32DeadPot + this.gameDataInstance.tGameData.m_u32NeedCall + this.greatest_bet, this.ChipsLevel = [], this.generateChipLevels(), this.ChipsLevel.length > 0 && (this.freeSliderStep = q.numFix.divide(1, this.ChipsLevel.length)), this.actionButtonStatus) {
                        case q.Enum.ActionButtonStatus.Control_Default_fallOrCheck:
                            if (this.giveUp_buttonIsCheck) return void(0 == this.gameDataInstance.tGameData.m_u32NeedCall ? this.RequestActionAndHideBetButtons(q.Enum.ActionType.Enum_Action_Check, 0) : this.RequestActionAndHideBetButtons(q.Enum.ActionType.Enum_Action_Fold, 0, !0));
                            if (this.followFill_buttonIsCheck && !i) return void this.RequestActionAndHideBetButtons(q.Enum.ActionType.Enum_Action_Check, 0);
                            break;
                        case q.Enum.ActionButtonStatus.Control_Default_Call:
                            if (this.giveUp_buttonIsCheck) return void this.RequestActionAndHideBetButtons(q.Enum.ActionType.Enum_Action_Fold, 0, !0);
                            if (this.followFill_buttonIsCheck) return void(this.gameDataInstance.tGameData.m_u32NeedCall < l.stake ? this.RequestActionAndHideBetButtons(q.Enum.ActionType.Enum_Action_Call, q.StringTools.clientGoldByServer(this.gameDataInstance.tGameData.m_u32NeedCall)) : this.RequestActionAndHideBetButtons(q.Enum.ActionType.Enum_Action_Allin, q.StringTools.clientGoldByServer(l.stake + l.round_bet)));
                            break;
                        case q.Enum.ActionButtonStatus.Control_AllInOrFold:
                            if (this.giveUp_buttonIsCheck) return void this.RequestActionAndHideBetButtons(q.Enum.ActionType.Enum_Action_Fold, 0, !0);
                            if (this.followFill_buttonIsCheck) return void this.RequestActionAndHideBetButtons(q.Enum.ActionType.Enum_Action_Allin, q.StringTools.clientGoldByServer(l.stake + l.round_bet))
                    }
                    if (this.playEffectOnCurrentRoom(se.PlayerTurn), 0 == l.stake) this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Null);
                    else {
                        if (i) {
                            this.gameDataInstance.tRoomData.pkRoomParam.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Normal ? this.greatest_bet < this.gameDataInstance.tRoomData.pkTableStates.bb_amount && (this.greatest_bet = this.gameDataInstance.tRoomData.pkTableStates.bb_amount) : this.gameDataInstance.tRoomData.pkRoomParam.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Short && this.greatest_bet < this.gameDataInstance.tRoomData.pkRoomParam.rule_ante_amount && (this.greatest_bet = this.gameDataInstance.tRoomData.pkRoomParam.rule_ante_amount);
                            let t = this.greatest_bet - l.round_bet;
                            t >= e.minimum_bet_i64 - (t + l.round_bet) ? (this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Raise), this.setFollowFillText(q.StringTools.serverGoldToShowNumber(this.greatest_bet - l.round_bet)), this.showSelfThinkCd(e.action_time, 1), this.updateRaiseButton(e)) : q.appConfig.getGameConfig().applyNewUnderRaiseRule ? (this.m_pkPublicCard[0].node.active ? 0 == l.round_bet ? this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Raise) : this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Just_Call) : this.gameDataInstance.tRoomData.pkTableStates.curr_sb_seatid == l.seatid ? l.round_bet == this.gameDataInstance.tRoomData.pkTableStates.sb_amount ? this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Raise) : this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Just_Call) : this.gameDataInstance.tRoomData.pkTableStates.curr_bb_seatid == l.seatid ? l.round_bet == this.gameDataInstance.tRoomData.pkTableStates.bb_amount ? this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Raise) : this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Just_Call) : this.gameDataInstance.tRoomData.isStraddle(l.seatid) ? l.round_bet == 2 * this.gameDataInstance.tRoomData.pkTableStates.bb_amount ? this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Raise) : this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Just_Call) : 0 == l.round_bet ? this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Raise) : this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Just_Call), this.setFollowFillText(q.StringTools.serverGoldToShowNumber(this.greatest_bet - l.round_bet)), this.showSelfThinkCd(e.action_time, 1)) : this.gameDataInstance.tRoomData.pkRoomParam.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Normal ? this.gameDataInstance.tRoomData.pkTableStates.curr_sb_seatid == l.seatid ? l.round_bet == this.gameDataInstance.tRoomData.pkTableStates.sb_amount ? (this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Raise), this.setFollowFillText(q.StringTools.serverGoldToShowNumber(this.greatest_bet - l.round_bet)), this.showSelfThinkCd(e.action_time, 1)) : (this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Just_Call), this.setFollowFillText(q.StringTools.serverGoldToShowNumber(this.greatest_bet - l.round_bet)), this.showSelfThinkCd(e.action_time, 1)) : this.gameDataInstance.tRoomData.pkTableStates.curr_bb_seatid == l.seatid ? l.round_bet == this.gameDataInstance.tRoomData.pkTableStates.bb_amount ? (this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Raise), this.setFollowFillText(q.StringTools.serverGoldToShowNumber(this.greatest_bet - l.round_bet)), this.showSelfThinkCd(e.action_time, 1)) : (this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Just_Call), this.setFollowFillText(q.StringTools.serverGoldToShowNumber(this.greatest_bet - l.round_bet)), this.showSelfThinkCd(e.action_time, 1)) : this.gameDataInstance.tRoomData.isStraddle(l.seatid) && l.round_bet == 2 * this.gameDataInstance.tRoomData.pkTableStates.bb_amount ? (this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Raise), this.setFollowFillText(q.StringTools.serverGoldToShowNumber(this.greatest_bet - l.round_bet)), this.showSelfThinkCd(e.action_time, 1)) : (this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Just_Call), this.setFollowFillText(q.StringTools.serverGoldToShowNumber(this.greatest_bet - l.round_bet)), this.showSelfThinkCd(e.action_time, 1)) : this.gameDataInstance.tRoomData.pkRoomParam.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Short && this.gameDataInstance.tRoomData.pkRoomParam.short_game_double_ante && this.gameDataInstance.tRoomData.pkTableStates.curr_dealer_seatid == l.seatid && l.round_bet == this.gameDataInstance.tRoomData.pkRoomParam.rule_ante_amount ? (this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Raise), this.setFollowFillText(q.StringTools.serverGoldToShowNumber(this.greatest_bet - l.round_bet)), this.showSelfThinkCd(e.action_time, 1)) : (this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Just_Call), this.setFollowFillText(q.StringTools.serverGoldToShowNumber(this.greatest_bet - l.round_bet)), this.showSelfThinkCd(e.action_time, 1))
                        } else this.GreaterBet(0, e) ? (this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Bet), this.showSelfThinkCd(e.action_time, 2), this.setFollowFillText(0, !0)) : (this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Bet), this.showSelfThinkCd(e.action_time, 2), this.setFollowFillText(0));
                        if (this.greatest_bet >= l.stake + l.round_bet) this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_AllIn), this.showSelfThinkCd(e.action_time, 1);
                        else if (t >= l.stake + l.round_bet && this.actionButtonStatus != q.Enum.ActionButtonStatus.Control_Just_Call) {
                            this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_add_AllIn), this.showSelfThinkCd(e.action_time, 1), this.setRaiseToAllin(l.stake + l.round_bet), this.haveAnyUnplayedPlayerBehind(e) ? q.appConfig.isLandscapeLayout || (this.showRaiseButton(!0), this.setBetBtnsVisible(!0), this.SetExtraBetBtnVisible(!0)) : (this.showRaiseButton(!1), q.appConfig.isLandscapeLayout || (this.setBetBtnsVisible(!1), this.SetExtraBetBtnVisible(!1)))
                        }
                        var r;
                        if (this.actionButtonStatus != q.Enum.ActionButtonStatus.Control_AllIn && this.actionButtonStatus != q.Enum.ActionButtonStatus.Control_Just_Call) this.setDiChiBtnText(0, this.gameDataInstance.tGameData.u32DeadPot, this.greatest_bet - l.round_bet, this.greatest_bet), this.setDiChiBtnText(1, this.gameDataInstance.tGameData.u32DeadPot, this.greatest_bet - l.round_bet, this.greatest_bet), this.setDiChiBtnText(2, this.gameDataInstance.tGameData.u32DeadPot, this.greatest_bet - l.round_bet, this.greatest_bet), null != (r = this.getChangeCard()) && r.isButton3 || (this.setDiChiBtnText(3, this.gameDataInstance.tGameData.u32DeadPot, this.greatest_bet - l.round_bet, this.greatest_bet), this.setDiChiBtnText(4, this.gameDataInstance.tGameData.u32DeadPot, this.greatest_bet - l.round_bet, this.greatest_bet))
                    }
                } else if (q.appConfig.getGeneralConfig().multiWindowEnabled && Ft.getInstance().endTurn(q.roomManager.getGameScene(this.gameSceneInstance.room.getCurrentGameID(), this.gameSceneInstance.room.getCurrentRoomID())), this.gameDataInstance.tGameData.m_bIsOnSelfAction = !1, s ? (s.setThankCdTime(e.action_time, 2), s.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_OnAction)) : console.log("can't find Seat:" + o), -1 != this.gameDataInstance.tRoomData.i32SelfSeat)
                    if (0 == l.stake) this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Null);
                    else {
                        let t = this.getUserIDData(),
                            a = this.gameDataInstance.tRoomData.GetTablePlayer(t);
                        if (a.last_action != q.Enum.ActionType.Enum_Action_Fold && a.last_action != q.Enum.ActionType.Enum_Action_Allin && a.in_game) {
                            let i = this.gameDataInstance.tRoomData.pkRoomParam.is_allin_allfold || this.greatest_bet >= a.stake + a.round_bet,
                                n = !i && this.greatest_bet - a.round_bet > 0,
                                o = !1;
                            if ((a.last_action == q.Enum.ActionType.Enum_Action_Null || n || i || 0 == a.round_bet && !n) && (o = !0), o && !n)
                                for (let a = 0; a < e.players.length; a++) {
                                    let i = e.players[a];
                                    if (i.playerid == t && i.last_action == q.Enum.ActionType.Enum_Action_Check) {
                                        o = !1;
                                        break
                                    }
                                }
                            o ? i ? this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_AllInOrFold) : n ? (this.setFollowFillText(q.StringTools.serverGoldToShowNumber(this.greatest_bet - a.round_bet)), this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Default_Call)) : (this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Default_fallOrCheck), this.setFollowFillText(0)) : this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Null)
                        } else this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Null)
                    }
            } else Lt.EndSpan(n, "Not Found Player", {
                id: e.curr_action_uid
            });
            this.followFill_button.interactable = !0, this.setBetButtonsInteractableAfterRealActionTurn(), this.setFreeSliderNodeAcive(!0), this.setAllInDichiButtonEnable(), this.recoverPublicCards(), Lt.StopSpan(n), te.config.enabled && q.MessageCenter.send("cashgame_on_game_action_turn_noti", {
                key: this,
                isSelfPlayer: this.isSelfPlayer(e.curr_action_uid)
            })
        }
        recoverPublicCards() {
            var t;
            let e = null == (t = this.gameDataInstance) || null == (t = t.tRoomData) || null == (t = t.pkTableStates) ? void 0 : t.public_card;
            if (e && e.length >= 0) {
                let t = !1,
                    n = "",
                    o = "";
                for (let a = 0; a < e.length; ++a) {
                    let i = this.m_pkPublicCard[a],
                        s = e[a];
                    !s || i && i.node.active || (this.QueckShowPublicCard(a, s.number, s.suit), t = !0, n += "_" + a + "_" + s.number + "_" + s.suit, o = JSON.stringify(null == i ? void 0 : i.getNodeActiveTrace()))
                }
                if (t) {
                    var a, i;
                    n += "__" + o, this.showSelfCardType();
                    let t = {
                        missingInfo: n,
                        cacheCards: JSON.stringify(e),
                        roomUid: null == (a = this.gameDataInstance) || null == (a = a.tRoomData) ? void 0 : a.u32RoomId
                    };
                    null == (i = Lt.getInstance()) || i.trace(Ot.MissingPublicCard, "CardMissing", t, !1, !0)
                }
            }
        }
        setPublicCards(t) {
            this.gameDataInstance.tRoomData.pkTableStates.public_card = t
        }
        updatePublicCards(t) {
            var e;
            let a = null == (e = this.gameDataInstance) || null == (e = e.tRoomData) ? void 0 : e.pkTableStates;
            var i;
            if (a) switch (t.betting_round) {
                case Dt.Enum_BettingRound_Flop:
                    a.public_card = t.cards;
                    break;
                case Dt.Enum_BettingRound_Turn:
                    let e = t.cards[0];
                    var n;
                    if (e) a.public_card[3] = e;
                    else null == (n = Lt.getInstance()) || n.trace(Ot.MissingPublicCard, "TurnCardInvalid", {
                        msg: t
                    }, !1, !0);
                    break;
                case Dt.Enum_BettingRound_River:
                    let i = t.cards[0];
                    var o;
                    if (i) a.public_card[4] = i;
                    else null == (o = Lt.getInstance()) || o.trace(Ot.MissingPublicCard, "RiverCardInvalid", {
                        msg: t
                    }, !1, !0)
            } else null == (i = Lt.getInstance()) || i.trace(Ot.MissingPublicCard, "TableStateNull", {
                msg: t
            }, !1, !0)
        }
        setBetButtonsInteractableAfterRealActionTurn() {
            this.setFreeSliderNodeAcive(!0)
        }
        setDiChiBtnText(t, e, a, i) {
            let n = 0,
                s = "",
                l = 0,
                r = null,
                h = "",
                d = 0;
            switch (t) {
                case 0:
                    r = this.dichi_button0;
                    break;
                case 1:
                    r = this.dichi_button1;
                    break;
                case 2:
                    r = this.dichi_button2;
                    break;
                case 3:
                    r = this.dichi_button3;
                    break;
                case 4:
                    r = this.dichi_button4;
                    break;
                default:
                    r = this.dichi_button0
            }
            let u = f("dichi_text" + t, r.node).getComponent(o);
            s = u.string;
            let m = this.getChangeCard(),
                c = !1;
            m && (c = m.isBetButtonInMaxMode && 0 == t), c || (l = -1 != s.indexOf("/") ? q.tools.Fraction2Decimal(s) : -1 != s.indexOf("%") ? parseFloat(s.replace("%", "")) / 100 : parseFloat(s));
            let g = 1 === this.gameDataInstance.tRoomData.pkRoomParam.is_mirco;
            switch (this.isGamePLO() ? (n = q.StringTools.plus(e, a), n = q.StringTools.times(n, l), n = q.StringTools.plus(n, i), c && (n = this.gameDataInstance.tGameData.m_u32StakeNow), n = q.StringTools.clientGoldByServer(n), n = g ? q.StringTools.toFixed(n, 2, q.StringTools.RoundingMode.ROUND_FLOOR) : Math.floor(n), h = q.String(n), d = n, n = q.StringTools.serverGoldByClient(n)) : (n = q.tools.round_double((e + a) * l) + i, c && (n = this.gameDataInstance.tGameData.m_u32StakeNow), g ? (h = q.StringTools.numberToString(q.StringTools.clientGoldByServer(n)), d = q.StringTools.clientGoldByServer(n)) : (h = q.StringTools.numberToString(Math.floor(q.StringTools.clientGoldByServer(n))), d = Math.floor(q.StringTools.clientGoldByServer(n)))), t) {
                case 0:
                    this._dichiButton0Value = d;
                    break;
                case 1:
                    this._dichiButton1Value = d;
                    break;
                case 2:
                    this._dichiButton2Value = d;
                    break;
                case 3:
                    this._dichiButton3Value = d;
                    break;
                case 4:
                    this._dichiButton4Value = d;
                    break;
                default:
                    this._dichiButton0Value = d
            }
            let p = this.gameDataInstance.tGameData.m_u32MiniRaise,
                _ = this.gameDataInstance.tGameData.m_u32StakeNow,
                S = n >= p && n <= _;
            r.interactable = S, r.node.active = !0, (null == m ? void 0 : m.isButton3) && (3 != t && 4 != t || (r.node.active = !1));
            let C = f("dichi_text" + t, r.node),
                b = f("dichi_mangZhuText" + t, r.node);
            b.getComponent(o).string = this.gameDataInstance.tRoomData.getDataPointValue(d), this.setDichiTextStyle(S, C, b), this.hideDichiButtonIfInvalid(r, h), this.setBetButtonEnable(r, u, S, n)
        }
        hideDichiButtonIfInvalid(t, e) {
            0 === q.Number(e) && (t.node.active = !1)
        }
        setDichiTextStyle(t, e, a) {
            t ? (e.getComponent(B).opacity = 255, a.getComponent(B).opacity = 255) : (e.getComponent(B).opacity = 153, a.getComponent(B).opacity = 153)
        }
        setBetButtonEnable(t, e, a, i) {
            const n = this.gameDataInstance.tGameData.m_u32StakeNow,
                o = this.isGamePLO() ? n > i : n >= i;
            t.node.active = o
        }
        setAllInDichiButtonEnable() {
            if (this.allInDichi) {
                this.allInDichi.node.active = !1;
                const t = this.followFill_Blue.node.getComponent(_t).getMark();
                if (this.dichiButtonContainer.active && this.followFill_Blue.node.active && "midSmallButton" != t && "allInImg" != t) {
                    const t = this.dichi_buttonList.slice(0, 4).map((t => t.node));
                    let e = null;
                    for (const a of t)
                        if (!a.active) {
                            e = a;
                            break
                        } if (e) {
                        this.allInDichi.node.active = !0;
                        const t = e.parent.getComponent(b),
                            a = this.allInDichi.node.parent.getComponent(b),
                            i = t.convertToWorldSpaceAR(e.position),
                            n = a.convertToNodeSpaceAR(i);
                        this.allInDichi.node.position = n;
                        const s = e.getComponent(G);
                        if (s && !this.allInDichi.getComponent(G)) {
                            const t = this.allInDichi.addComponent(G);
                            t.isAlignRight = s.isAlignRight, t.isAbsoluteRight = s.isAbsoluteRight, t.right = s.right, t.updateAlignment()
                        }
                        if (!Pt.Instance.isLandscapeLayout)
                            if (this.isGamePLO()) {
                                let t = this.gameDataInstance.tGameData.m_u32StakeNow,
                                    e = this.gameDataInstance.tRoomData.u32Stake + this.gameDataInstance.tGameData.m_u32RoundBet > t;
                                this.allInDichi.node.getComponentInChildren(o).string = e ? q.config.getStringData("Bet_Slider_Pot") : q.config.getStringData("Name_Allin")
                            } else this.allInDichi.node.getComponentInChildren(o).string = q.config.getStringData("Name_Allin")
                    }
                }
            }
        }
        showSelfThinkCd(t, e) {
            let a = this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat);
            a && (a.stopBlink(), a.setThankCdTime(t, 2), a.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_OnAction)), this.m_selfActionType = e
        }
        showAddTimeAction(t) {
            this._addtime_action || (this._addtime_action = D(this.addtimePrefab), this.node.addChild(this._addtime_action), this._addtime_action.getComponent(R).on(R.EventType.FINISHED, (t => {
                this._addtime_action.active = !1
            }), this)), this._addtime_action.active = !0, this._addtime_action.getComponent(R).play("place_card_btn_delay"), 1 == t ? this._addtime_action.setPosition(I(this.giveUpRed.node.position.x, this.giveUpRed.node.position.y + 10)) : this._addtime_action.setPosition(I(this.followFill_Blue.node.position.x, this.followFill_Blue.node.position.y + 10))
        }
        OnResetGame(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || (this.collectGameEventTrace("OnResetGame"), this.closeZoomTips(), this.gameDataInstance.tGameData.m_u32DelayTime = 0, this.gameDataInstance.tGameData.m_bIsAnte = !1, this.gameDataInstance.tGameData.reset(), q.action.setButtonActiveFalse(this.deal_button.getComponent(r)), q.action.setButtonActiveFalse(this.forceShowCard_button.getComponent(r)), this.getSeatBySeatViewId(0).getStatus() != q.Enum.SeatStatus.SeatStatus_leave_a_monment && -1 != this.gameDataInstance.tRoomData.i32SelfSeat && (this.gameDataInstance.tRoomData.m_isAllInMode = !0, this.game.updateMenu()), this.RealResetGame(this.node, t.msg))
        }
        RealResetGame(t, e) {
            this.sidePotEndRound(!0), this.HideMainPool(), this.hideChipInPot(), A.stopAllByTag(9911), this.removeWin(), this._isPeekRound = !1;
            for (let t = 0; t < e.players.length; t++) {
                let a = e.players[t],
                    i = this.gameDataInstance.tRoomData.GetTablePlayer(a.playerid);
                if (i) {
                    i.stake = a.stake, i.in_game = a.in_game, i.round_bet = a.round_bet, i.inStay = a.inStay, i.last_action = a.last_action;
                    let t = this.getSeatBySeverId(i.seatid);
                    if (t) {
                        t.isPlayedAnimPotToWinner = !1, t.setStake(a.stake), t.SetName(a.name);
                        for (let e = 0; e < t.getHandsCardsCount(); ++e) t.getShowCard(e).setFace(!1), t.getShowCard(e).clearContent()
                    }
                    i.playerid == this.getUserIDData() && (this.gameDataInstance.tRoomData.u32Stake = i.stake)
                }
            }
            this.resetTable();
            for (let t = 0; t < e.players.length; ++t) {
                let a = e.players[t],
                    i = this.gameDataInstance.tRoomData.GetTablePlayer(a.playerid);
                if (i) {
                    let t = this.getSeatBySeverId(i.seatid);
                    t && (i.in_game || i.inStay || (t.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_waiting, q.Enum.ActionType.Enum_Action_Null), null != t.getData() && t.getData().playerid == this.getUserIDData() && (this.gameDataInstance.tRoomData.m_isAllInMode = !1, this.game.updateMenu())))
                }
            }
            if (this.m_u32DelayTimeCount = 0, this.gameDataInstance.tRoomData.pkPayMoneyItem.actionCount < 9 && this.gameDataInstance.tRoomData.pkPayMoneyItem.actionDelayCountsFee.length > this.gameDataInstance.tRoomData.pkPayMoneyItem.actionCount) {
                let t = this.gameDataInstance.tRoomData.pkPayMoneyItem.actionDelayCountsFee[this.gameDataInstance.tRoomData.pkPayMoneyItem.actionCount];
                const e = this.gameDataInstance.tRoomData.neededFeeAsPerCurrency(t);
                this.setAddTimeValue(e)
            }
        }
        OnStartGame(t) {
            xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node) || this.gameDataInstance.tRoomData.hasRecvStartGame && (this.isZoom() && this.toggleZoomObserveOnFold.setChecked(!1), this.setWaitAction(!1), this.setEnableWaitingPlayerText(!1), this.setMangZhuText(!0), this._bReciviceCriticsStart ? this._bCriticsimRound = !0 : this._bCriticsimRound = !1, this._bReciviceCriticsStart = !1, this._isShowGuess = !1, this.game.guess_hand_card.active = !1, this.guess_hand_card_button.node.active = !1, this._guess_settle_amount = -1, this.setPublicCards([]), this.trackGuessHandOnStartGame(), te.config.enabled && q.MessageCenter.send("cashgame_on_startgame_noti", this), this._traceIsPeekCardCleared())
        }
        OnDestroyRoom(t) {
            var e;
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || (q.popUp.showMsg({
                txt: q.config.getStringData("UIGameSceneTips4"),
                isTwoBtn: !1,
                sureCallback: this.OnEndTime.bind(this, t.ret),
                sureLabel: q.config.getStringData("OKAY"),
                msgType: q.Enum.ToastType.ToastTypeDefault,
                cashGameScene: null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene
            }), te.config.enabled && q.MessageCenter.send("cashgame_on_destroyroom_noti", this))
        }
        OnEndTime(t) {
            if (this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Null), this.hideAllWinRate(), this.roomHasEnd = !0, this.pokerInfoNode_new && this.pokerInfoNode_new.getComponent(X).setShowAudit(this._isShowAudit), this.game) {
                var e;
                this.game.allreview_panel && this.game.allreview_panel.getComponent(j).autoHide(!1), q.MessageCenter.send("close_mail_layer"), null == (e = this._roleInfo) || e.hideRootNode(), this.game.currentTime_panel && (this.game.currentTime_panel.active = !1);
                let a = this.gameDataInstance.tRoomData.pkRoomParam.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Short,
                    i = this.gameDataInstance.tRoomData.pkRoomParam.is_mirco;
                if (this.isZoom() || this.currentGameId == q.Enum.GameId.Bet || this.gameDataInstance.tRoomData.pkRoomParam.IscalcIncomePerhand || a || i) return void this.gotoHallScene(this.gameDataInstance);
                q.httpHandler.requestRoomRecord(t.room_uuid_js), q.MessageCenter.send("show_Audit", {
                    gameData: this.gameDataInstance,
                    value: !1
                })
            }
        }
        gotoHallScene(t) {
            xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node) || (q.appConfig.getGeneralConfig().multiWindowEnabled || this.hideAllWinRate(), q.roomManager.closeGame(this.currentGameId, xt.getInstanceRoomId(null == this ? void 0 : this.node)))
        }
        OnStandUpSucc(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let e = this.gameDataInstance.tRoomData.GetTablePlayer(t.target_uid);
            if (this.Standup(e), e && (this.gameDataInstance.tRoomData.RemoveTablePlayer(e.playerid), e.playerid == this.getUserIDData() && this.enableSlider(!1)), this.game.updateMenu(), this.isGameStarSeat()) {
                if (e.playerid == this.getUserIDData()) {
                    var a;
                    let t = this.getSeatBySeverId(0).getSeatViewId();
                    this.turnSeat(t, !1), q.gameNet.requestOpenLiveReq(null == (a = this.gameDataInstance) || null == (a = a.tRoomData) ? void 0 : a.u32RoomId, 2), 1 == e.identity && (St.enableLocalVideo(!1), St.enableLocalAudio(!1))
                } else this.setSeatViewStyle();
                this.initGiftStarInfo(e, !1)
            }
            this.setEnableWaitingPlayerText(this.isWaitingPlayers(t.gameData)), q.MessageCenter.send(q.Enum.MessageCenterAction.onStandUpSucc, t.gameData)
        }
        Standup(t) {
            if (t) {
                let a = t.seatid,
                    i = t.playerid;
                if (i == this.getUserIDData()) {
                    this.game.buyin_panel.active = !1, this.gameDataInstance.tRoomData.i32SelfSeat = -1, this.face_button.active = this.isShowFaceBtn(), this.emoji_button.active = this.isShowFullscreenEmojiBtn(), this.isGameStarSeat() ? this.game.face_Panel.getComponent(J).hideUi() : this.game.face_Panel.getComponent(Y).hideUi(), this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Null);
                    for (let t = 0; t < this.m_pkSelfCard.length; ++t) this.m_pkSelfCard[t].setActive(!1);
                    this.m_u32DelayTimeCount = 0, this.setRecordEnabled(!1), this.isZoom() && this.setWaitAction(!1)
                }
                let n = this.getSeatBySeverId(a);
                var e;
                if (0 == n.getSeatViewId() && (this.backGamePanel.active = !1, this.record_button.active = this.isShowRecord(), this.setUserCardResultText(""), this.gaopai.active = !1), n) n.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_empty), n.setWinRateStatus(!1), 0 == n.getSeatViewId() && (this._isSeat = !1, this._forceShowColorfulBg = !0, this.updateTableSpriteEffect()), i == this.getUserIDData() && (this.unSelectSelfSeat(n), this.isZoom() && this.updataSeatAction(!1));
                else q.TT.showMsg(q.StringTools.formatC("can't find Seat(%d)", a), q.Enum.ToastType.ToastTypeError, !1, !1, null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene);
                this.updateEmptySeats()
            }
        }
        turnEndStandup() {
            this.gameDataInstance.tRoomData.pkRoomState.isBegin && this.DrunAction(this.gameDataInstance.tGameData.i32DealerSId, 0), this.isGameStarSeat() && this.setSeatViewStyle();
            let t = this.seatList.length;
            for (let e = 0; e < t; e++) this.seatList[e].OnUpdate_remarks(), this.seatList[e].setSeatViewId(this.seatList[e].getSeatViewId(), this.roomPlayerNumber);
            this.updateGiftSmallIconStatus()
        }
        OnNeedBuyIn(t) {
            xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node) || (this.game.buyin_panel.active = !0, this.game.buyin_panel.getComponent(K).UpdateBuyinInfo(this.gameDataInstance), this.hideBombInfoPrompt())
        }
        initPublicCardPosition(t) {
            this.publicCard_panel.children[t].addChild(this.m_pkPublicCard[t].node), this.initPublicCardSize(t)
        }
        setPublicCardPosition(t) {
            this.m_pkPublicCard[t].node.setPosition(p.ZERO)
        }
        _onMsgBuyInStart(t) {
            if (xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node)) return;
            let e = {
                buyInSize: this.gameDataInstance.tRoomData.curBuyInAmount
            };
            this.trackInfo(q.Enum.segmentEvent.PokerTableBoughtIn, e)
        }
        _onMsgBuyInFailedByServer(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let e = `BuyIn Failed: server error code = ${t.msg.error}`,
                a = {
                    buyInSize: this.gameDataInstance.tRoomData.curBuyInAmount,
                    failureReason: e
                };
            this.trackInfo(q.Enum.segmentEvent.PlayerBuyInFailed, a)
        }
        _onMsgBuyInFailedByLocal(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let e = `BuyIn Failed: local error code = ${t.msg}`,
                a = {
                    buyInSize: this.gameDataInstance.tRoomData.curBuyInAmount,
                    failureReason: e
                };
            this.trackInfo(q.Enum.segmentEvent.PlayerBuyInFailed, a)
        }
        _onMsgBtnClickExitRoom(t) {
            if (t && xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node)) return;
            let e = {
                stackSize: this.gameDataInstance.tRoomData.u32Stake
            };
            this.trackInfo(q.Enum.segmentEvent.PokerRoomLeft, e)
        }
        _onMsgBtnClickLeaveSeat(t) {
            if (xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node)) return;
            let e = {
                stackSize: this.gameDataInstance.tRoomData.u32Stake
            };
            this.trackInfo(q.Enum.segmentEvent.PokerTableSatOut, e)
        }
        _onMsgRespSitDownFailed(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let e = {
                denyReason: `SitDown Failed: server error code = ${t.msg.error}`
            };
            this.trackInfo(q.Enum.segmentEvent.PokerTableSittingDenied, e)
        }
        onCloseHitback(t) {
            xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node) || (this.hitback_left.active = !1, this.hitback_upper_left.active = !1, this.hitback_upper_right.active = !1)
        }
        initHitback() {
            this.hitback_left = D(this.hitback_faceitem_prefab), this.node.addChild(this.hitback_left), this.hitback_left.setSiblingIndex(q.Enum.ZORDER_TYPE.ZORDER_6), this.hitback_left.active = !1, this.hitback_upper_left = D(this.hitback_faceitem_prefab), this.node.addChild(this.hitback_upper_left), this.hitback_upper_left.setSiblingIndex(q.Enum.ZORDER_TYPE.ZORDER_6), this.hitback_upper_left.active = !1, this.hitback_upper_right = D(this.hitback_faceitem_prefab), this.node.addChild(this.hitback_upper_right), this.hitback_upper_right.setSiblingIndex(q.Enum.ZORDER_TYPE.ZORDER_6), this.hitback_upper_right.active = !1
        }
        initHitbackPos() {
            let t = this.seatList[0].getLeftHitPos(),
                e = this.nodeUITransform.convertToNodeSpaceAR(I(t.x, t.y, 0));
            this.hitback_left.setPosition(e);
            let a = this.seatList[0].getUpperLeftHitPos();
            e = this.nodeUITransform.convertToNodeSpaceAR(I(a.x, a.y, 0)), this.hitback_upper_left.setPosition(e);
            let i = this.seatList[0].getUpperRightHitPos();
            e = this.nodeUITransform.convertToNodeSpaceAR(I(i.x, i.y, 0)), this.hitback_upper_right.setPosition(e)
        }
        initGiftStarInfo(t, e) {
            if (this.isGameStarSeat() && t && 1 === t.identity)
                if (e) {
                    let e = new Rt;
                    e.uid = t.playerid, e.name = t.name, e.headurl = t.headurl, e.plat = t.plat, this.gameDataInstance.tGiftData.addStarsInfo(e)
                } else this.gameDataInstance.tGiftData.removeStarsInfo(t.playerid);
            this.updateGiftSmallIconStatus()
        }
        updateGiftSmallIconStatus() {}
        initPublicCard() {
            let t = 0;
            for (let e = 0; e < 5; ++e) this.m_pkPublicCard[e] = D(this.game.card).getComponent(tt), this.initPublicCardPosition(e), t = this.m_pkPublicCard[e].node.getComponent(b).contentSize.width;
            this.publicCard_hgp = t + 8, q.config.IS_FULLSCREEN || (this.publicPos.y = this.publicPos.y + 30), this.publicPos.x = 540 - 2 * this.publicCard_hgp;
            for (let t = 0; t < 5; ++t) {
                this.setPublicCardPosition(t);
                let e = new p(0, 0, 0);
                this.mainpoolUITransform.convertToWorldSpaceAR(I(0, 0, 0), e), this.m_pkPublicCard[t].setDealPos(e), this.m_pkPublicCard[t].setActive(!1)
            }
            this.showWinnerCombination(!1)
        }
        initPublicCardSize(t) {
            let e = this.m_pkPublicCard[t].node;
            e.getComponent(b).setContentSize(e.parent.getComponent(b).contentSize), q.resMgr.adaptWidget(e, !0, !1)
        }
        clickSelfCardBack(t) {
            if (this.isZoom() || this.gameDataInstance.tRoomData.pkRoomParam.showAllHole || !q.appConfig.getGameConfig().enableShowOpponentCards) return;
            let e = parseInt(t.currentTarget.name);
            if (!(e < 0 || e >= this.m_pkSelfCard.length))
                if (this.m_pkSelfCard[e].setEye(!this.m_pkSelfCard[e].isEye()), this.m_pkSelfCard.length <= 2) {
                    var a;
                    if (this.m_pkSelfCard[0].isEye() && this.m_pkSelfCard[1].isEye()) q.gameNet.RequestShowCard(null == (a = this.gameDataInstance) || null == (a = a.tRoomData) ? void 0 : a.u32RoomId, 2, !0);
                    else if (this.m_pkSelfCard[0].isEye() && !this.m_pkSelfCard[1].isEye()) {
                        var i;
                        q.gameNet.RequestShowCard(null == (i = this.gameDataInstance) || null == (i = i.tRoomData) ? void 0 : i.u32RoomId, 0, !0)
                    } else if (!this.m_pkSelfCard[0].isEye() && this.m_pkSelfCard[1].isEye()) {
                        var n;
                        q.gameNet.RequestShowCard(null == (n = this.gameDataInstance) || null == (n = n.tRoomData) ? void 0 : n.u32RoomId, 1, !0)
                    } else {
                        var o;
                        q.gameNet.RequestShowCard(null == (o = this.gameDataInstance) || null == (o = o.tRoomData) ? void 0 : o.u32RoomId, 2, !1)
                    }
                } else {
                    var s;
                    let t = [];
                    for (let e = 0; e < this.m_pkSelfCard.length; ++e) this.m_pkSelfCard[e].isEye() && t.push(e);
                    q.gameNet.RequestShowCard(null == (s = this.gameDataInstance) || null == (s = s.tRoomData) ? void 0 : s.u32RoomId, t, t.length > 0)
                }
        }
        initSelfCard() {
            this.isGamePLO();
            let t = this.getCardScale(),
                e = this.getCardLen();
            this.isGameStarSeat() && (this._selfCardPosY = this._selfCardPosY - 40);
            for (let t = 0; t < this.m_pkSelfCard.length; ++t) A.stopAllByTarget(this.m_pkSelfCard[t].node), this.m_pkSelfCard[t].node.removeFromParent(), this.m_pkSelfCard[t].node.destroy();
            q.StringTools.clearArray(this.m_pkSelfCard);
            for (let a = 0; a < e; ++a) {
                let e = D(this.game.card).getComponent(tt);
                e.setActive(!1), e.node.on(n.EventType.TOUCH_END, this.clickSelfCardBack.bind(this)), e.node.name = a.toString(), e.node.setScale(I(t, t, t)), e.setSelf(!0), e.setZoom(this.isZoom()), this.getCardPanel().addChild(e.node), this.m_pkSelfCard.push(e), e.node.getComponent(b).width
            }
            this.initSelfCardPosition(e)
        }
        updateTablebg() {
            let t = this.game.game_bg.getComponent(h),
                e = q.tools.GetTableBack(this.isGameStarSeat());
            this.game.gameIcon_img.active = !0, this.game.gameIcon_img_star.active = !1;
            this.setTableBackgroundSprite(t.node, e, (e => {
                this.setTableBackgroundSize(t), q.SwitchLoadingView.hide(q.config.getStringData("SwitchLoadingView_des_0"), !0)
            }), (t => {
                q.SwitchLoadingView.hide(q.config.getStringData("SwitchLoadingView_des_0"), !0)
            }))
        }
        setTableBackgroundSprite(t, e, a, i) {
            let n, o = Math.max(0, e) + "";
            if (Pt.Instance.isWPTO) {
                n = q.config.IS_WIDESCREEN ? "zh_CN/game/dzpoker/gameBgIpad/bg_" + o : "zh_CN/game/dzpoker/gameBg/bg_" + o;
                const t = cc_mtt.vv.DataManager.getNow(),
                    e = ie.findOldestValidSeason(t);
                e && (n = q.config.IS_WIDESCREEN ? `zh_CN/game/dzpoker/gameBgIpad/bg_${e}_cashgame` : `zh_CN/game/dzpoker/gameBg/bg_${e}_cashgame`)
            } else this.isGameStarSeat() ? (-1 == e && (this.game.gameIcon_img.active = !1, this.game.gameIcon_img_star.active = !0, o = "star"), n = q.config.IS_WIDESCREEN ? "zh_CN/game/dzpoker/starBg/bg_" + o + "_ipad" : "zh_CN/game/dzpoker/starBg/bg_" + o) : n = q.config.IS_WIDESCREEN && e < 6 ? "zh_CN/game/dzpoker/gameBgIpad/bg_" + o : "zh_CN/game/dzpoker/gameBg/bg_" + o;
            let s = t.getComponent(h);
            wt.loadJurisdSpriteToSprite(s, n, !1, a, (() => {
                wt.loadJurisdSpriteToSprite(s, "zh_CN/game/dzpoker/gameBg/bg_0", !1, a, i)
            })), this.updateTableSpriteEffect(), this.setTableThemeSprites(e)
        }
        updateTableSpriteEffect() {
            let t = this.game.game_bg.getComponent(h),
                e = !this._forceShowColorfulBg && (!this._isSeat || this.backGamePanel.active);
            e && this.grayMaterial && C(t) ? t.setSharedMaterial(this.grayMaterial, 0) : !e && this.normalMaterial && C(t) && t.setSharedMaterial(this.normalMaterial, 0)
        }
        getBetButtonOthersSprites() {
            return [this.followFill_Blue, this.allInDichi]
        }
        setTableThemeSprites(t) {
            q.resMgr.loadButtonsTheme(t, this.bgImageList, this.borderGraphicsImageList), q.resMgr.loadBetButtonFoldTheme([this.giveUpRed], t), q.resMgr.loadBetButtonOthersTheme(this.getBetButtonOthersSprites(), t)
        }
        setTableBackgroundSize(t) {
            if (!C(t, !0) || !C(t.node, !0)) return;
            let e = t.node.getComponent(b).width,
                a = t.node.getComponent(b).height,
                i = 1;
            i = e / a > v.getVisibleSize().width / v.getVisibleSize().height ? v.getVisibleSize().height / a : v.getVisibleSize().width / e, t.node.setScale(I(i, i, i))
        }
        initInsurance() {
            if (this.game && this.game.insurance_panel) {
                this.game.insurance_panel.getComponent(ct).init()
            }
        }
        initInsuranceFinish() {
            if (this.game && this.game.insurance_panel) {
                this.game.insurance_panel.getComponent(ct).initFinish(this.gameDataInstance.tRoomData.pkRoomParam.insuranceMode)
            }
        }
        setGameScene(t) {
            this.game = t
        }
        setGameManager(t) {
            this.gameManager = t
        }
        onbtnMenuClick(t) {
            q.AudioMgr.playButtonSound("button_click"), this.hideBombInfoPrompt()
        }
        onbtnAddTimeClick(t) {
            q.AudioMgr.playButtonSound("button_click"), this.RequestAction(q.Enum.ActionType.Enum_Action_AddActionTime, 0)
        }
        onBtnNewReplayerClick(t) {
            q.AudioMgr.playButtonSound("button_click"), C(this.newReplayer) && (this.newReplayer.show(this), this.hideBombInfoPrompt())
        }
        onbtnAllreviewClick(t) {
            if (q.AudioMgr.playButtonSound("button_click"), this.game.allreview_panel) {
                const t = -1;
                this.bottomMenuHandler.getComponent(Jt).showTab(Yt.Hands, t), this.hideBombInfoPrompt()
            }
        }
        onbtnGameLogClick(t) {
            if (q.AudioMgr.playButtonSound("button_click"), this.bottomMenuHandler) {
                const t = -1;
                this.bottomMenuHandler.getComponent(Jt).showTab(Yt.GameLog, t), this.hideBombInfoPrompt()
            }
        }
        onbtnBottomMenuClick(t) {
            q.AudioMgr.playButtonSound("button_click"), this.bottomMenuHandler && (this.bottomMenuHandler.getComponent(Jt).autoShow(!0), this.hideBombInfoPrompt())
        }
        onbtnFaceClick(t) {
            q.AudioMgr.playButtonSound("button_click")
        }
        setRecordEnabled(t) {
            this.record_button.active && (t = !this.checkAllIn() && t, this.record_button.active = t, t || this.cancelRecord())
        }
        setFaceBtnEnabled(t) {
            if (!this.face_button.active) return;
            t = !this.checkAllIn() && t, this.face_button.getComponent(r).interactable = t;
            let e = this.face_button.getChildByName("face_icon").getComponent(B);
            e.opacity = t ? 255 : 125
        }
        setFullscreenEmojiBtnEnabled(t) {
            if (this.emoji_button.active) {
                t = !this.checkAllIn() && Qt.config.Enable && t, this.emoji_button.getComponent(r).interactable = t;
                let e = this.emoji_button.getChildByName("icon");
                if (e.getComponent(B).opacity = t ? 255 : 125, C(this.game) && C(this.game.emoji_Panel)) {
                    const e = this.game.emoji_Panel.getComponent(Xt);
                    !t && e.hideUi(), e.setAllinRestriction(this.checkAllIn())
                }
            }
        }
        checkAllIn() {
            return this._isAllin
        }
        recordSuccess() {
            this.unschedule(this.updateRecord)
        }
        updateRecord(t) {
            if (0 == this._recordTime) return N.os == N.OS.IOS || (N.os, N.OS.ANDROID), void this.recordSuccess();
            this._recordTime -= 1
        }
        record() {
            if (this.gameDataInstance.tRoomData.m_bIsCancelVoice = !1, N.isBrowser) {
                if (q.config.GET_CLIENT_TYPE() == q.Enum.ClientType.H5WebPage) {
                    let t = '{"cmd": "1007", "op":0}';
                    q.native.SYwebjsToClient(t), this._bTouchStop = !1
                }
            } else if (N.os == N.OS.IOS) q.native.DoStartRecord(), this.startShowRecord();
            else if (N.os == N.OS.ANDROID) {
                if (!q.native.DoStartRecord()) return void(this._androidRecord = !1);
                this._androidRecord = !0, this.startShowRecord()
            }
        }
        onClickGameLogCb(t) {
            t && (t.active = !0, q.gameNet.RequestSituation(this.gameSceneInstance.room.getCurrentRoomID()))
        }
        onClickHandCb(t) {
            if (!t) return;
            t.active = !0;
            let e = t.getComponent(j);
            e && (e.setShowAudit(!0), e.autoShow(q.Enum.GameReviewDataType.EDST_GAMEROOM, null, null, !1))
        }
        onbtnRecordClick(t) {
            if (t.type == n.EventType.TOUCH_START) P(this.record_button).delay(.1).call((() => {
                this.record()
            })).start();
            else if (t.type == n.EventType.TOUCH_END) {
                if (F.instance.ActionManager.getNumberOfRunningActionsInTarget(this.record_button) > 0) return void A.stopAllByTarget(this.record_button);
                if (this.gameDataInstance.tRoomData.m_bIsCancelVoice = !1, N.isBrowser) {
                    if (q.config.GET_CLIENT_TYPE() == q.Enum.ClientType.H5WebPage) {
                        this._bTouchStop = !0;
                        let t = '{"cmd": "1007", "op":1}';
                        q.native.SYwebjsToClient(t)
                    }
                } else if (N.os == N.OS.IOS) q.native.DoStopRecord(), this.recordSuccess();
                else if (N.os == N.OS.ANDROID) {
                    if (q.native.DoStopRecord(), !this._androidRecord) return;
                    this.recordSuccess()
                }
            } else if (t.type == n.EventType.TOUCH_CANCEL) {
                if (F.instance.ActionManager.getNumberOfRunningActionsInTarget(this.record_button) > 0) return void A.stopAllByTarget(this.record_button);
                this.cancelRecord()
            }
        }
        cancelRecord() {
            if (N.os != N.OS.ANDROID || N.isBrowser || this._androidRecord)
                if (this.unschedule(this.updateRecord), this.gameDataInstance.tRoomData.m_bIsCancelVoice = !0, N.isBrowser) {
                    if (q.config.GET_CLIENT_TYPE() == q.Enum.ClientType.H5WebPage) {
                        this._bTouchStop = !0;
                        let t = '{"cmd": "1007", "op":1}';
                        q.native.SYwebjsToClient(t)
                    }
                } else N.os == N.OS.IOS && q.native.DoStopRecord(), N.os == N.OS.ANDROID && q.native.DoStopRecord()
        }
        startShowRecord() {
            this._recordTime = 10, this.schedule(this.updateRecord, 1)
        }
        onbtnBackGameClick(t) {
            var e;
            q.AudioMgr.playButtonSound("button_click"), q.gameNet.RequestBackPosition(null == (e = this.gameDataInstance) || null == (e = e.tRoomData) ? void 0 : e.u32RoomId)
        }
        onbtnBackAllTableClick(t) {
            q.AudioMgr.playButtonSound("button_click"), q.MessageCenter.send(q.Enum.MessageCenterAction.onSitInAllTable)
        }
        onSitBackInAllTableEvent() {
            if (this.gameDataInstance && this.gameDataInstance.tRoomData) {
                let e = this.gameDataInstance.tRoomData.GetTablePlayer(this.getUserIDData());
                var t;
                if (e && !e.in_game) q.gameNet.RequestBackPosition(null == (t = this.gameDataInstance) || null == (t = t.tRoomData) ? void 0 : t.u32RoomId)
            }
        }
        onbtnStarGameClick(t) {
            var e;
            q.AudioMgr.playButtonSound("button_click"), q.gameNet.RequestStartGame(null == (e = this.gameDataInstance) || null == (e = e.tRoomData) ? void 0 : e.u32RoomId)
        }
        _forceShowCardGameTimeOut() {
            var t;
            this._forceShowCardGameUuidRequest.length > 0 && (null == (t = Lt.getInstance()) || t.trace(Ot.HandRevealNotShown, "MultipleCashGame", {
                name: "forceShowCardGameTimeOut",
                issue: `timeout show hand reveal with uuid ${this._forceShowCardGameUuidRequest}`,
                rooms: q.roomManager.rooms.map((t => `GameId: ${t.getCurrentGameID()} - RoomId: ${t.getCurrentRoomID()} - IsJoined: ${t.joinedGame}`)).join(),
                roomLength: q.roomManager.rooms.length
            }, !1, !1))
        }
        onbtnForeShowCardClick(t) {
            var e, a, i;
            (q.AudioMgr.playButtonSound("button_click"), null != (e = this.gameDataInstance) && null != (e = e.tRoomData) && null != (e = e.pkRoomParam) && e.force_showcard) && (this._forceShowCardGameUuidRequest = null == (a = this.gameDataInstance) || null == (a = a.tGameData) ? void 0 : a.game_settlement_uuid, q.gameNet.RequestForceShowCard(null == (i = this.gameDataInstance) || null == (i = i.tRoomData) ? void 0 : i.u32RoomId), this.scheduleOnce(this._forceShowCardGameTimeOutFunc, this._forceShowCardGameTime))
        }
        onbtnDealClick(t) {
            var e;
            (q.AudioMgr.playButtonSound("button_click"), this.m_pkPublicCard[4].node.active) || q.gameNet.RequestSendCardFun(null == (e = this.gameDataInstance) || null == (e = e.tRoomData) ? void 0 : e.u32RoomId)
        }
        onbtnCurrentClick(t) {
            q.AudioMgr.playButtonSound("button_click"), q.gameNet.RequestSituation(xt.getInstanceRoomId(null == this ? void 0 : this.node)), this.game.currentTime_panel.active = !0, this.hideBombInfoPrompt()
        }
        showRoleInfo(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || q.appConfig.getGameConfig().enableInGamePlayerStats && (this.clickSeatServerId = t.serverId, this._roleInfo.showRootNode(), this._roleInfo_panel.active = !0, this._roleInfo.recetRoleInfo(t), this._roleInfo.updateView(this.getSeatBySeverId(t.serverId).getSeverId()), this._roleInfo.setForbidChat(this.checkAllIn()))
        }
        showObRoleInfo(t) {
            if (!xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node) && q.appConfig.getGameConfig().enableInGamePlayerStats) {
                if (this.bottomMenuHandler && this._roleInfo_panel.setSiblingIndex(this.bottomMenuHandler.node.getSiblingIndex() + 1), this.gameDataInstance.tRoomData.obPlayer.playerid == this.getUserIDData()) return this._roleInfo.showRootNode(), this._roleInfo.recetRoleInfo(null), this._roleInfo.lookonSelf(this.gameDataInstance.tRoomData.obPlayer.data), void this._roleInfo.setForbidChat(this.checkAllIn());
                this._roleInfo.showRootNode(), this._roleInfo.recetRoleInfo(null), this._roleInfo.showObView(), this._roleInfo.setForbidChat(this.checkAllIn())
            }
        }
        effectHitCall(t) {
            var e;
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let a = t.index,
                i = 0;
            i = -1 != this.gameDataInstance.tRoomData.i32SelfSeat ? this.getSeatBySeatViewId(0).getSeverId() : -1;
            let n = this.getSeatBySeverId(this.hitbackSeatServerId).getSeverId(),
                o = "#";
            o += q.StringTools.formatC("%d", i), o += "#", o += q.StringTools.formatC("%d", n), o += "#", o += q.StringTools.formatC("%d", a), o += "#", o += q.dataHandler.getUserData().nick_name, q.gameNet.RequestInteractiveExpression(null == (e = this.gameDataInstance) || null == (e = e.tRoomData) ? void 0 : e.u32RoomId, o, t.type), q.native.AnalysisCountEvent(q.Enum.native_cfg.EVENT_COUNT_MEMOJI_TYPE, q.StringTools.formatC("%d", a))
        }
        effectCall(t) {
            var e;
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let a = t.msg,
                i = 0;
            i = -1 != this.gameDataInstance.tRoomData.i32SelfSeat ? this.getSeatBySeatViewId(0).getSeverId() : -1;
            let n = this.getSeatBySeverId(this.clickSeatServerId).getSeverId(),
                o = "#";
            o += q.StringTools.formatC("%d", i), o += "#", o += q.StringTools.formatC("%d", n), o += "#", o += q.StringTools.formatC("%d", a), o += "#", o += q.dataHandler.getUserData().nick_name, q.gameNet.RequestInteractiveExpression(null == (e = this.gameDataInstance) || null == (e = e.tRoomData) ? void 0 : e.u32RoomId, o), q.native.AnalysisCountEvent(q.Enum.native_cfg.EVENT_COUNT_MEMOJI_TYPE, q.StringTools.formatC("%d", a))
        }
        getAniNode() {
            for (let t = 0; t < this._headAni_arr.length; t++) {
                let e = this._headAni_arr[t];
                if (!e.active) {
                    if ("0" == e.name) {
                        this._headAni_arr.splice(t, 1), t--;
                        continue
                    }
                    return e.setScale(I(1, 1, 1)), e.angle = 0, e.setSiblingIndex(120), e
                }
            }
            let t = D(this.headAni);
            return t.setScale(I(1, 1, 1)), this.addChildAniNode(t), this._headAni_arr.push(t), t.active = !1, t
        }
        addChildAniNode(t) {
            var e;
            null == (e = this.gameSceneInstance) || null == (e = e.gameNode) || e.addChild(t), t.setSiblingIndex(120)
        }
        getCalmDownNode() {
            for (let t = 0; t < this.calmDown_arr.length; t++) {
                let e = this.calmDown_arr[t];
                if (!e.active) return e.setScale(I(1, 1, 1)), e.angle = 0, e.setSiblingIndex(120), e
            }
            let t = D(this.calmDown_prefab);
            return t.setScale(I(1, 1, 1)), this.addChildAniNode(t), this.calmDown_arr.push(t), t.active = !1, t
        }
        getExpressNode(t, e) {
            for (let e = 0; e < t.length; e++) {
                let a = t[e];
                if (!a.active) return a.setScale(I(1, 1, 1)), a.angle = 0, a.setSiblingIndex(120), a
            }
            let a = D(e);
            return a.setScale(I(1, 1, 1)), this.addChildAniNode(a), t.push(a), a.active = !1, a
        }
        displayEmoji(t) {
            if (this.gameDataInstance.tGameData.m_bIsOnSelfAction || (this.hitback_left.active = !1, this.hitback_upper_left.active = !0, this.hitback_upper_right.active = !0), this.gameDataInstance.tRoomData.isSelfFold && (this.hitback_left.active = !0, this.hitback_upper_left.active = !1, this.hitback_upper_right.active = !1), 1 == this.hitback_left.active || 1 == this.hitback_upper_left.active) {
                0 == t ? (this.hitbackOn = !1, this.schedule(this.hitback, 60)) : 1 == t && (this.greetOn = !1, this.schedule(this.greet, 60));
                let e = function(t) {
                    E("time: " + t), this.unschedule(e), this.onCloseHitback()
                };
                this.unschedule(e), this.schedule(e, 10)
            }
        }
        isEmojiFree(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let e = [],
                a = [0, 1, 2, 3, 4, 10, 12],
                i = [5, 7, 8, 11, 14, 15, 17];
            0 == t.msg.type ? e = a : 1 == t.msg.type && (e = i);
            let n = q.tools.getRandomArrayElements(e, 1),
                o = q.tools.getRandomArrayElements(e, 2);
            if (t.msg.is_free) this.hitback_left.getComponent(kt).setData(n, 0, t.msg.type), this.hitback_upper_left.getComponent(kt).setData(o[0], 0, t.msg.type), this.hitback_upper_right.getComponent(kt).setData(o[1], 0, t.msg.type);
            else {
                let e = this.gameDataInstance.tRoomData.neededFeeAsPerCurrency(this.gameDataInstance.tRoomData.pkPayMoneyItem.emotionFee);
                this.hitback_left.getComponent(kt).setData(n, e, t.msg.type), this.hitback_upper_left.getComponent(kt).setData(o[0], e, t.msg.type), this.hitback_upper_right.getComponent(kt).setData(o[1], e, t.msg.type)
            }
        }
        onWelcome(t) {
            var e;
            if (this.checkAllIn()) return;
            let a = q.StringTools.formatC(q.config.getStringData("Star_welcome"), q.tools.GetFriendLevelName(t.intimacy), t.nickname);
            var i;
            (q.TT.showMsg(a, q.Enum.ToastType.ToastTypeInfo, !1, !1, null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene), this.hitbackSeatServerId = t.seatid, this.greetOn) && (q.gameNet.requestIsEmojiFree(null == (i = this.gameDataInstance) || null == (i = i.tRoomData) ? void 0 : i.u32RoomId, pe.protocol.EmojiType.Welcome), this.displayEmoji(1))
        }
        hitback() {
            this.hitbackOn = !0
        }
        greet() {
            this.greetOn = !0
        }
        showEffect(t, e, a, i, n) {
            var o;
            this.hitbackOn && this.greetOn && -1 != t && e == this.gameDataInstance.tRoomData.i32SelfSeat && 2 == n && [0, 1, 2, 3, 4, 10, 12].indexOf(a) > -1 && (q.gameNet.requestIsEmojiFree(null == (o = this.gameDataInstance) || null == (o = o.tRoomData) ? void 0 : o.u32RoomId, pe.protocol.EmojiType.Attack), this.hitbackSeatServerId = t, this.displayEmoji(0));
            let s = null;
            6 == a ? s = this.getCalmDownNode() : 12 == a ? s = this.getExpressNode(this.fist_arr, this.fist_prefab) : 13 == a ? s = this.getExpressNode(this.zhuaji_arr, this.zhuaji_prefab) : 14 == a ? s = this.getExpressNode(this.flower_arr, this.flower_prefab) : 15 == a ? s = this.getExpressNode(this.money_arr, this.money_prefab) : 16 == a ? s = this.getExpressNode(this.towel_arr, this.towel_prefab) : 17 == a ? s = this.getExpressNode(this.fan_arr, this.fan_prefab) : 0 === a && (s = this.getAniNode());
            let l = new p(0, 0, 0),
                r = new p(0, 0, 0),
                d = new p(0, 0, 0);
            if (-1 == t) {
                this.nodeUITransform.convertToWorldSpaceAR(l, d), this.gameSceneInstance.gameNode.getComponent(b).convertToNodeSpaceAR(d, l);
                let t = q.resMgr.createLabel(this.gameSceneInstance.gameNode, i, 24, this.getLocalFont());
                t.getComponent(b).setAnchorPoint(0, .5), t.setPosition(I(l.x - 34, l.y + 56, 0)), t.setSiblingIndex(q.Enum.ZORDER_TYPE.ZORDER_5), this.durationForGift = 2, P(t).delay(this.durationForGift).call((() => {
                    t.destroy()
                })).start()
            } else l = this.getSeatBySeverId(t).node.getPosition(), l = this.convertToAnimContainerSpaceAR(l, d);
            let u = this.getSeatBySeverId(e);
            r = u.node.getPosition(), 2 == u.getViewStyle() && (r.x += u.starVideo.x, r.y += u.starVideo.y), r = this.convertToAnimContainerSpaceAR(r, d);
            let m = this.isGameStarSeat();
            if (0 == a) {
                this._makeAppearonTop(s), s.active = !0, s.name = a.toString(), s.setScale(new p(2, 2, 2)), s.setPosition(l), s.getComponent(R).play(q.config.getStringData(q.StringTools.formatC("CocosEffect%d", a)));
                let t = new _(.5 * (l.x + r.x), .5 * (l.y + r.y));
                const e = (240 * Math.random() - 120) * Math.PI / 180,
                    i = new _(l.x + .95 * (r.x - l.x), l.y + .95 * (r.y - l.y)),
                    n = t.y * e;
                s.angle = -180 * Math.atan2(r.x - l.x, r.y - l.y) / Math.PI;
                const o = () => {
                    this.UpdateRocketAngle(s, _.ZERO, i)
                };
                this.durationForGift = 1, P(s).parallel(re.bezierToV2(s, i, this.durationForGift, this._calculationMidPoint(n, l, r))).call((() => {
                    this.effectPlay(this.node, {
                        sp: null,
                        ani_node: s,
                        isSp: !1
                    }, r), this.unschedule(o)
                })).start(), this.schedule(o, 0), m || this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/daodanfeixing")
            } else if (6 == a) {
                let t = s.getComponent(R);
                s.setPosition(l);
                let e = f("Node_HandScale/sprite_Hand", s);
                e.setPosition(.962, -4.802), e.angle = 0, e.getComponent(B).opacity = 255, s.active = !0, s.name = a.toString(), P(s).to(.3, {
                    position: r
                }).call((() => {
                    m || this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/calmDown"), this._makeAppearonTop(s), t.play(), t.on("finished", (e => {
                        t.off("finished"), s.setSiblingIndex(0), s.active = !1
                    }))
                })).start()
            } else if (12 == a) {
                let t = q.resMgr.createSprite(this.getAnimContainerNode(), "zh_CN/game/dzpoker/animation/icon/fist");
                this._makeAppearonTop(t), t.name = a.toString(), t.setPosition(l);
                let e = s.getComponent(R);
                s.setPosition(r), s.active = !1, s.name = a.toString(), P(t).to(.3, {
                    position: r
                }).call((() => {
                    m || this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/fist"), this._makeAppearonTop(s), e.play(), A.stopAllByTarget(t), t.removeFromParent(), t.destroy(), e.on("finished", (t => {
                        e.off("finished"), s.setSiblingIndex(0), s.active = !1
                    }))
                })).start()
            } else if (13 == a) {
                let t = q.resMgr.createSprite(this.getAnimContainerNode(), "zh_CN/game/dzpoker/animation/icon/zhuaji");
                this._makeAppearonTop(t), t.name = a.toString(), t.setPosition(l);
                let e = s.getComponent(R);
                s.setPosition(r), s.active = !1, s.name = a.toString(), P(t).to(.3, {
                    position: r
                }).call((() => {
                    m || this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/zhuaji"), this._makeAppearonTop(s), e.play(), A.stopAllByTarget(t), t.removeFromParent(), t.destroy(), e.on("finished", (t => {
                        e.off("finished"), s.setSiblingIndex(0), s.active = !1
                    }))
                })).start()
            } else if (14 == a) {
                let t = q.resMgr.createSprite(this.getAnimContainerNode(), "zh_CN/game/dzpoker/animation/icon/flower");
                this._makeAppearonTop(t), t.name = a.toString(), t.setPosition(l);
                let e = s.getComponent(R);
                s.setPosition(r), s.active = !1, s.name = a.toString(), P(t).to(.3, {
                    position: r
                }).call((() => {
                    m || this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/flower"), this._makeAppearonTop(s), e.play(), A.stopAllByTarget(t), t.removeFromParent(), t.destroy(), e.on("finished", (t => {
                        e.off("finished"), s.setSiblingIndex(0), s.active = !1
                    }))
                })).start()
            } else if (15 == a) {
                let t = q.resMgr.createSprite(this.getAnimContainerNode(), "zh_CN/game/dzpoker/animation/icon/money");
                this._makeAppearonTop(t), t.name = a.toString(), t.setPosition(l);
                let e = s.getComponent(R);
                s.setPosition(r), s.active = !1, s.name = a.toString(), P(t).to(.3, {
                    position: r
                }).call((() => {
                    m || this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/money"), this._makeAppearonTop(s), e.play(), A.stopAllByTarget(t), t.removeFromParent(), t.destroy(), e.on("finished", (t => {
                        e.off("finished"), s.setSiblingIndex(0), s.active = !1
                    }))
                })).start()
            } else if (16 == a) {
                let t = q.resMgr.createSprite(this.getAnimContainerNode(), "zh_CN/game/dzpoker/animation/icon/towel");
                this._makeAppearonTop(t), t.name = a.toString(), t.setPosition(l), s.setPosition(r), s.active = !1;
                const e = s.getChildByName("chahan_01").getComponent(R);
                s.setPosition(r), s.name = a.toString(), P(t).to(.3, {
                    position: r
                }).call((() => {
                    m || this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/chahan"), this._makeAppearonTop(s), e.play("chahan_01"), A.stopAllByTarget(t), t.removeFromParent(), t.destroy(), e.on("finished", (() => {
                        s.off("finished"), s.active = !1, s.setSiblingIndex(0)
                    }))
                })).start()
            } else if (17 == a) {
                s.setPosition(l), this._makeAppearonTop(s);
                const t = s.getChildByName("shanzi_01").getComponent(R),
                    a = s.getChildByName("shanzi_02").getComponent(R),
                    i = s.getChildByName("shanzi_03").getComponent(R);
                this._makeAppearonTop(t.node), t.play("shanzi_01"), t.on("finished", (() => {
                    t.off("finished");
                    let n, o = this.getSeatBySeverId(e);
                    n = o.direction <= 1 || 4 == o.direction ? new _(r.x + 30, r.y - 40) : new _(r.x - 30, r.y - 40), P(s).to(.3, {
                        position: n
                    }).call((() => {
                        m || this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/fan"), t.node.active = !1, o.direction <= 1 || 4 == o.direction ? (i.node.active = !0, i.play("shanzi_03"), i.on("finished", (() => {
                            i.off("finished"), s.setSiblingIndex(0)
                        }))) : (a.node.active = !0, a.play("shanzi_02"), a.on("finished", (() => {
                            a.off("finished"), s.setSiblingIndex(0)
                        })))
                    })).start()
                }))
            } else {
                m || this.playEffectOnCurrentRoom(q.StringTools.formatC("zh_CN/game/dzpoker/audio/effectVoice%d", a < 6 ? a : a - 1));
                let t = q.resMgr.createSprite(this.getAnimContainerNode());
                if (this._makeAppearonTop(t), t.active = !1, q.resMgr.load("zh_CN/game/dzpoker/animation/icon/effect", L, (e => {
                        t.getComponent(h).spriteFrame = e.getSpriteFrame(q.StringTools.formatC("animation-icon-icon_fly_%d", a < 6 ? a : a - 1)), t.active = !0
                    }), q.resMgr.CleanResLevel.LEVEL_SCENE), t.name = a.toString(), t.setPosition(l), 1 != a && 2 != a && 3 != a) {
                    let e = !1;
                    if (7 == a) {
                        let a = new p;
                        t.getScale(a), e = r.x - t.position.x < 5, (!e && a.x > 0 || a.x < 0 && e) && t.setScale(-a.x, a.y)
                    }
                    P(t).to(.3, {
                        position: r
                    }).call((() => {
                        this.effectPlay(this.node, {
                            sp: t,
                            ani_node: s,
                            isSp: !0,
                            isFlipX: e
                        }, r)
                    })).start()
                } else {
                    let e = new _(.5 * (l.x + r.x), .5 * (l.y + r.y));
                    const a = (0 - 120 * Math.random()) * Math.PI / 180,
                        i = e.y * a;
                    this.durationForGift = 1, P(t).parallel(re.bezierToV2(t, new _(r.x, r.y), this.durationForGift, this._calculationMidPoint(i, l, r)), P().to(1, {
                        angle: 720
                    })).call((() => {
                        this.effectPlay(this.node, {
                            sp: t,
                            ani_node: s,
                            isSp: !0
                        }, r)
                    })).start()
                }
            }
            this.closePopupAfterTimeExpired()
        }
        closePopupAfterTimeExpired() {
            this.unschedule(this._closePopup), this.scheduleOnce(this._closePopup, (this.durationForGift || .3) / 2)
        }
        _calculationMidPoint(t, e, a) {
            const i = Math.abs(Math.atan2(a.y - e.y, a.x - e.x)) * (180 / Math.PI),
                n = Math.abs(i - 90) < 20,
                o = Math.abs(i - 90) > 45;
            return n ? t *= Math.abs(a.y - e.y) / q.config.HEIGHT : o ? t *= Math.sin(i * Math.PI / 180) : n || o || (t *= Math.abs(a.y - e.y) / q.config.WIDTH), n ? new _(t, 0) : new _(0, t)
        }
        effectPlay(t, e, a) {
            const i = e.sp,
                n = e.ani_node;
            let o = i ? parseInt(i.name) : parseInt(n.name);
            let s = i ? i.getPosition() : n.getPosition();
            void 0 !== a && (s = a), o = o > 6 ? o - 1 : o;
            const l = ([40, 170, 100, 65, 170, 90, 160, 70, 70, 70, 105][o] + 10) / 60;
            0 == o && (this.isGameStarSeat() || this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/daodanbaozha"), o = 100);
            const r = this.getAniNode();
            if (this._makeAppearonTop(r), o < 7 || o > 9) {
                if (6 == o) {
                    let t = new p;
                    r.getScale(t), (e.isFlipX && t.x > 0 || t.x < 0 && !e.isFlipX) && r.setScale(-t.x, t.y)
                }
                r.getComponent(R).play(q.config.getStringData(q.StringTools.formatC("CocosEffect%d", o)))
            } else {
                let t = ["photo", "zhua", "eat"];
                r.getComponent(R).play(t[o - 7]), r.setScale(I(1.5, 1.5, 1.5))
            }
            r.setPosition(s), 4 == o && (r.setPosition(I(r.getPosition().x - 27, r.getPosition().y, 0)), r.setPosition(I(r.getPosition().x, r.getPosition().y + 75, 0))), 100 == o && r.setScale(I(1.5, 1.5, 1.5));
            r.active = !0, P(r).delay(l).call(function() {
                r.active = !1, r.setSiblingIndex(0)
            }.bind(this)).start(), i && (A.stopAllByTarget(i), i.removeFromParent(), i.destroy()), n && (n.active = !1, n.setSiblingIndex(0))
        }
        creatSpine(t, e, a, i) {
            let o = new n;
            o.addComponent(O.Skeleton);
            let s = new O.SkeletonData;
            s.atlasText = i, o.getComponent(O.Skeleton).skeletonData = s, t.addChild(o), o.setSiblingIndex(e), o.setPosition(a)
        }
        OnFlyEmoji(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            if (!q.appConfig.getGameConfig().opponentEmojiEnabled) return;
            const e = q.roomManager.getRoomByIds(this.gameDataInstance.tRoomData.u32GameID, this.gameDataInstance.tRoomData.u32RoomId);
            if (null == e || !e.joinedGame) return;
            let a = t.Content,
                i = t.type,
                n = "",
                o = "",
                s = "",
                l = "",
                r = a.split("#");
            for (let t = 0; t < r.length; t++) 1 == t ? n = r[t] : 2 == t ? o = r[t] : 3 == t ? s = r[t] : 4 == t && r[t] && (l = r[t]);
            (Number(n) != this.gameDataInstance.tRoomData.i32SelfSeat || Number(n) == this.gameDataInstance.tRoomData.i32SelfSeat && -1 != Number(n) || -1 == Number(n)) && this.showEffect(Number(n), Number(o), Number(s), l, i)
        }
        onShowFace(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let e = this.seatList.length;
            for (let a = 0; a < e; a++) this.seatList[a].getSeverId() == t.seatID && this.seatList[a].showFace(t.face)
        }
        onSendChat(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            if (!q.appConfig.getGameConfig().emojiTabEnabled) return;
            let e = this.getSeatBySeverId(t.seatID).getHeadWorldPosForFace();
            this.isGameStarSeat() ? this.game.face_Panel.getComponent(J).showFaceAni(e, q.Number(t.face)) : this.game.face_Panel.getComponent(Y).showFaceAni(e, q.Number(t.face))
        }
        onSendEmoji(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            if (!q.appConfig.getGameConfig().fullscreenEmojiEnabled) return;
            const e = t.msg,
                a = this.getSeatByPlayerID(e.playerId),
                i = this.getSeatByPlayerID(this.getUserIDData()),
                n = this.getUserIDData() == e.playerId && C(i);
            if (null != a) {
                let t = a.getHeadWorldPosForFace();
                this.game.emoji_Panel.getComponent(Xt).showEmojiAni(new _(t.x, t.y), q.Number(e.type), n)
            }
        }
        onSendDynamicConfig(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            if (!q.appConfig.getGameConfig().fullscreenEmojiEnabled) return;
            const e = t.msg;
            null != e.magicEmojiEnable && (this.gameDataInstance.tRoomData.pkDynamicConfig.magicEmojiEnable = e.magicEmojiEnable), null != e.magicEmojiDuration && (this.gameDataInstance.tRoomData.pkDynamicConfig.magicEmojiDuration = e.magicEmojiDuration), null != e.magicEmojiPotBB && (this.gameDataInstance.tRoomData.pkDynamicConfig.magicEmojiPotBB = e.magicEmojiPotBB), this.setDynamicConfig()
        }
        initPublicCardPos() {
            this.isGameStarSeat() && -1 == q.tools.GetTableBack(this.isGameStarSeat()) ? (this.game.gameIcon_img.active = !1, this.game.gameIcon_img_star.active = !0) : (this.game.gameIcon_img.active = !0, this.game.gameIcon_img_star.active = !1);
            let t = 0,
                e = !0;
            if (3 != this.roomPlayerNumber && 5 != this.roomPlayerNumber && 7 != this.roomPlayerNumber || (e = !1), !e && !q.config.IS_FULLSCREEN || this.isGameStarSeat()) {
                this.isGameStarSeat() && (t = q.config.IS_FULLSCREEN ? 30 : -25), this.publicPos.y += 60 + t;
                for (let t = 0; t < 5; ++t)
                    if (this.m_pkPublicCard[t]) {
                        this.m_pkPublicCard[t].node.setPosition(I(this.publicPos.x + t * this.publicCard_hgp, this.publicPos.y, 0));
                        let e = new p(0, 0, 0);
                        this.mainpoolUITransform.convertToWorldSpaceAR(I(0, 0, 0), e), this.m_pkPublicCard[t].setDealPos(e)
                    }
            } {
                let t = this.m_pkPublicCard[0].node,
                    e = this.cardFunTips_text.node,
                    a = e.position.x,
                    i = t.getComponent(b),
                    n = e.getComponent(b),
                    o = t.position.y + i.height * (1 - i.anchorY) * t.getScale().y;
                o += n.height * n.anchorY, o += 30;
                let s = new p(a, o, 0);
                t.parent.getComponent(b).convertToWorldSpaceAR(s, s), e.parent.getComponent(b).convertToNodeSpaceAR(s, s), e.setPosition(s)
            }
            let a = new p(0, 0, 0);
            this.publicCard_panel.getComponent(b).convertToWorldSpaceAR(this.publicPos, a);
            let i = new p(a.x, a.y, a.z),
                n = new p(0, 0, 0);
            if (this.game.gameIcon_img.parent.getComponent(b).convertToNodeSpaceAR(a, n), this.isGameStarSeat()) t = q.config.IS_FULLSCREEN ? 10 : 0;
            else if (q.config.IS_FULLSCREEN) t = 140;
            else {
                t = 15, this.gameDataInstance.tRoomData.pkRoomParam.player_count_max >= 8 && (t += 35)
            }
            if (0 == this.game.danmu_Panel.children.length) return;
            this.game.danmu_Panel.children[0].getComponent(b).convertToNodeSpaceAR(i, n);
            let o = null;
            o = this.isGameStarSeat() ? this.game.face_Panel.getComponent(J) : this.game.face_Panel.getComponent(Y), q.config.IS_FULLSCREEN ? (this.isGameStarSeat() ? o.setDanmuChanel([n.y + 810 - 150, n.y + 509, n.y + 180, n.y - 169, n.y - 304]) : o.setDanmuChanel([n.y + 773, n.y + 643, n.y + 303, n.y + 178, n.y - 174]), o.adjustDanmuMaxNumber(8)) : (this.isGameStarSeat() ? o.setDanmuChanel([n.y + 511, n.y + 186, n.y - 217]) : o.setDanmuChanel([n.y + 604, n.y + 214, n.y - 134]), o.adjustDanmuMaxNumber(5)), this.ResetPublicCardNode()
        }
        ResetPublicCardNode() {
            this.game.gameIcon_img.active = !0;
            for (let t = 0; t < 5; ++t) this.m_pkPublicCard[t] && (this.m_pkPublicCard[t].node.setPosition(p.ZERO), this.m_pkPublicCard[t].setDealPos(this.mainpoolUITransform.convertToWorldSpaceAR(I(0, 0, 0))))
        }
        getSeatPosition(t, e) {
            let a = this.tablePositions.getSeatPosition(t, e),
                i = this.seatPanel.getComponent(b).convertToNodeSpaceAR(a);
            if (!Pt.Instance.isLandscapeLayout) {
                const t = 127;
                i.y += t
            }
            return i
        }
        initSeat(t) {
            this.roomPlayerNumber = t;
            let e = this.getseatHandsCardType();
            if (Pt.Instance.isLandscapeLayout) {
                const t = q.appConfig.getGameConfig().seatExtraScale;
                this.card_panel.setScale(t, t)
            }
            for (let a = 0; a < t; a++) {
                let i = D(this.seat).getComponent(ht);
                this.seatPanel.addChild(i.node), i.initHandCards(e), i.node.setPosition(this.getSeatPosition(t, a)), i.setScale(t), i.setGameScene(this.game), i.setGameMain(this), i.setMainPool(this.mainpool), i.setDealCenterNode(this.dealCenterNode), i.setSeverId(a), i.setSeatViewId(a, t), i.updateStyle(), i.updateCurrency(this.gameDataInstance.tRoomData.currency.type), this.seatList.push(i), i.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_empty), i.setActiveCardMask(!1), i.setActiveCardMaskTop(!1), a > 0 && this.isZoom() && this.gameDataInstance.tRoomData.isvirtual && (i.node.getComponent(B).opacity = 0)
            }
            this.setSliderAllinZIndex(), this.unschedule(this.onTurningDidNotStartCallback)
        }
        setSliderAllinZIndex() {}
        initPos() {
            let t = 550,
                e = 2006,
                a = 110,
                i = 974,
                n = v.getVisibleSize().height / q.config.DESIGN_HEIGHT,
                o = 30,
                s = 0,
                l = 0;
            if (q.config.IS_FULLSCREEN) n = (v.getVisibleSize().height - q.config.FULLSCREEN_OFFSETY) / q.config.DESIGN_HEIGHT, o = 0, s = 85, this.isGameStarSeat() && this.gaopai.setPosition(I(this.gaopai.position.x, this.gaopai.position.y - 45, this.gaopai.position.z));
            else {
                let t = this.gameDataInstance.tRoomData.pkRoomParam.player_count_max;
                this.isGameStarSeat() ? this.gaopai.setPosition(I(this.gaopai.position.x, this.gaopai.position.y - 60, this.gaopai.position.z)) : this.gaopai.setPosition(I(this.gaopai.position.x, this.gaopai.position.y - 25, this.gaopai.position.z)), 8 == t ? s = 85 : 9 == t ? (s = 115, l = 60) : 6 == t && (s = 15)
            }
            this.isGameStarSeat() && (this.freeFill_button.node.setPosition(I(this.freeFill_button.node.position.x, this.freeFill_button.node.position.y + 30, this.freeFill_button.node.position.z)), this.freeFill_button_img.setPosition(I(this.freeFill_button_img.position.x, this.freeFill_button_img.position.y + 30, this.freeFill_button_img.position.z)));
            let r = [],
                h = new _(q.config.WIDTH / 2, t * n),
                d = new _(q.config.WIDTH / 2, (e + s) * n);
            r.push(h), r.push(d);
            let u = [],
                m = new _(q.config.WIDTH / 2, t * n),
                c = new _(q.viewAdaptive.getAdaptiveLeftX(a, !0), 1455 * n),
                g = new _(q.viewAdaptive.getAdaptiveLeftX(i, !0), 1455 * n);
            u.push(m), u.push(c), u.push(g);
            let p = [],
                S = new _(q.config.WIDTH / 2, t * n),
                C = new _(q.viewAdaptive.getAdaptiveLeftX(a, !0), 1452 * n),
                f = new _(q.config.WIDTH / 2, (e + s) * n),
                b = new _(q.viewAdaptive.getAdaptiveRightX(i, !0), 1452 * n);
            p.push(S), p.push(C), p.push(f), p.push(b);
            let D = [],
                y = new _(q.config.WIDTH / 2, t * n),
                T = new _(q.viewAdaptive.getAdaptiveLeftX(a, !0), (1e3 - o) * n),
                k = new _(q.viewAdaptive.getAdaptiveLeftX(a, !0), 1685 * n),
                R = new _(q.viewAdaptive.getAdaptiveRightX(i, !0), 1685 * n),
                A = new _(q.viewAdaptive.getAdaptiveRightX(i, !0), (1e3 - o) * n);
            D.push(y), D.push(T), D.push(k), D.push(R), D.push(A);
            let P = [],
                w = new _(q.config.WIDTH / 2, t * n),
                B = new _(q.viewAdaptive.getAdaptiveLeftX(a, !0), (1e3 - o) * n),
                E = new _(q.viewAdaptive.getAdaptiveLeftX(a, !0), 1685 * n),
                M = new _(q.config.WIDTH / 2, (e + s) * n),
                G = new _(q.viewAdaptive.getAdaptiveRightX(i, !0), 1685 * n),
                N = new _(q.viewAdaptive.getAdaptiveRightX(i, !0), (1e3 - o) * n);
            this.isGameStarSeat() && (w.y += 30, B.x += 20, E.x += 20, G.x -= 20, N.x -= 20, B.y += 20, E.y -= 46, G.y -= 46, N.y += 20), P.push(w), P.push(B), P.push(E), P.push(M), P.push(G), P.push(N);
            let F = [],
                L = new _(q.config.WIDTH / 2, t * n),
                O = new _(q.viewAdaptive.getAdaptiveLeftX(a, !0), (1005 - o) * n),
                x = new _(q.viewAdaptive.getAdaptiveLeftX(a, !0), 1452 * n),
                U = new _(q.viewAdaptive.getAdaptiveLeftX(a, !0), 1860 * n),
                V = new _(q.viewAdaptive.getAdaptiveLeftX(i, !0), 1860 * n),
                W = new _(q.viewAdaptive.getAdaptiveLeftX(i, !0), 1452 * n),
                z = new _(q.viewAdaptive.getAdaptiveLeftX(i, !0), (1005 - o) * n);
            F.push(L), F.push(O), F.push(x), F.push(U), F.push(V), F.push(W), F.push(z);
            let H = [],
                Z = new _(q.config.WIDTH / 2, t * n),
                j = new _(q.viewAdaptive.getAdaptiveLeftX(a, !0), (1005 - o) * n),
                Y = new _(q.viewAdaptive.getAdaptiveLeftX(a, !0), 1452 * n),
                J = new _(q.viewAdaptive.getAdaptiveLeftX(a, !0), (1863 - o) * n),
                $ = new _(q.config.WIDTH / 2, (e + s) * n),
                X = new _(q.viewAdaptive.getAdaptiveLeftX(i, !0), (1863 - o) * n),
                Q = new _(q.viewAdaptive.getAdaptiveLeftX(i, !0), 1452 * n),
                K = new _(q.viewAdaptive.getAdaptiveLeftX(i, !0), (1005 - o) * n);
            H.push(Z), H.push(j), H.push(Y), H.push(J), H.push($), H.push(X), H.push(Q), H.push(K);
            let tt = [],
                et = new _(q.config.WIDTH / 2, t * n),
                at = new _(q.viewAdaptive.getAdaptiveLeftX(a, !0), 1005 * n - o),
                it = new _(q.viewAdaptive.getAdaptiveLeftX(a, !0), 1452 * n - o),
                nt = new _(q.viewAdaptive.getAdaptiveLeftX(a, !0), 1863 * n - o),
                ot = new _(q.viewAdaptive.getAdaptiveLeftX(318 + l, !0), (e + s) * n),
                st = new _(q.viewAdaptive.getAdaptiveLeftX(760 - l, !0), (e + s) * n),
                lt = new _(q.viewAdaptive.getAdaptiveLeftX(i, !0), 1863 * n - o),
                rt = new _(q.viewAdaptive.getAdaptiveLeftX(i, !0), 1452 * n - o),
                ht = new _(q.viewAdaptive.getAdaptiveLeftX(i, !0), 1005 * n - o);
            tt.push(et), tt.push(at), tt.push(it), tt.push(nt), tt.push(ot), tt.push(st), tt.push(lt), tt.push(rt), tt.push(ht), this.postList.push(r), this.postList.push(u), this.postList.push(p), this.postList.push(D), this.postList.push(P), this.postList.push(F), this.postList.push(H), this.postList.push(tt)
        }
        OnAppEnterBackground() {
            var t;
            (console.log("###################### OnAppEnterBackground: 后台"), q.gameNet.stopVoice(this.gameDataInstance), N.os == N.OS.IOS ? q.config.isSiyuType() : (q.tools.setEnterbackState(!0), q.AudioMgr.pauseAll()), this.game && this.game.insurance_panel && this.game.insurance_panel.getComponent(ct).autoHide(!1), this.isZoom()) || (this._isAutoGuessHandOn = !1, q.gameNet.RequestGuessSetBetOpt(null == (t = this.gameDataInstance) || null == (t = t.tRoomData) ? void 0 : t.u32RoomId, !1));
            this.game.guess_hand_card.active = !1, this.guess_hand_card_button.node.active = !1, this.leaveVideoChannel()
        }
        OnAppEnterForeground() {
            console.log("###################### OnAppEnterForeground: 前台"), N.os == N.OS.IOS ? q.config.isSiyuType() : (q.tools.setEnterbackState(!1), q.AudioMgr.resumeAll()), this.hideBombInfoPrompt(), this.isGameStarSeat() && this.isEnableGameStarSeat() && this.onVideoEngineStateChanged(St.getEngineStatus())
        }
        setCurrentTimeButtonActive(t) {}
        updateforceShowcardPos() {
            if (this.isGameStarSeat()) {
                let t = 180;
                q.config.IS_FULLSCREEN || (t = 145), this.deal_button.setPosition(this.deal_button.getPosition().x, this.deal_button_Posy + t), this.forceShowCard_button.setPosition(this.forceShowCard_button.getPosition().x, this.forceShowCard_button_PosY + t)
            } else this.deal_button.setPosition(this.deal_button.getPosition().x, this.deal_button_Posy), this.forceShowCard_button.setPosition(this.forceShowCard_button.getPosition().x, this.forceShowCard_button_PosY)
        }
        get currentGameId() {
            return xt.getInstanceGameId(null == this ? void 0 : this.node)
        }
        getPushNoticeType(t) {
            let e = It.PUSH_ERROR;
            return e = this.isZoom() ? It.PUSH_ZOOM_TEXAS : t == _e.pb.GameId.PLO ? It.PUSH_PLO : t == _e.pb.GameId.StarSeat ? It.PUSH_STAR_SEAT : t == q.Enum.GameId.Bet ? It.PUSH_BET : It.PUSH_TEXAS, e
        }
        setPushNoticeType(t) {
            q.pushNotice.setPushNoticeType(this.getPushNoticeType(t))
        }
        showNoticeMsg(t) {}
        OnSnapShotRoomInfo(t) {
            var e, a, i;
            if (xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node)) return;
            this.unschedule(this._timeoutWaitingForSnapshotRoomInfo);
            const n = this.currentGameId;
            void 0 === q.GameDataManager.listCoinModeTableSet[this.gameDataInstance.tRoomData.pkRoomParam.game_name] || null === q.GameDataManager.listCoinModeTableSet[this.gameDataInstance.tRoomData.pkRoomParam.game_name] ? this.gameDataInstance.tRoomData.coinMode = q.tools.isGameplayBBChoice() ? 1 : 0 : this.gameDataInstance.tRoomData.coinMode = q.GameDataManager.getDataPointInTable(this.gameDataInstance.tRoomData.pkRoomParam.game_name), this.updateforceShowcardPos();
            let o = this.gameDataInstance.tRoomData.i32SelfSeat,
                s = this.gameDataInstance.tRoomData.pkRoomParam.player_count_max;
            this.gameDataInstance.tRoomData.pkRoomParam.is_opened_drawback, this.gameDataInstance.tRoomData.pkRoomParam.drawback_times, this.gameDataInstance.tRoomData.pkRoomParam.drawback_hold_times;
            if (this.D_img.active = !1, this.closeZoomTips(), this.face_button.active = this.isShowFaceBtn(), this.emoji_button.active = this.isShowFullscreenEmojiBtn(), this.setCurrentTimeButtonActive(!0), this.game.guess_hand_card.active = !1, this.guess_hand_card_button.node.active = !1, this._guess_settle_amount = -1, this.hideAllWinRate(), this.addAllinPlayersWinRate(), -1 == o && (this.setActionButtonsView(!1), this.setActionButtonsView2(!1), this.enableSlider(!1), this.addTime_button.active = !1, this.gaopai.active = !1, this.game.face_Panel && (this.isGameStarSeat() ? this.game.face_Panel.getComponent(J).hideUi() : this.game.face_Panel.getComponent(Y).hideUi())), 1 == this.gameDataInstance.tRoomData.isShowCritPrompt && this.showBombInfoPrompt(this.gameDataInstance.tRoomData.pkRoomParam), null == (e = this._roleInfo) || e.createFaceItem(), this.m_bIsInit) {
                var l, h;
                if (this.resetTable(), this.isZoom()) null == (l = this._roleInfo) || l.hideRootNode();
                else this.setTableName(), q.worldNet.RequestGetJackpotData(this.gameDataInstance.tRoomData.pkRoomParam.club_id, null == (h = this.gameDataInstance) || null == (h = h.tRoomData) ? void 0 : h.u32RoomId);
                this._runZoomSeatAction = !0, A.stopAllByTag(5566);
                for (let t = 0; t < this.m_pkPublicCard.length; ++t) this.m_pkPublicCard[t].stopSchedulesAndActions(), this.m_pkPublicCard[t].resetPos(), this.m_pkPublicCard[t].setActive(!1), this.m_pkPublicCard[t].setFace(!1), this.m_pkPublicCard[t].setOp(!1), this.m_pkPublicCard[t].setGary(!1);
                this.showWinnerCombination(!1);
                for (let t = 0; t < this.m_pkSelfCard.length; ++t) this.m_pkSelfCard[t].stopSchedulesAndActions(), this.m_pkSelfCard[t].resetPos(), this.m_pkSelfCard[t].setActive(!1), this.m_pkSelfCard[t].setFace(!(256 === q.Number(this.m_pkSelfCard[t].eCardNum))), this.m_pkSelfCard[t].setGary(!1);
                this.gameDataInstance.tGameData.u32DeadPot = 0, this._dichiChipValue = 0;
                let t = q.StringTools.formatC(q.config.getStringData("dichiNum"), this._dichiChipValue);
                this.setTotalPotValue(this.gameDataInstance.tRoomData.getDataPointValue(t)), this.showDichiChipText(!1), this.HideMainPool(), this.backGamePanel.active = !1, this.cardFunTips_text.node.active = !1, this.cardFunTips_text.node.active = !1;
                let e = new p(0, 0, 0);
                (this.dealCenterNode.getComponent(b) || this.mainpoolUITransform).convertToWorldSpaceAR(p.ZERO, e);
                for (let t = 0; t < this.seatList.length; ++t) {
                    let a = this.seatList[t];
                    if (a) {
                        a.hideChips(), a.hideCards(), a.isShowDown = !1, a.resetCardsPos(), a.hideWin(), a.setActiveCardMask(!1), a.setActiveCardMaskTop(!1), this.isZoom() && a.updateCardsExposeParent();
                        for (let t = 0; t < a.getHandsCardsCount(); ++t) a.getShowCard(t).setFace(!1), a.getShowCard(t).setDealPos(e), a.getShowCard(t).setGary(!1)
                    }
                }
                this.recetAllSeats(), te.config.enabled && q.MessageCenter.send("cashgame_on_snapshot_roominfo", this)
            } else {
                var d;
                if (this.initRoomData(), this.initSeat(s), this.initSelfCard(), this.initPublicCardPos(), this.setRoomData(), this.UpdateCardFace(), this.updateCardBack(), this.resetTable(), this.initHitbackPos(), this.record_button.active = this.isShowRecord(), this.addEvent(), this._setupGameJackpotEventController(), this.m_bIsInit = !0, this._runZoomSeatAction = !1, this.record_button_img.active = !0, this.isZoom() || n == q.Enum.GameId.Bet) null == (d = this._roleInfo) || d.hideRootNode();
                this.setPushNoticeType(n), this.getPokerNameTextNode().active = !this.isZoom(), this.onUpdataStarRedpacket()
            }
            A.stopAllByTag(this.GAME_DELAY_ANTE_TAG), A.stopAllByTag(this.GAME_DELAY_ELECT_DEALER_TAG), A.stopAllByTag(this.GAME_DELAY_BLIND_TAG), A.stopAllByTag(this.GAME_DELAY_HOLECARD_TAG), A.stopAllByTag(this.GAME_DELAY_ACTION_TURN_TAG), A.stopAllByTag(this.GAME_DELAY_ENDROUND_TAG), A.stopAllByTag(this.GAME_DELAY_NONEEDINSURANCE_TAG), A.stopAllByTag(this.GAME_SHOW_GUESS_SETTLE_TAG), A.stopAllByTag(this.GAME_REAL_COMMUNITY_CARD_TAG), A.stopAllByTag(this.GAME_END_SETSTAKE_TAG), A.stopAllByTag(this.GAME_CHIPS_MOVE_ACTION_TAG), A.stopAllByTag(this.GAME_TURN_MAIN_USER_CARD_TAG), A.stopAllByTag(this.GAME_DELAY_RESET_TABLE_TAG), this.resetAction(), this.game && this.game.insurance_panel && this.game.insurance_panel.getComponent(ct).autoHide(!1);
            for (let t = 0; t < this.gameDataInstance.tRoomData.kTablePlayerList.length; t++) {
                let e = this.gameDataInstance.tRoomData.kTablePlayerList[t];
                this.playerSitDown(e), this.setSeatInfo(e), e.inStay && this.leaveTable(e), this.UpdateDeadPot(e.round_bet)
            }
            this.updateEmptySeats();
            let u = !1,
                m = 0;
            if (-1 == this.gameDataInstance.tRoomData.i32SelfSeat && !this.isGameStarSeat())
                for (let t = 0; t < this.seatList.length; t++) {
                    let e = this.seatList[t];
                    0 == e.getSeatViewId() && e.getStatus() != q.Enum.SeatStatus.SeatStatus_empty && (u = !0), e.getStatus() == q.Enum.SeatStatus.SeatStatus_empty && (m = e.getSeatViewId())
                }
            if (u && 0 != m && this.turnSeat(m, !0), this.gameDataInstance.tRoomData.pkRoomParam.is_allin_allfold, this.isGameStarSeat())
                if (this.isAudience()) {
                    let t = this.getSeatBySeverId(0).getSeatViewId();
                    this.turnSeat(t, !1)
                } else this.setSeatViewStyle();
            this.SetTableInfo(), -1 != this.gameDataInstance.tRoomData.i32SelfSeat && this.setUserCardResultText(this.GetSelfCardType()), this.m_bIsInitDone = !0, q.action.setButtonActiveFalse(this.deal_button.getComponent(r)), q.action.setButtonActiveFalse(this.forceShowCard_button.getComponent(r)), this.setEnableWaitingPlayerText(this.isWaitingPlayers(this.gameDataInstance)), this.gameDataInstance.tRoomData.m_bChooseOuts = this.gameDataInstance.tRoomData.pkRoomParam.choose_outs, this.gameDataInstance.tRoomData.pkRoomState.paused ? this.showPauseGameDlg() : this.hidePauseGameDlg();
            for (let t = 0; t < this.seatList.length; t++) this.seatList[t].getStatus() > q.Enum.SeatStatus.SeatStatus_leave_a_monment && this.seatList[t].getActionType() != q.Enum.ActionType.Enum_Action_Fold && null != this.seatList[t].getData() && this.seatList[t].getData().playerid == this.getUserIDData() && (this.gameDataInstance.tRoomData.m_isAllInMode = !0);
            if (this.updateMenu(), this.m_u32DelayTimeCount = this.gameDataInstance.tGameData.m_u32AddTimeCount, this.m_u32DelayTimeCount = this.m_u32DelayTimeCount >= 9 ? 8 : this.m_u32DelayTimeCount, console.log(this.m_u32DelayTimeCount), this.m_u32DelayTimeCount > 0 && 0 != this.gameDataInstance.tRoomData.pkPayMoneyItem.actionDelayCountsFee.length) {
                let t = this.gameDataInstance.tRoomData.pkPayMoneyItem.actionDelayCountsFee[this.m_u32DelayTimeCount];
                const e = this.gameDataInstance.tRoomData.neededFeeAsPerCurrency(t);
                this.setAddTimeValue(e)
            }
            const c = null == (a = this.gameSceneInstance) ? void 0 : a.room;
            if ((1 == this.gameDataInstance.tRoomData.is_quick_sit || null != c && c.getIsQuickRoom()) && (this.quickSit(), null == c || c.setIsQuickRoom(!1)), 1 != q.Number(q.tools.GetStringByCCFile("FINDVIEW_isFASTENTER")) || n == q.Enum.GameId.Allin || this.gameDataInstance.tRoomData.isZoom() || (!q.dataHandler.getActivityData().isAvatar() || this.isGameStarSeat() && this.isEnableGameStarSeat() && 2 == this.myIdentity() || (this.game.buyin_panel.active = !0, this.game.buyin_panel.getComponent(K).UpdateBuyinInfo(this.gameDataInstance)), q.tools.SaveStringByCCFile("FINDVIEW_isFASTENTER", "0")), 2 == q.Number(q.tools.GetStringByCCFile("FINDVIEW_isFASTENTER")) && (this.isZoom() && this.seatList[0].getStatus() != q.Enum.SeatStatus.SeatStatus_empty || this.seatList[0].onClickSelf(null), this.game.buyin_panel.active = !1, q.tools.SaveStringByCCFile("FINDVIEW_isFASTENTER", "0")), this.isZoom() && this._runZoomSeatAction && this.updataSeatAction(this._runZoomSeatAction), q.gameNet.RequestGameActionTurn(null == (i = this.gameDataInstance) || null == (i = i.tRoomData) ? void 0 : i.u32RoomId), this.setForbidChat(this.gameDataInstance.tRoomData.anyoneAllin), this.initInsuranceFinish(), this.setDynamicConfig(), this.isGameStarSeat()) {
                let t = f("commentator", this.node);
                if (this.setSeatViewStyle(), this.isEnableGameStarSeat()) {
                    t.active = !0;
                    let e = this.getCommentator(),
                        a = !1,
                        i = 0;
                    if (2 == this.myIdentity()) {
                        a = this.isEnableMike();
                        let t = this.getCommentatorInfoByUid(this.getUserIDData());
                        t && (i = t.television), e.setRole(2, [i]), St.enableLocalAudio(a)
                    } else {
                        a = 0 == e.getRole() || e.isEnableMike(), i = 0 == e.getRole() ? this.defaultCommentatorChannel() : e.getAudioChannel();
                        let t = this.currentCommentatorChannels();
                        0 == i || this.containsKey(t, i) || (i = 1), e.setRole(1, t)
                    }
                    e.setViewStyle(this.isEnableAudioVolumeIndication() ? 2 : 1), e.enableMike(a), e.setAudioVolume(0), e.setAudioChannel(i), this.updateVoicePrivateNotice(), this.updateMikMode(), this._needCreateVideoEngine && this.createVideoEngine()
                } else t.active = !1, this.destroyVideoEngine();
                this.record_button.active = this.isShowRecord();
                let e = this.gameDataInstance.tRoomData.muteCustomBarrageSeconds,
                    a = -1 == e || e > 0;
                q.MessageCenter.send("barrageUpdate", {
                    mute: a,
                    time: e,
                    canBarrage: this.gameDataInstance.tRoomData.openCustomBarrage,
                    canInput: this.gameDataInstance.tRoomData.openTablePlayerCustomBarrage,
                    price: this.gameDataInstance.tRoomData.nextCustomBarrageFee
                })
            }
            this.updateCoinModeValue(), this._isFistLoadSnapshot && this.trackInfo(q.Enum.segmentEvent.PokerRoomJoined), this._isFistLoadSnapshot = !1
        }
        updateMenu() {
            this.gameManager.updateMenu(this.game)
        }
        getChangeCard() {
            var t;
            return null == (t = this.gameManager) || t.checkAndInitChangeCardPanel(), this.gameManager.changeCard_panel.getComponent("ChangeCard")
        }
        trackInfo(t, e = null) {
            var a;
            let i = "",
                n = "",
                o = "",
                s = "",
                l = this.gameDataInstance.tRoomData.u32GameID,
                r = this.gameDataInstance.tRoomData.pkRoomParam.proDatas;
            for (let t = 0; t < r.length; ++t) {
                let e = t + 1;
                0 !== t && 0 !== r[t].levelLimit && (o += ", "), r[t].levelLimit < 0 ? (o += `${e}`, s += `${e}:*`) : r[t].levelLimit > 0 ? (o += `${e}`, s += `${e}:${r[t].levelLimit}`) : s += `${e}:0`, t !== r.length - 1 && (s += ", ")
            }
            o.length > 0 && (o = `[${o}]`);
            let h = this.getSeatByPlayerID(this.getUserIDData());
            h && (i = `view_id:${h.getSeatViewId()}; seat_id:${h.getSeverId()}`);
            let d = "",
                u = "";
            if (q.roomManager.checkGameIsZoom(l)) d = "MainScene_Scene_gameType_panel_button1_text", u = "MainScene_Scene_gameType_panel_button5_text";
            else switch (l) {
                case _e.pb.GameId.Texas:
                    d = "MainScene_Scene_gameType_panel_button1_text", this.gameDataInstance.tRoomData.pkRoomParam.game_mode === q.Enum.CreateGameMode.CreateGame_Mode_Short && (u = "DataView_gameType_panel_button_1_text");
                    break;
                case _e.pb.GameId.StarSeat:
                    d = "MainScene_Scene_gameType_panel_button1_text", u = "game_review_favor_list_game_type_start_seat_txt";
                    break;
                case _e.pb.GameId.Bet:
                    d = "MainScene_Scene_gameType_panel_button1_text", u = "MainScene_Scene_gameType_panel_button4_text";
                    break;
                case _e.pb.GameId.PLO:
                    d = "MainScene_Scene_gameType_panel_button1_text", u = "MainScene_Scene_gameType_panel_button8_text"
            }
            d.length > 0 && (d = q.config.getStringData(d)), u.length > 0 && (u = q.config.getStringData(u)), u = q.tools.updateGameType(u);
            let m = 0,
                c = this.mangZhu_text.string.split("/");
            c.length > 1 && (m = q.Number(c[1]));
            {
                let t = this.gameDataInstance.tRoomData.pkRoomParam;
                t.is_associated_jackpot && (n += "jackpot;"), t.is_allin_allfold && (n += "allin_allfold;"), t.short_game_double_ante && (n += "short_double_ante;"), t.short_fullhouse_flush_straight_three && (n += "short_cards_order;"), t.is_opened_drawback && (n += "drawback;"), t.choose_outs && (n += "outs;"), t.muck_switch && (n += "muck;"), t.anti_simulator && (n += "anti_simulator;"), t.force_showcard && (n += "force_showcard;"), t.IscalcIncomePerhand && (n += "IscalcIncomePerhand;"), t.auto_withdraw && (n += "auto_withdraw;"), t.forceWithdrawMode && (n += "forceWithdrawMode;"), t.is_open_guess && (n += "is_open_guess;"), t.showAllHole && (n += "showAllHole;"), 1 === t.is_mirco && (n += "is_mirco;")
            }
            let g = {
                noOfPlayerInTheRoom: this.gameDataInstance.tRoomData.allPlayersCount,
                tableSize: this.seatList.length,
                gameType: d,
                gameSubType: u,
                stakeSize: m,
                seatsOccupied: this.gameDataInstance.tRoomData.kTablePlayerList.length,
                roomId: null == (a = this.gameDataInstance) || null == (a = a.tRoomData) ? void 0 : a.u32RoomId,
                featuresEnabled: n,
                roomLevel: o,
                roomLevelString: s,
                roomRank: i
            };
            q.tools.copyObjectProperties(g, e), Kt.getInstance().sendEvent(q.Enum.CurrentScreen.room, t, q.Enum.Functionality.poker, g)
        }
        onQuickFold() {
            var t;
            this.stopSelfThinkCd(), q.gameNet.RequestQuickFold(null == (t = this.gameDataInstance) || null == (t = t.tRoomData) ? void 0 : t.u32RoomId, !1, 0)
        }
        onCloseTips() {
            let t = q.TP.getTag();
            null != t && ("UIGameSceneTips28" != t && "UIGameSceneTips3" != t && "ZoomQuickFold_tips" != t && "ZoomQuickFold_tips2" != t && "Big_Card_Tips" != t || q.TP.hideTipsPanel())
        }
        updataSeatAction(t) {
            let e = this.gameDataInstance.tRoomData.isvirtual;
            for (let a = 0; a < this.seatList.length; ++a) {
                let i = this.seatList[a];
                if (i)
                    if (i.node.active = !0, A.stopAllByTag(777, i.node.getComponent(B)), 0 == i.getSeatViewId()) i.node.getComponent(B).opacity = 255, i.node.active = !0;
                    else if (t) {
                    let t = null;
                    const a = i.node.getComponent(B);
                    e ? (a.opacity = 255, t = P(a).to(1, {
                        opacity: 0
                    }).call((() => {
                        i.node.active = !1
                    }))) : (a.opacity = 0, t = P(a).call((() => {
                        i.node.active = !0
                    })).to(1, {
                        opacity: 255
                    })), t.tag(777), t.start()
                } else i.node.active = !e
            }
        }
        quickSit() {
            if (0 == this._isSeat) {
                let t = this.getSeatBySeatViewId(0);
                if (t && t.getStatus() == q.Enum.SeatStatus.SeatStatus_empty) t.onClickSelf(null);
                else
                    for (let t = 0; t < this.seatList.length; ++t) {
                        let e = this.seatList[t];
                        if (e && e.getStatus() == q.Enum.SeatStatus.SeatStatus_empty) {
                            e.onClickSelf(null);
                            break
                        }
                    }
            } else if (this.gameDataInstance.tRoomData.is_quick_sit) {
                var t;
                null == (t = this.game) || t.onBtnBuyin(this._isSeat, !1)
            }
        }
        updateCardBack() {
            for (let t = 0; t < this.seatList.length; ++t) {
                let e = this.seatList[t];
                for (let t = 0; t < e.getHandsCardsCount(); ++t) e.getCard(t).updateCardBack(), e.getShowCard(t).updateCardBack()
            }
            for (let t = 0; t < this.m_pkSelfCard.length; ++t) this.m_pkSelfCard[t].updateCardBack();
            for (let t = 0; t < this.m_pkPublicCard.length; ++t) this.m_pkPublicCard[t].updateCardBack()
        }
        UpdateCardFace() {
            for (let t = 0; t < this.seatList.length; ++t) {
                let e = this.seatList[t];
                for (let t = 0; t < e.getHandsCardsCount(); ++t) e.getCard(t).updateCard(), e.getShowCard(t).updateCard()
            }
            for (let t = 0; t < this.m_pkSelfCard.length; ++t) this.m_pkSelfCard[t].updateCard();
            for (let t = 0; t < this.m_pkPublicCard.length; ++t) this.m_pkPublicCard[t].updateCard();
            this._peekCardDisplay && (this._peekCardDisplay.setCardType(q.tools.GetCardFace()), this._peekCardDisplay.updateCardFace())
        }
        getPokers(t, e) {
            let a = [];
            for (let i = 0; i < e.length; ++i) {
                let n = e[i];
                if (n.isActive) {
                    let e = n.eCardNum,
                        i = n.eCardSuit,
                        o = new at(t);
                    o.initWhitValue(at.getLocalValue(e, t), i, t), a.push(o.getNumber(t))
                }
            }
            return a
        }
        GetSelfCardType(t, e) {
            let a = "",
                i = this.gameDataInstance.tRoomData.pkRoomParam.game_mode;
            for (let t = 0; t < this.m_pkSelfCard.length; ++t)
                if (256 === q.Number(this.m_pkSelfCard[t].eCardNum)) return "";
            let n = this.getPokers(i, this.m_pkSelfCard),
                o = this.getPokers(i, this.m_pkPublicCard);
            return a = this.isGamePLO() ? at.getPokerTypeString(n, o, i, 2, 3, t, e) : at.getPokerTypeString(n, o, i), a
        }
        MarkSelfCardTypeForPlo(t = !1) {
            if (this.isGamePLO() && -1 !== this.gameDataInstance.tRoomData.i32SelfSeat)
                if (this.gameDataInstance.tRoomData.isSelfFold) {
                    if (t)
                        for (let t = 0; t < this.m_pkPublicCard.length; ++t) {
                            let e = this.m_pkPublicCard[t];
                            e.isActive && e.isFace() && e.setGary(!1)
                        }
                } else {
                    if (!this.m_pkPublicCard[2].isFace() || !this.m_pkPublicCard[2].hasContent()) return;
                    let t = [],
                        e = [],
                        a = this.gameDataInstance.tRoomData.pkRoomParam.game_mode,
                        i = new at(a);
                    this.GetSelfCardType(t, e);
                    for (let t = 0; t < this.m_pkSelfCard.length; ++t) {
                        let e = this.m_pkSelfCard[t];
                        e.isActive && e.isFace() && e.setGary(!0, 127.5)
                    }
                    for (let e = 0; e < t.length; ++e) {
                        i.initWithNumber(t[e]);
                        for (let t = 0; t < this.m_pkSelfCard.length; ++t) {
                            let e = this.m_pkSelfCard[t],
                                n = at.getLocalValue(e.eCardNum, a),
                                o = e.eCardSuit;
                            if (i.value === n && i.color === o) {
                                e.setGary(!1);
                                break
                            }
                        }
                    }
                    this.setGaryForPublicCards(e)
                }
        }
        setGaryForPublicCards(t, e = 0) {
            let a = this.gameDataInstance.tRoomData.pkRoomParam.game_mode,
                i = new at(a);
            this.scheduleOnce((() => {
                for (let t = 0; t < this.m_pkPublicCard.length; ++t) {
                    let e = this.m_pkPublicCard[t];
                    e && e.isActive && e.isFace() && e.setGary(!0, 127.5)
                }
                for (let e = 0; e < t.length; ++e) {
                    i.initWithNumber(t[e]);
                    for (let t = 0; t < this.m_pkPublicCard.length; ++t) {
                        let e = this.m_pkPublicCard[t];
                        if (e) {
                            let t = at.getLocalValue(e.eCardNum, a),
                                n = e.eCardSuit;
                            if (i.value === t && i.color === n) {
                                e.setGary(!1);
                                break
                            }
                        }
                    }
                }
            }), e)
        }
        MarkOtherCardTypeForPlo(t) {
            let e = this.getSeatBySeverId(t);
            if (!this.isGamePLO() || !e || !e.isShowDown) return;
            let a = [],
                i = [],
                n = this.gameDataInstance.tRoomData.pkRoomParam.game_mode,
                o = new at(n);
            this.GetOtherCardType(e, a, i);
            let s = new k(255, 235, 0);
            e.setCardTypeCtlInfo(s, q.config.getLanguagePath("game/dzpoker/ui_seaStyle/seat/common_shuzi_di_plo", q.Enum.LANGUAGE_TYPE.zh_CN));
            let l = .15;
            for (let t = 0; t < e.getHandsCardsCount(); ++t) {
                let a = e.getShowCard(t);
                a.isActive && a.isFace() && P(a.rootNode).delay(l).call((() => {
                    a.setGary(!0, 127.5)
                })).start()
            }
            for (let t = 0; t < a.length; ++t) {
                o.initWithNumber(a[t]);
                for (let t = 0; t < e.getHandsCardsCount(); ++t) {
                    let a = e.getShowCard(t),
                        i = at.getLocalValue(a.eCardNum, n),
                        s = a.eCardSuit;
                    if (o.value === i && o.color === s) {
                        P(a.rootNode).delay(l).call((() => {
                            a.setGary(!1)
                        })).delay(l).start();
                        break
                    }
                }
            }
            this.setGaryForPublicCards(i, l)
        }
        hideSelfCardAllInEffect() {}
        leaveTable(t) {
            if (t) {
                t.in_game = !1;
                let a = this.getSeatBySeverId(t.seatid);
                if (a) {
                    if (a.setLeaveCdTime(t.left_stay_time), a.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_leave_a_monment), this.getUserIDData() === t.playerid) {
                        this.backGamePanel.active = !0, this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Null);
                        for (let t = 0; t < this.m_pkSelfCard.length; ++t) this.m_pkSelfCard[t].setActive(!1);
                        this.gaopai.active = !1, this._forceShowColorfulBg = !1, this.updateTableSpriteEffect()
                    }
                    this.gameDataInstance.tRoomData.m_isAllInMode = !1, this.game.updateMenu()
                } else {
                    var e;
                    q.TT.showMsg("can't find Seat:" + t.seatid, q.Enum.ToastType.ToastTypeError, !1, !1, null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene)
                }
            }
        }
        UpdatePots() {
            let t = this.gameDataInstance.tRoomData.pkTableStates.pots.length,
                e = 0;
            for (let a = 0; a < t; ++a) e += this.gameDataInstance.tRoomData.pkTableStates.pots[a].amount;
            t >= 1 ? (this.ShowMainPool(this.gameDataInstance.tRoomData.pkTableStates.pots[0].potid, this.gameDataInstance.tRoomData.pkTableStates.pots[0].amount), this.showSidepool(this.gameDataInstance.tRoomData.pkTableStates.pots), this.mainpool_chips.active = !0, this.mainpool_chips.getComponent(B).opacity = 255, this.onPotChange(this.gameDataInstance.tRoomData.pkTableStates.pots[0].amount)) : (this.setMainPoolText(""), this.onPotChange(0)), this.UpdateDeadPot(e)
        }
        showSidepool(t) {
            if (t.length > 1) {
                this.setEnableWaitingPlayerText(!1), this.HideMainPool(!1), this.removeMainPoolChip();
                const e = Pt.Instance.isLandscapeLayout ? 4 : 3,
                    a = .2;
                let i = [];
                for (let a = 0; a < t.length; a++) {
                    if (a >= this.sidepoolList.length) {
                        console.log("Too many Side Pot.Not Show");
                        break
                    }
                    let n, s = Math.floor(a / e),
                        l = a % e;
                    0 == l ? (n = [], i[s] = n) : l > 0 && l <= 5 && (n = i[s], 0 == n.length && cc_mtt.vv.ConsoleLog.log("[Error] did not have any Node in a row [" + s + "] item of current column index: " + l + ".\n Column Length:" + n.length));
                    let r = this.gameDataInstance.tRoomData.getDataPointValue(q.StringTools.serverGoldToShowNumber(t[a].amount));
                    this._sidePotValue[a] = q.StringTools.serverGoldToShowNumber(t[a].amount);
                    let h = this.sidepoolList[a];
                    h.active = !0, h.parent = this.sidePot.getChildByName("row_" + s), h.position = new p(0, 0, 0), h.getComponent(B).opacity = a < t.length - 1 ? 255 : 0, h.name = t[a].potid.toString(), h.getComponentInChildren(o).string = r, h.getComponent(ae).sidePotDot.active = l > 0, n[l] = h
                }
                for (let e = 0; e < i.length; e++) {
                    const n = i[e],
                        o = n.length;
                    cc_mtt.vv.ConsoleLog.log("ColumnMode: " + o);
                    for (let i = 0; i < n.length; i++) {
                        const s = n[i],
                            l = s.getPosition();
                        s.position = new p(0, 0, 0), l.z = 0, A.stopAllByTarget(s);
                        const r = ne.addOrGetComponent(s, B);
                        if (r.opacity < 255) {
                            const n = () => {
                                P(r).to(a, {
                                    opacity: 255
                                }).tag(t[e * o + i].potid + this.GAME_SIDE_POT_TAG_BEGIN).start(), P(s).to(a, {
                                    position: l
                                }).tag(t[e * o + i].potid + this.GAME_SIDE_POT_TAG_BEGIN).start()
                            };
                            P(this.node).call(n).start()
                        }
                    }
                }
                this.isShowingSidePot = !0, this.HideMainPool(!1)
            } else {
                const t = ne.addOrGetComponent(this.mainpool, B);
                t.opacity < 255 && (A.stopAllByTarget(t), P(t).to(.2, {
                    opacity: 255
                }).start());
                for (let t = 0; t < this.sidepoolList.length; t++) {
                    let e = this.sidepoolList[t];
                    A.stopAllByTarget(e), P(ne.addOrGetComponent(e, B)).to(.2, {
                        opacity: 0
                    }).call((() => {
                        e.active = !1
                    })).start()
                }
            }
        }
        UpdateDeadPot(t) {
            this.gameDataInstance.tGameData.u32DeadPot += t, this._dichiChipValue = q.StringTools.numberToShowNumber(q.StringTools.clientGoldByServer(this.gameDataInstance.tGameData.u32DeadPot));
            let e = q.StringTools.formatC(q.config.getStringData("dichiNum"), this._dichiChipValue);
            this.setTotalPotValue(this.gameDataInstance.tRoomData.getDataPointValue(e)), 0 == this.gameDataInstance.tGameData.u32DeadPot ? this.showDichiChipText(!1) : this.showDichiChipText(!0)
        }
        SetTableInfo() {
            if (this.UpdatePots(), this.gameDataInstance.tRoomData.pkRoomState.isBegin) {
                let t = this.gameDataInstance.tRoomData.pkTableStates.curr_dealer_seatid;
                t !== this._electDealerSeatId && -1 !== this._electDealerSeatId && (t = this._electDealerSeatId), this.DrunAction(t)
            } else this.HideMainPool();
            for (let t = 0; t < 5; ++t) this.m_pkPublicCard[t].setFace(!1), this.m_pkPublicCard[t].setActive(!1);
            this.showWinnerCombination(!1);
            for (let t = 0; t < this.gameDataInstance.tRoomData.pkTableStates.public_card.length; ++t) {
                this.m_pkPublicCard[t].setFace(!0);
                let e = this.gameDataInstance.tRoomData.pkTableStates.public_card[t];
                this.QueckShowPublicCard(t, e.number, e.suit), this.DealDown()
            }
        }
        setSeatInfo(t) {
            if (t) {
                let a = this.getSeatBySeverId(t.seatid);
                if (a) {
                    if (a.showChipsNow(t.round_bet), t.playerid == this.getUserIDData()) {
                        if (t.in_game) {
                            a.hideTips();
                            const e = q.appConfig.isLandscapeLayout ? this.CARD_SCALE_ON_DEAL_LANDSCAPE : this.CARD_SCALE_ON_DEAL_MOBILE,
                                i = this.CARD_SCALE_PRE_OPEN;
                            for (let n = 0; n < t.cards.length; ++n) {
                                let o = t.cards[n];
                                const s = a.getSrcCardScale(n);
                                this.m_pkSelfCard[n].setCardScaleOnDeal(e * s, i * s);
                                const l = a.getSrcShowCardScale(n);
                                this.m_pkSelfCard[n].setCardScaleOnOpen(l), this.m_pkSelfCard[n].setActive(!0), this.m_pkSelfCard[n].setContent(o.number, o.suit), this.m_pkSelfCard[n].setFace(!(256 === q.Number(o.number))), this.m_pkSelfCard[n].setHighLight(!1), this.m_pkSelfCard[n].setGary(!1), this.m_pkSelfCard[n].resetPos(), this.m_pkSelfCard[n].setEye(this.m_pkSelfCard[n].isEye()), this.m_pkSelfCard[n].finishOpenCard(!0), this.m_pkSelfCard[n].setOp(!1)
                            }
                            this.DealDown()
                        }
                    } else if (t.in_game)
                        if (a.hideTips(), t.last_action != q.Enum.ActionType.Enum_Action_Fold) {
                            for (let t = 0; t < a.getHandsCardsCount(); ++t) a.getCard(t).setActive(!0);
                            for (let e = 0; e < t.cards.length; ++e) {
                                let i = t.cards[e];
                                a.getShowCard(e).setContent(i.number, i.suit)
                            }
                        } else
                            for (let t = 0; t < a.getHandsCardsCount(); ++t) a.getCard(t).setActive(!1);
                    else t.inStay || a.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_waiting);
                    switch (t.playerid == this.getUserIDData() && console.log(t.last_action), t.last_action == q.Enum.ActionType.Enum_Action_Allin && this.addAllinPlayerWinRate(t), t.last_action) {
                        case q.Enum.ActionType.Enum_Action_Null:
                            console.log(t.inStay), console.log(t.in_game), console.log(t.isGameEnd), t.inStay || !t.in_game && !t.isGameEnd || a.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_actionType, q.Enum.ActionType.Enum_Action_Null);
                            break;
                        case q.Enum.ActionType.Enum_Action_AddActionTime:
                            a.stopBlink(), t.playerid != this.getUserIDData() && a.showAddTimeAction(), !t.inStay && t.in_game && a.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_actionType, q.Enum.ActionType.Enum_Action_Null);
                            break;
                        case q.Enum.ActionType.Enum_Action_Check:
                            a.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_actionType, q.Enum.ActionType.Enum_Action_Check);
                            break;
                        case q.Enum.ActionType.Enum_Action_Fold:
                            if (a.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_actionType, q.Enum.ActionType.Enum_Action_Fold), t.playerid == this.getUserIDData())
                                if (this.gameDataInstance.tRoomData.m_isAllInMode = !1, t.isGameEnd || (this.gameDataInstance.tRoomData.isSelfFold = !0), this.game.updateMenu(), this._isFistLoadSnapshot && this.m_pkSelfCard[0] && !this.m_pkSelfCard[0].isAnimating) this.SelfFoldAnim();
                                else
                                    for (let t = 0; t < this.m_pkSelfCard.length; ++t) this.m_pkSelfCard[t].setGary(!0), q.appConfig.isLandscapeLayout || this.m_pkSelfCard[t].isAnimating || this.m_pkSelfCard[t].reShowCardAfterFold();
                            break;
                        case q.Enum.ActionType.Enum_Action_Call:
                            a.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_actionType, q.Enum.ActionType.Enum_Action_Call);
                            break;
                        case q.Enum.ActionType.Enum_Action_Bet:
                            a.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_actionType, q.Enum.ActionType.Enum_Action_Bet);
                            break;
                        case q.Enum.ActionType.Enum_Action_Raise:
                            a.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_actionType, q.Enum.ActionType.Enum_Action_Raise);
                            break;
                        case q.Enum.ActionType.Enum_Action_Allin:
                            a.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_actionType, q.Enum.ActionType.Enum_Action_Allin);
                            break;
                        case q.Enum.ActionType.Enum_Action_Straddle:
                            a.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_actionType, q.Enum.ActionType.Enum_Action_Straddle);
                            break;
                        case q.Enum.ActionType.Enum_Action_Post:
                            a.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_inGame_actionType, q.Enum.ActionType.Enum_Action_Post)
                    }
                } else {
                    var e;
                    q.TT.showMsg("can't find Seat:" + t.seatid, q.Enum.ToastType.ToastTypeError, !1, !1, null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene)
                }
            }
        }
        showSelfCardAllInEffect() {}
        QueckShowPublicCard(t, e, a) {
            t >= 0 && t <= 4 && (this.m_pkPublicCard[t].setContent(e, a), this.m_pkPublicCard[t].setFace(!0), this.m_pkPublicCard[t].setActive(!0), this.m_pkPublicCard[t].node.setPosition(this.getPublicCardPosition(t)), this.m_pkPublicCard[t].resetPos())
        }
        showSelfCardType() {
            let t = !0;
            for (let e = 0; e < this.m_pkSelfCard.length; ++e) {
                let a = this.m_pkSelfCard[e];
                if (!a.isActive || !a.isFace()) {
                    t = !1;
                    break
                }
            }
            t && -1 != this.gameDataInstance.tRoomData.i32SelfSeat && q.appConfig.getGameConfig().enableHandStrenght ? (this.gaopai.active = !0, this.setUserCardResultText(this.GetSelfCardType())) : this.gaopai.active = !1
        }
        scheduleRecoverDealDown() {
            this.recoverDealDownCallback = () => this.recoverDealDown(), this.scheduleOnce(this.recoverDealDownCallback, 1)
        }
        unscheduleRecoverDealDown() {
            null !== this.recoverDealDownCallback && (this.unschedule(this.recoverDealDownCallback), this.recoverDealDownCallback = null)
        }
        recoverDealDown() {
            this.showSelfCardType()
        }
        DealDown() {
            this.unscheduleRecoverDealDown(), this.showSelfCardType(), this.MarkSelfCardTypeForPlo();
            for (let t = 0; t < this.m_pkPublicCard.length; ++t) C(this.m_pkPublicCard[t].node) && this.m_pkPublicCard[t].node.active && (this.m_pkPublicCard[t].resetPos(), this.m_pkPublicCard[t].setFace(!0), this.m_pkPublicCard[t].setOp(!1));
            for (let t = 0; t < this.seatList.length; ++t) {
                let e = this.getSeatBySeverId(t);
                e.isShowDown && e.showCardType(this.GetOtherCardType(e))
            }
        }
        GetOtherCardType(t, e, a) {
            let i = [],
                n = [],
                o = this.gameDataInstance.tRoomData.pkRoomParam.game_mode,
                s = "";
            for (let e = 0; e < t.getHandsCardsCount(); ++e)
                if (t.getShowCard(e).isActive) {
                    let a = t.getShowCard(e).eCardNum,
                        n = t.getShowCard(e).eCardSuit,
                        s = new at(o);
                    s.initWhitValue(at.getLocalValue(a, o), n, o), i.push(s.getNumber(o))
                } for (let t = 0; t < this.m_pkPublicCard.length; ++t)
                if (this.m_pkPublicCard[t] && C(this.m_pkPublicCard[t].node, !0) && this.m_pkPublicCard[t].node.active) {
                    let e = this.m_pkPublicCard[t].eCardNum,
                        a = this.m_pkPublicCard[t].eCardSuit,
                        i = new at(o);
                    i.initWhitValue(at.getLocalValue(e, o), a, o), n.push(i.getNumber(o))
                } return s = this.isGamePLO() ? at.getPokerTypeString(i, n, o, 2, 3, e, a) : at.getPokerTypeString(i, n, o), s
        }
        recetAllSeats() {
            let t = this.seatList.length;
            for (let e = 0; e < t; e++) this.seatList[e].updateSeatStatus(q.Enum.SeatStatus.SeatStatus_empty);
            this.gameDataInstance.tRoomData.i32SelfSeat = -1, this._isSeat = !1, this.updateTableSpriteEffect()
        }
        setSliderBg(t) {
            let e = t > 0;
            this.freeSliderContainer && (this.freeSliderContainer.active = e), e && (this.addTime_button.active = !1)
        }
        enableSlider(t) {
            this.sliderBg.active = t
        }
        setFreeSliderProgress(t) {
            this.freeSlider.progress = t, this.freeSliderProgressBar && (this.freeSliderProgressBar.progress = t)
        }
        setFreeSliderNodeOpacity(t) {}
        setFreeSliderNodeAcive(t) {
            this.freeSlider.node.active = t
        }
        setFreeSliderTextNodeAcive(t) {
            this.freeSliderText.node.active = t
        }
        setFreeSliderTextBgNodeAcive(t) {
            this.freeSliderText_bg.active = t
        }
        setFreeSliderPercentImgNodeAcive(t) {}
        getActionButtonStatus() {
            let t = 0;
            return this.actionButtonView.activeInHierarchy || (t = 1), this.freeFill_button.node.activeInHierarchy || this.giveUpRed.node.activeInHierarchy || this.followFill_Blue.node.activeInHierarchy || (t += 2), t
        }
        setControlButtonStatus(t) {
            if (C(this)) {
                switch (this.callStackOfPreSetControlBtn = this.callStackOfSetControlBtn, this.callStackOfSetControlBtn = (new Error).stack, this.preActionButtonStatus = this.actionButtonStatus, this.actionButtonStatus = t, cc_mtt.vv.ConsoleLog.log("setControlButtonStatus:::" + t), this.setActionButtonsView(!0), this.addTime_button.active = !0, this.markNode(this.freeFill_button_img, "midBigButton"), this.freeFill_button.interactable = !0, this.freeFill_button.node.setSiblingIndex(102), this.freeFill_button_img.setSiblingIndex(102), this.enableSlider(!0), this.setFreeSliderNodeOpacity(0), this.setSliderBg(0), this.setActionButtonsView2(!0), this.setFreeSliderTextNodeAcive(!1), this.setFreeSliderTextBgNodeAcive(!1), this.setFreeSliderProgress(0), this.sliderAllin.active = !1, this.setFreeSliderPercentImgNodeAcive(!1), this.onclickSliderDown && (this.onclickSliderDown = !1), t) {
                    case q.Enum.ActionButtonStatus.Control_Bet:
                        this.markNode(this.followFill_Blue.node, "checkImg"), this.markNode(this.giveUpRed.node, "giveUpImg"), this.followFill_text.node.active = !1, this.freeFill_button.node.active = !0, this.freeFill_button_img.active = !0, this.setBetBtnsVisible(!0), this.SetExtraBetBtnVisible(!0), this.hitback_left.active = !1, this.hitback_upper_left.active = !1, this.hitback_upper_right.active = !1, -1 != this.gameDataInstance.tRoomData.i32SelfSeat ? this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat).onlyShowChouma() : this.getSeatBySeatViewId(0).onlyShowChouma();
                        break;
                    case q.Enum.ActionButtonStatus.Control_Raise:
                        this.markNode(this.followFill_Blue.node, "callImg"), this.markNode(this.giveUpRed.node, "giveUpImg"), this.followFill_text.node.active = !0, this.freeFill_button.node.active = !0, this.freeFill_button_img.active = !0, this.setBetBtnsVisible(!0), this.SetExtraBetBtnVisible(!0), this.hitback_left.active = !1, this.hitback_upper_left.active = !1, this.hitback_upper_right.active = !1, -1 != this.gameDataInstance.tRoomData.i32SelfSeat ? this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat).onlyShowChouma() : this.getSeatBySeatViewId(0).onlyShowChouma();
                        break;
                    case q.Enum.ActionButtonStatus.Control_AllIn:
                        this.markNode(this.followFill_Blue.node, "midSmallButton"), this.markNode(this.giveUpRed.node, "giveUpImg"), this.followFill_Blue.node.active = !0, this.followFill_text.node.active = !1, this.setFollowFillText(0), this.freeFill_button.node.active = !1, this.freeFill_button_img.active = !1, this.setBetBtnsVisible(!1), this.SetExtraBetBtnVisible(!1), this.enableSlider(!1), -1 != this.gameDataInstance.tRoomData.i32SelfSeat && this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat).setSitDownView();
                        break;
                    case q.Enum.ActionButtonStatus.Control_Just_Call:
                        this.enableSlider(!1), this.markNode(this.followFill_Blue.node, "callImg"), this.markNode(this.giveUpRed.node, "giveUpImg"), this.followFill_text.node.active = !0, this.setBetBtnsVisible(!1), this.SetExtraBetBtnVisible(!1), this.freeFill_button.node.active = !1, this.freeFill_button_img.active = !1, -1 != this.gameDataInstance.tRoomData.i32SelfSeat && this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat).setSitDownView();
                        break;
                    case q.Enum.ActionButtonStatus.Control_Default_fallOrCheck:
                        this.enableSlider(!1), this.giveUp_buttonIsCheck ? this.markNode(this.giveUpRed.node, "giveUpLookImg") : this.markNode(this.giveUpRed.node, this.isZoom() ? "quickFoldGrayImg" : "giveUpLookGrayImg"), this.followFill_buttonIsCheck ? this.markNode(this.followFill_Blue.node, "checkImg") : this.markNode(this.followFill_Blue.node, "checkGrayImg"), this.setBetBtnsVisible(!1), this.SetExtraBetBtnVisible(!1), this.freeFill_button.node.active = !1, this.freeFill_button_img.active = !1, this.followFill_text.node.active = !1, this.addTime_button.active = !1, this.hideThankCD(), this.USE_DEBUG_AUTO_PLAY && (this.unschedule(this.giveUpCallBack), this.schedule(this.giveUpCallBack, 2)), -1 != this.gameDataInstance.tRoomData.i32SelfSeat && this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat).setSitDownView();
                        break;
                    case q.Enum.ActionButtonStatus.Control_Default_Call:
                        this.enableSlider(!1), this.giveUp_buttonIsCheck ? this.markNode(this.giveUpRed.node, "giveUpImg") : this.markNode(this.giveUpRed.node, this.isZoom() ? "quickFoldGrayImg" : "giveUpGrayImg"), this.followFill_buttonIsCheck ? this.markNode(this.followFill_Blue.node, "callImg") : this.markNode(this.followFill_Blue.node, "callGrayImg"), this.setBetBtnsVisible(!1), this.SetExtraBetBtnVisible(!1), this.freeFill_button.node.active = !1, this.freeFill_button_img.active = !1, this.followFill_text.node.active = !0, this.addTime_button.active = !1, this.hideThankCD(), -1 != this.gameDataInstance.tRoomData.i32SelfSeat && this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat).setSitDownView();
                        break;
                    case q.Enum.ActionButtonStatus.Control_add_AllIn:
                        this.enableSlider(!1), this.setBetBtnsVisible(!1), this.SetExtraBetBtnVisible(!1), this.freeFill_button.node.active = !0, this.freeFill_button_img.active = !0, this.freeFill_button.interactable = !0, this.markNode(this.freeFill_button_img, "midSmallButton"), this.hideThankCD(), -1 != this.gameDataInstance.tRoomData.i32SelfSeat ? this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat).onlyShowChouma() : this.getSeatBySeatViewId(0).onlyShowChouma();
                        break;
                    case q.Enum.ActionButtonStatus.Control_AllInOrFold:
                        this.enableSlider(!1), this.giveUp_buttonIsCheck ? this.markNode(this.giveUpRed.node, "giveUpImg") : this.markNode(this.giveUpRed.node, this.isZoom() ? "quickFoldGrayImg" : "giveUpGrayImg"), this.followFill_buttonIsCheck ? this.markNode(this.followFill_Blue.node, "allInImg") : this.markNode(this.followFill_Blue.node, "allInGrayImg"), this.setBetBtnsVisible(!1), this.SetExtraBetBtnVisible(!1), this.freeFill_button.node.active = !1, this.freeFill_button_img.active = !1, this.followFill_text.node.active = !1, this.hideThankCD(), -1 != this.gameDataInstance.tRoomData.i32SelfSeat && this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat).setSitDownView();
                        break;
                    case q.Enum.ActionButtonStatus.Control_Null:
                        this.giveUp_buttonIsCheck = !1, this.followFill_buttonIsCheck = !1, this.setActionButtonsView(!1), this.setActionButtonsView2(!1), this.addTime_button.active = !1, this.enableSlider(!1), -1 != this.gameDataInstance.tRoomData.i32SelfSeat && this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat).setSitDownView(), this.hideThankCD()
                }
                this.checkLabelTruncatedAndLogToNR(this.buttonCheckText), this.checkLabelTruncatedAndLogToNR(this.buttonFoldText), this.checkLabelTruncatedAndLogToNR(this.followFill_text)
            }
        }
        hideThankCD() {
            let t = this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat);
            t && t.stopCDtime()
        }
        getSeatBySeatViewId(t) {
            let e = this.seatList.length;
            for (let a = 0; a < e; a++)
                if (this.seatList[a].getSeatViewId() == t) return this.seatList[a];
            return null
        }
        convertUiIndexToBetButonIndex(t) {
            return t
        }
        onSettingBetValueChanged(t) {
            t && this.setBetBtnText(t.Index, t.value, t.is3ButtonMode, t.isMaxMode)
        }
        setBetBtnText(t, e, a, i) {
            switch (i || -1 === e.indexOf("/") && -1 === e.indexOf("%") && (e = Math.round(100 * parseFloat(e)) + "%"), t = this.convertUiIndexToBetButonIndex(t)) {
                case 0:
                    this.dichi_button0.node.getChildByName("dichi_text0").getComponent(o).string = e, this.updateBetBtnValue(0, a);
                    break;
                case 1:
                    this.dichi_button1.node.getChildByName("dichi_text1").getComponent(o).string = e, this.updateBetBtnValue(1, a);
                    break;
                case 2:
                    this.dichi_button2.node.getChildByName("dichi_text2").getComponent(o).string = e, this.updateBetBtnValue(2, a);
                    break;
                case 3:
                    this.dichi_button3.node.getChildByName("dichi_text3").getComponent(o).string = e, this.updateBetBtnValue(3, a);
                    break;
                case 4:
                    this.dichi_button4.node.getChildByName("dichi_text4").getComponent(o).string = e, this.updateBetBtnValue(4, a)
            }
        }
        isInitializedBetButtons() {
            return this._initializedBetButtonsFlag
        }
        initBetButtonsText(t, e) {
            this._initializedBetButtonsFlag = !0, t.forEach((t => {
                this.setBetBtnText(t.index, t.betPercentStr, e, !1)
            }))
        }
        updateBetBtnValue(t, e) {
            this.gameDataInstance = xt.getInstance(this.node).gameData, this.gameDataInstance.tGameData.m_bIsOnSelfAction && t >= 0 && t <= 4 && (t < 3 || !e) && this.setDiChiBtnText(t, this.gameDataInstance.tGameData.u32DeadPot, this.gameDataInstance.tGameData.m_u32NeedCall, this.gameDataInstance.tGameData.m_u32GreatestBet)
        }
        setBetBtnsVisible(t) {
            this.dichi_button0.node.active = t, this.dichi_button1.node.active = t, this.dichi_button2.node.active = t, this.dichi_button3.node.active = t, this.allInDichi && (this.allInDichi.node.active = t), this.dichiButtonContainer.active = t
        }
        SetExtraBetBtnVisible(t) {
            var e;
            null != (e = this.getChangeCard()) && e.isButton3 ? (this.dichi_button3.node.active = !1, this.dichi_button4.node.active = !1) : (this.dichi_button3.node.active = t, this.dichi_button4.node.active = !1)
        }
        showReplay(t) {
            this.roomHasEnd
        }
        showAudit(t) {
            if (t.gameData) {
                if (xt.isInvalidGameDataMultiWindow(this.gameDataInstance, t.gameData)) return
            } else if (xt.isInvalidRoomUuidMultiWindow(t.room_uuid_js, this.gameDataInstance, t.game_uuid_js)) return;
            let e = this.gameSceneInstance.gameNode,
                a = Q.getSinglePrefabInst(this.prefab_report, this.gameSceneInstance);
            if (C(a))
                if (t.value) {
                    a.getComponent(Q).autoShow(e, this.gameSceneInstance, null, q.Enum.ZORDER_TYPE.ZORDER_TOP)
                } else {
                    a.getComponent(Q).autoHide()
                }
        }
        setShowAudit(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || (this._isShowAudit = t.msg, this.game.allreview_panel && this.game.allreview_panel.getComponent(j).setShowAudit(this._isShowAudit))
        }
        showDelay(t) {}
        onSitDownSucc(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let e = this.gameDataInstance.tRoomData.GetTablePlayer(t.playerid);
            if (this.playerSitDown(e, !0), this.isGameStarSeat()) {
                var a;
                q.gameNet.requestOpenLiveReq(null == (a = this.gameDataInstance) || null == (a = a.tRoomData) ? void 0 : a.u32RoomId, 1), this.setSeatViewStyle();
                let t = this.getSeatByUid(e.playerid);
                t && 1 == t.getData().identity && (t.playSitDownAction(), e.playerid == this.getUserIDData() && (1 == e.liveStatus && St.enableLocalVideo(!0), 1 == e.mikeMode && St.enableLocalAudio(!0)))
            }
            this.setEnableWaitingPlayerText(this.isWaitingPlayers(t.gameData)), q.MessageCenter.send(q.Enum.MessageCenterAction.onSitDownSucc, t.gameData)
        }
        updateEmptySeats() {
            let t = this.seatList.length,
                e = this.gameDataInstance.tRoomData.i32SelfSeat < 0;
            for (let a = 0; a < t; a++) {
                let t = this.seatList[a];
                t.isSeatEmpty() ? t.showSeat(e) : t.showSeat(!0)
            }
        }
        playerSitDown(t, e = !1) {
            if (t) {
                let n = t.seatid,
                    o = t.playerid;
                if (o === this.getUserIDData() && (this.gameDataInstance.tRoomData.i32SelfSeat = n, this.gameDataInstance.tRoomData.u32PrePickSeatId = -1, this.face_button.active = this.isShowFaceBtn(), this.emoji_button.active = this.isShowFullscreenEmojiBtn(), this.setFaceBtnEnabled(!0), this.setFullscreenEmojiBtnEnabled(!0), this.setRecordEnabled(!0), this.isZoom() && (this.setWaitAction(!t.in_game), !t.in_game))) {
                    $t.end("LastPaceTable") < 1e4 && this.startTrackingNextPaceTable()
                }
                let s = this.getSeatBySeverId(n);
                if (s) {
                    if (o === this.getUserIDData()) {
                        var a;
                        if (this.gameDataInstance.tRoomData.isBuyin = !0, this.setShowAudit({
                                msg: !0,
                                gameData: this.gameDataInstance
                            }), this._isSeat = !0, this.updateTableSpriteEffect(), this.turnSeat(s.getSeatViewId(), e), !q.dataHandler.getUserData().m_bIsReconnect && !this.m_bIsInit)
                            if (1 === this.gameDataInstance.tRoomData.pkRoomParam.rule_switch_random_seat) q.TT.showMsg(q.config.getStringData("ErrorToast23"), q.Enum.ToastType.ToastTypeInfo, !1, !1, null == (a = this.gameSceneInstance) || null == (a = a.room) ? void 0 : a.gameScene);
                        if (q.dataHandler.getUserData().m_bIsReconnect = !1, this.m_u32DelayTimeCount = 0, this.gameDataInstance.tRoomData.pkPayMoneyItem.actionCount < 9 && 0 != this.gameDataInstance.tRoomData.pkPayMoneyItem.actionDelayCountsFee.length) {
                            let t = this.gameDataInstance.tRoomData.pkPayMoneyItem.actionDelayCountsFee[this.gameDataInstance.tRoomData.pkPayMoneyItem.actionCount];
                            const e = this.gameDataInstance.tRoomData.neededFeeAsPerCurrency(t);
                            this.setAddTimeValue(e)
                        }
                    }
                    s.setData(t), s.setSeatViewId(s.getSeatViewId(), this.gameDataInstance.tRoomData.pkRoomParam.player_count_max), s.updateSeatStatus(q.Enum.SeatStatus.SeatStatus_waiting, q.Enum.ActionType.Enum_Action_Null), s.updateStyle(), o == this.getUserIDData() && this.isZoom() && this.updataSeatAction(!1), this.initGiftStarInfo(t, !0)
                } else {
                    var i;
                    if (this.seatList.length > 0) q.TT.showMsg("can't find Seat(" + n + ")", q.Enum.ToastType.ToastTypeError, !1, !1, null == (i = this.gameSceneInstance) || null == (i = i.room) ? void 0 : i.gameScene)
                }
                this.updateEmptySeats()
            }
        }
        turnSeat(t, e) {
            if (this.game.gameSeatIsTurning) return;
            this.trunIngSeatViewId = t;
            let a = (this.seatList.length + 1) / 2;
            0 != this.trunIngSeatViewId ? (this.trunIngSeatViewId >= a ? this.isRight = !0 : this.isRight = !1, e && !this.isZoom() ? (this.modal_panel.active = !0, this.game.gameSeatIsTurning = !0, this.startTurning()) : this.startTurningWithNoAction()) : -1 == this.gameDataInstance.tRoomData.i32SelfSeat ? this.turnEndStandup() : this.turnEndSitDown()
        }
        startTurning(t = .2) {
            let e = this.seatList.length;
            this.isTurnSeat = !0, this._turnSeatTime = t;
            for (let a = 0; a < e; a++) {
                let i, n = this.seatList[a],
                    o = n.getSeatViewId();
                i = this.isRight ? o + 1 == e ? 0 : o + 1 : o - 1 == -1 ? e - 1 : o - 1, A.stopAllByTarget(n.node), a == e - 1 ? (P(n.node).to(t, {
                    position: this.getSeatPosition(e, i)
                }).call(this.turnIngCallBack.bind(this)).start(), n.setSeatViewId(i, e)) : (P(n.node).to(t, {
                    position: this.getSeatPosition(e, i)
                }).start(), n.setSeatViewId(i, e))
            }
            this.unschedule(this.onTurningDidNotStartCallback), this.scheduleOnce(this.onTurningDidNotStartCallback, t + .3)
        }
        resetSeatsPosition() {
            let t = this.seatList.length;
            for (let e = 0; e < t; e++) {
                const a = this.seatList[e],
                    i = a.getSeatViewId();
                a.node.position = this.getSeatPosition(t, i), null == a || a.initChoumaPosition()
            }
        }
        onTurningDidNotStartCallback() {
            var t;
            null == (t = Lt.getInstance()) || t.traceEvent(Ot.SelfCardPlacedWrongPosition, "DidNotCallbackAfterTurnSeat"), this.resetSeatsPosition(), this.turnIngCallBack(), -1 !== this.gameDataInstance.tRoomData.i32SelfSeat && this.initSelfCardPosition(this.getCardLen())
        }
        resetWhenTurningEnd() {
            this.game.gameSeatIsTurning = !1, this.modal_panel.active = !1, this.turnEndSitDown(), this.gameDataInstance.tRoomData.pkRoomState.isBegin && this.DrunAction(this.gameDataInstance.tGameData.i32DealerSId)
        }
        turnIngCallBack() {
            let t = this.seatList.length;
            this.unschedule(this.onTurningDidNotStartCallback), this.isRight ? (this.trunIngSeatViewId += 1, this.trunIngSeatViewId < t ? this.startTurning() : this.resetWhenTurningEnd()) : (this.trunIngSeatViewId -= 1, this.trunIngSeatViewId > 0 ? this.startTurning() : this.resetWhenTurningEnd())
        }
        getDealIconPosition(t) {
            let e, a = !Pt.Instance.isLandscapeLayout;
            if (e = a && t.isSelfSeat() ? this.getSelfDealIconPosition() : this.tablePositions.getDealIconPosition(this.roomPlayerNumber, t.getSeatViewId()), a && t.getData() && 1 == t.getData().liveStatus) {
                let a = t.isFLip ? 25 : -25,
                    i = 50;
                e.x += a, e.y += i
            }
            if (a && !t.isSelfSeat()) {
                const a = -57;
                let i = 112;
                e.y = t.node.getComponent(b).convertToWorldSpaceAR(I(0, 0, 0)).y + a, (t.SeatViewId > t.playerLength / 2 || 0 == t.SeatViewId) && (i = -i), e.x = t.node.getComponent(b).convertToWorldSpaceAR(I(0, 0, 0)).x + i
            }
            return e
        }
        getSelfDealIconPosition() {
            return this.card_panel.getComponent(b).convertToWorldSpaceAR(new p(120, -70, 0))
        }
        DrunAction(t, e = .2) {
            let a = this.getSeatBySeverId(t);
            if (a) {
                let t, i = this.getDealIconPosition(a);
                if (this.D_img.active = !0, A.stopAllByTarget(this.D_img), Pt.Instance.isLandscapeLayout) {
                    const a = this.D_img.parent.getComponent(b).convertToNodeSpaceAR(i);
                    t = P(this.D_img).to(e, {
                        position: a
                    })
                } else {
                    const n = this.card_panel.getComponent(b).convertToNodeSpaceAR(i);
                    this.D_img.setParent(this.card_panel);
                    let o = a.getDealerContainer(),
                        s = o.getComponent(b).convertToNodeSpaceAR(i),
                        l = this.D_img,
                        r = () => {
                            C(l, !0) && (l.setParent(o), l.setPosition(s))
                        };
                    t = P(this.D_img).to(e, {
                        position: n
                    }).call(r)
                }
                t.start()
            }
        }
        startTurningWithNoAction() {
            let t = this.seatList.length,
                e = 0;
            for (let a = 0; a < t; a++) {
                let i, n = this.seatList[a].getSeatViewId();
                this.isRight ? (e = t - this.trunIngSeatViewId, i = n + e >= t ? n + e - t : n + e) : (e = this.trunIngSeatViewId, i = n - e <= -1 ? t + n - e : n - e), this.game.gameSeatIsTurning = !1, A.stopAllByTarget(this.seatList[a].node), this.seatList[a].node.setPosition(this.getSeatPosition(t, i)), this.seatList[a].setSeatViewId(i, t)
            } - 1 == this.gameDataInstance.tRoomData.i32SelfSeat ? this.turnEndStandup() : this.turnEndSitDown(), this.unschedule(this.onTurningDidNotStartCallback)
        }
        turnEndSitDown() {
            this.isTurnSeat = !1, this.record_button.active = this.isShowRecord();
            let t = this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat);
            t && (this._isSeat = !0, this.selectSelfSeat(t), this.updateTableSpriteEffect());
            let e = this.seatList.length;
            for (let t = 0; t < e; t++) this.seatList[t].OnUpdate_remarks(), this.seatList[t].setSeatViewId(this.seatList[t].getSeatViewId(), this.roomPlayerNumber);
            let a = this.currentGameId;
            (a == q.Enum.GameId.Bet || a == q.Enum.GameId.Texas && this.gameDataInstance.tRoomData.pkRoomParam.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Short && this.gameDataInstance.tRoomData.pkRoomParam.auto_withdraw) && this.autoBuyinEff();
            let i = this.getCardLen();
            this.initSelfCardPosition(i), this.updateGiftSmallIconStatus(), t && this.checkUserSeatChipStackPosition(t, this.seatList.length)
        }
        checkUserSeatChipStackPosition(t, e) {
            if (t) {
                let i = t.chouma.node.getPosition(),
                    n = t.getSeatChoumaPosition();
                if (Math.abs(n.x - i.x) >= 10 || Math.abs(n.y - i.y) > 10) {
                    var a;
                    const t = {
                        tableMaxPos: e,
                        posChip: i.toString(),
                        calculatedPosChip: n.toString(),
                        stackTrace: Lt.getTrace(0, 10)
                    };
                    null == (a = Lt.getInstance()) || a.traceEvent(Ot.CashGameIssues, "ChipNode position wrong", t)
                }
            }
        }
        getSeatBySeverId(t) {
            if (!this.seatList) return null;
            let e = this.seatList.length;
            for (let a = 0; a < e; a++)
                if (this.seatList[a].getSeverId() == t) return this.seatList[a];
            return null
        }
        setTableName() {
            let t = "";
            if (this.isGameStarSeat()) {
                var e = this.gameDataInstance.tRoomData.pkRoomParam.tableTitle.split("#");
                t = e[q.config.getCurrentLanguageDetails().index] || e[1]
            } else t = this.gameDataInstance.tRoomData.pkRoomParam.game_name;
            if (this.gameDataInstance.tRoomData.pkRoomParam.manual_created) this.getPokerNameTextNode().getComponent(o).string = t;
            else {
                let e = q.tools.displayChineseName(t);
                this.getPokerNameTextNode().getComponent(o).string = e
            }
        }
        setShortPai() {
            let t, e = yt.NLHE;
            var a;
            this.gameDataInstance.tRoomData.pkRoomParam.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Short ? (t = this.isZoom() ? "WordPanel_button_panel_dezhou_zoomShortbutton" : "MainScene_Scene_gameType_panel_button2_text", e = yt.SD) : this.isZoom() ? t = "MainScene_Scene_gameType_panel_button5_text" : (null == (a = this.gameSceneInstance) || null == (a = a.room) ? void 0 : a.getCurrentGameID()) == q.Enum.GameId.Bet ? (t = "MainScene_Scene_gameType_panel_button4_text", e = yt.SPLASH) : this.isGamePLO() ? (t = "MainScene_Scene_gameType_panel_button8_text", e = yt.PLO) : t = "MainScene_Scene_gameType_panel_button1_text";
            this.gameTypeText.string = q.config.getStringData(t), this.gameTypeText.string = q.tools.updateGameType(this.gameTypeText.string), this.gameTypeText.node.active = !0, q.resMgr.loadSprite("Textures/gameTypeIcon/" + e.toString(), [this.short_pai.getComponent(h)], null, null, !0), this.short_pai.active = !0
        }
        setRoomData() {
            let t;
            this.setShortPai(), this.setTableName();
            let e = q.StringTools.clientGoldByServer(this.gameDataInstance.tRoomData.pkRoomParam.rule_ante_amount);
            const a = this.gameDataInstance.tRoomData.pkRoomParam.is_associated_jackpot && q.appConfig.getGameConfig().enableJackPot;
            q.StatusView.updateSystemTimePos(a), this.showJackPotNumPanel(a);
            const i = this._isSpectatorReveal() ? this.gameDataInstance.tRoomData.pkPayMoneyItem.showCardCountsSpectatorFee : this.gameDataInstance.tRoomData.pkPayMoneyItem.showCardCountsFee,
                n = this._isSpectatorReveal() ? this.gameDataInstance.tRoomData.pkPayMoneyItem.spectatorShowCardCount + 1 : this.gameDataInstance.tRoomData.pkPayMoneyItem.showCardCount + 1;
            let o = i.length;
            if (o > 1)
                for (let t = 0; t < o; t++)
                    if (i[t].startCount <= n && n + 1 <= i[t].endCount) {
                        const e = this.gameDataInstance.tRoomData.neededFeeAsPerCurrency(i[t]);
                        this.updateForceShowCardImageUi(e);
                        break
                    } if (this.gameDataInstance.tRoomData.pkRoomParam.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Normal) {
                t = q.config.getblindString(this.gameDataInstance.tRoomData.pkRoomParam.rule_blind_enum - 1);
                let a = t.split("/"),
                    i = Number(a[1]);
                if (t = q.config.getStringData("UIGameBlind").replace("%s", t), this.gameDataInstance.tRoomData.pkRoomParam.rule_switch_force_straddle) {
                    let e = q.numFix.times(Number(i), 2);
                    t = q.StringTools.formatC("%s/%s", t, e.toString())
                }
                e && (t += q.StringTools.formatC("(%f)", q.StringTools.numberToShowNumber(e)))
            } else if (this.gameDataInstance.tRoomData.pkRoomParam.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Short) {
                t = q.config.getStringData("UIGameAnti").replace("%s", q.StringTools.numberToShowString(e))
            }
            let s = this.showcardDamon_img.getComponent(b).contentSize.width / 2,
                l = s + this.forceShowCard_text.node.getComponent(b).contentSize.width;
            var r;
            (l / 2 > s ? this.forceShowCard_button.getComponent(b).contentSize.width : (this.forceShowCard_button.getComponent(b).contentSize.width, this.forceShowCard_text.node.getComponent(b).contentSize.width), this.setMangZhuText(!0), 0 != this.gameDataInstance.tRoomData.pkRoomParam.club_id) ? this.mangZhu_text.string = t: this.mangZhu_text.string = t + q.config.getStringData("UIGameRoomId").replace("%d", null == (r = this.gameDataInstance) || null == (r = r.tRoomData) ? void 0 : r.u32RoomId.toString());
            this.getUserIDData() == this.gameDataInstance.tRoomData.u32OwnerId ? this.gameDataInstance.tRoomData.pkRoomState.isBegin ? this.setEnableWaitingPlayerText(!1) : (this.setEnableWaitingPlayerText(this.isWaitingPlayers(this.gameDataInstance)), this.gameDataInstance.tRoomData.pkRoomParam.is_mirco) : this.gameDataInstance.tRoomData.pkRoomState.isBegin ? this.setEnableWaitingPlayerText(!1) : this.setEnableWaitingPlayerText(this.isWaitingPlayers(this.gameDataInstance))
        }
        showDissolveCd() {}
        UpdateDissolve() {
            this.dissolveTimeNum -= 1, this.dissolveTimeNum <= 0 ? this.unschedule(this.UpdateDissolve) : this.updateTime()
        }
        updateTime() {}
        resetAction() {
            this.removeMainPoolChip(), this.gameJackPotEventController.resetJackpot()
        }
        removeMainPoolChip() {
            let t = this.findAllPkChips(),
                e = t.length;
            for (let a = 0; a < e; a++) {
                let e = t[a];
                e && e.node.isValid && e.node.destroy()
            }
        }
        resetTable(t = !1) {
            if (A.stopAllByTag(this.GAME_DELAY_RESET_TABLE_TAG), 0 != this.gameDataInstance.tRoomData.pkPayMoneyItem.actionDelayCountsFee.length) {
                this.gameDataInstance.tRoomData.pkPayMoneyItem.actionCount = 0;
                let t = this.gameDataInstance.tRoomData.pkPayMoneyItem.actionDelayCountsFee[0];
                const e = this.gameDataInstance.tRoomData.neededFeeAsPerCurrency(t);
                this.setAddTimeValue(e)
            }
            for (let e = 0; e < this.m_pkSelfCard.length; ++e)
                if (this.m_pkSelfCard[e]) {
                    const a = this.m_pkSelfCard[e],
                        i = () => {
                            a.setFace(!1), a.setGary(!1), a.setActive(!1), a.resetPos(), a.setHighLight(!1), a.setCheck(!1), a.setEye(!1), a.reset()
                        };
                    t ? a.setSelfHideAnimation(i) : i()
                } const e = this.m_pkPublicCard.length;
            for (let a = 0; a < e; ++a) this.m_pkPublicCard[a] && (t ? this.m_pkPublicCard[a].setPublicCardOffAnimation(.033 * (e - a - 1)) : (this.m_pkPublicCard[a].stopSchedulesAndActions(), this.m_pkPublicCard[a].resetPos(), this.m_pkPublicCard[a].setActive(!1), this.m_pkPublicCard[a].setFace(!1), this.m_pkPublicCard[a].setHighLight(!1), this.m_pkPublicCard[a].setGary(!1), this.m_pkPublicCard[a].setOp(!1), this.m_pkPublicCard[a].setCrackAnim(!1), this.m_pkPublicCard[a].reset()));
            this.showWinnerCombination(!1), this._dichiChipValue = 0;
            let a = q.StringTools.formatC(q.config.getStringData("dichiNum"), this._dichiChipValue);
            this.setTotalPotValue(this.gameDataInstance.tRoomData.getDataPointValue(a)), this.HideMainPool(), this.onPotChange(0), this.cardFunTips_text.node.active = !1, this.giveUp_buttonIsCheck = !1, this.followFill_buttonIsCheck = !1, this._electDealerSeatId = -1;
            let i = I(0, 0, 0);
            this.tablePositions.node.getComponent(b).convertToWorldSpaceAR(p.ZERO, i);
            for (let e = 0; e < this.seatList.length; ++e) {
                let a = this.seatList[e];
                a.setActiveCardMask(t), a.setActiveCardMaskTop(!1);
                const n = () => {
                    a.setActiveCardMask(!1)
                };
                for (let e = 0; e < a.getHandsCardsCount(); ++e) {
                    let o = !q.appConfig.isLandscapeLayout && !a.isSelfSeat();
                    const s = a.getCard(e);
                    if (s) {
                        const e = () => {
                            s.setFace(!1), s.reset(), s.resetPos(), s.setDealPos(i), s.setGary(!1), a.hideCard(), a.resetHideCardPos()
                        };
                        o && Nt.instance.changeParentKeepPos(s.node, a.getCardPanel()), t && s.node.active ? s.setHideAnimation((() => {
                            n(), e()
                        })) : e()
                    }
                    const l = a.getShowCard(e);
                    if (l) {
                        const e = () => {
                            l.setFace(!1), l.reset(), l.resetPos(), l.setGary(!1), a.hideShowCard(), a.resetShowCardPos()
                        };
                        o && Nt.instance.changeParentKeepPos(l.node, a.getCardPanel()), t && l.isActive ? l.setSelfHideAnimation((() => {
                            n(), e()
                        })) : e()
                    }
                }
                t || (a.hideCards(), a.resetCardsPos()), a.hideChips(), a.resetActionType(), a.hideCardType(), a.setWinRateStatus(!1), a.getStatus() !== q.Enum.SeatStatus.SeatStatus_leave_a_monment && (null !== a.getData() && a.getData().playerid === this.getUserIDData() && (this.gameDataInstance.tRoomData.m_isAllInMode = !0, this.game.updateMenu()), a.hideTips(), a.hideStatusText(), a.doGray(!1)), a.isShowDown = !1, a.stopCDtime()
            }
            this.gaopai.active = !1, this.record_button.active = this.isShowRecord(), this.resetPointAni()
        }
        addEvent() {
            q.MessageCenter.register("showRoleInfoView", this.showRoleInfo.bind(this), this.node), q.MessageCenter.register("showObRoleInfo", this.showObRoleInfo.bind(this), this.node), q.MessageCenter.register("on_sitdown_succ", this.onSitDownSucc.bind(this), this.node), q.MessageCenter.register("on_need_buyin", this.OnNeedBuyIn.bind(this), this.node), q.MessageCenter.register("on_standup_succ", this.OnStandUpSucc.bind(this), this.node), q.MessageCenter.register("on_resetgame_noti", this.OnResetGame.bind(this), this.node), q.MessageCenter.register("on_game_elect_dealer_noti", this.OnGameElectDealer.bind(this), this.node), q.MessageCenter.register("on_game_blind_noti", this.OnBlind.bind(this), this.node), q.MessageCenter.register("on_game_holecard_noti", this.OnSendHoleCard.bind(this), this.node), q.MessageCenter.register("on_game_notiplayer_holecard_noti", this.OnSendPlayerHoleCard.bind(this), this.node), q.MessageCenter.register("on_game_action_turn_noti", this.OnActionTurn.bind(this), this.node), q.MessageCenter.register("on_back_seat", this.OnBackSeat.bind(this), this.node), q.MessageCenter.register("on_game_action_noti", this.OnPlayerAction.bind(this), this.node), q.MessageCenter.register("on_game_endround_noti", this.OnEndRound.bind(this), this.node), q.MessageCenter.register("on_game_communitycard_noti", this.OnCommunityCard.bind(this), this.node), q.MessageCenter.register("player_show_cards", this.OnPlayerShowCards.bind(this), this.node), q.MessageCenter.register("on_waiting_other_player", this.OnWaitingOtherPlayer.bind(this), this.node), q.MessageCenter.register("on_game_anti_noti", this.OnGameAnteNoti.bind(this), this.node), q.MessageCenter.register("currentRoomJackpot", this.updateJackpotNumEvent.bind(this), this.node), q.MessageCenter.register("on_jackpot_data", this.updateJackpotNumEvent.bind(this), this.node), q.MessageCenter.register("update_jackpotAmount", this.updateJackpotNumEvent.bind(this), this.node), q.MessageCenter.register("on_game_settlement_noti", this.OnSettlement.bind(this), this.node), q.MessageCenter.register("on_add_room_timecount", this.OnAddRoomTimeCount.bind(this), this.node), q.MessageCenter.register("on_PauseGame_succ", this.OnPauseGameSucc.bind(this), this.node), q.MessageCenter.register("StartGame", this.onGameStart.bind(this), this.node), q.MessageCenter.register("on_game_showdown_noti", this.OnShowDown.bind(this), this.node), q.MessageCenter.register("GameChipsMoveOutHide", this.onGameChipsMoveOutHide.bind(this), this.node), q.MessageCenter.register("on_leave_seat", this.OnLeaveSeat.bind(this), this.node), q.MessageCenter.register("on_response_stay_position", this.OnReponseStayPosition.bind(this), this.node), q.MessageCenter.register("on_force_showcard", this.OnForceShowCard.bind(this), this.node), q.MessageCenter.register("on_game_send_card_fun", this.OnSendCardFun.bind(this), this.node), q.MessageCenter.register("on_need_slider_verify_cash_game", this._onMsgNeedSliderVerify.bind(this), this.node), q.MessageCenter.register("on_need_buy_insurance", this._onMsgNeedBuyInsurance.bind(this), this.node), q.MessageCenter.register("no_need_insurace", this._onMsgNoNeedBuyInsurance.bind(this), this.node), q.MessageCenter.register("player_hit_the_outs", this._onMsgHitOuts.bind(this), this.node), q.MessageCenter.register("player_miss_the_outs", this._onMsgMissOuts.bind(this), this.node), q.MessageCenter.register("buyin_start", this._onMsgBuyInStart.bind(this), this.node), q.MessageCenter.register("buyin_failed_by_server", this._onMsgBuyInFailedByServer.bind(this), this.node), q.MessageCenter.register("buyin_failed_by_local", this._onMsgBuyInFailedByLocal.bind(this), this.node), q.MessageCenter.register("click_btn_exit_room", this._onMsgBtnClickExitRoom.bind(this), this.node), q.MessageCenter.register("click_btn_leave_seat", this._onMsgBtnClickLeaveSeat.bind(this), this.node), q.MessageCenter.register("resp_sit_down_failed", this._onMsgRespSitDownFailed.bind(this), this.node), q.appConfig.getGameConfig().opponentEmojiEnabled && q.tools.isThrowableAnimationDisplay() && (q.MessageCenter.register("effet_call", this.effectCall.bind(this), this.node), q.MessageCenter.register("on_fly_emoji", this.OnFlyEmoji.bind(this), this.node), q.MessageCenter.register("effect_hit_call", this.effectHitCall.bind(this), this.node)), q.appConfig.getGameConfig().emojiTabEnabled && (q.MessageCenter.register("on_showFace", this.onShowFace.bind(this), this.node), q.MessageCenter.register("on_SendChat", this.onSendChat.bind(this), this.node)), q.appConfig.getGameConfig().fullscreenEmojiEnabled && (q.MessageCenter.register("on_SendMagicEmoji", this.onSendEmoji.bind(this), this.node), q.MessageCenter.register("on_SendNoticeDynamicConfig", this.onSendDynamicConfig.bind(this), this.node)), q.MessageCenter.register("add_action_time", this.OnAddActionTime.bind(this), this.node), q.MessageCenter.register("on_voice_record_count_down", this.onVoiceRecordCountDown.bind(this), this.node), q.MessageCenter.register("on_voice_record_finish", this.onVoiceRecordFinish.bind(this), this.node), q.MessageCenter.register("on_play_voice", this.onPlayVoice.bind(this), this.node), q.MessageCenter.register("on_voice_record_too_short", this.OnVoiceRecordTooShort.bind(this), this.node), q.MessageCenter.register("on_upload_voice_done", this.OnUploadVoiceDone.bind(this), this.node), q.MessageCenter.register("on_voice_show_micPhoneToast", this.OnVoiceShowMiPhoneTips.bind(this), this.node), q.MessageCenter.register("SYStartRecord", this.onSyStartRecord.bind(this), this.node), q.MessageCenter.register("SYStopRecord", this.onSyStopRecord.bind(this), this.node), q.MessageCenter.register("SYCancelRecord", this.onSyCancelRecord.bind(this), this.node), q.MessageCenter.register("add_room_time", this.OnAddRoomTime.bind(this), this.node), q.MessageCenter.register("on_room_not_exist", this.gotoHallScene.bind(this), this.node), q.MessageCenter.register("update_player_stake", this.OnUpdateStake.bind(this), this.node), q.MessageCenter.register("quick_leave_notice", this.onQuickLeave.bind(this), this.node), q.MessageCenter.register("showLastRoundWin", this.showLastRoundWin.bind(this), this.node), q.MessageCenter.register("zoom_quickfold_tips", this.onQuickFoldTips.bind(this), this.node), q.MessageCenter.register("action_fold_error", this.onBigCardTips.bind(this), this.node), q.MessageCenter.register("on_leave_room_succ", this.OnLeaveRoomSucc.bind(this), this.node), q.MessageCenter.register("turntableResultNotice", this.onTurntableResultNotice.bind(this), this.node), q.MessageCenter.register("on_need_more_gold", this.OnNeedMoreGold.bind(this), this.node), q.MessageCenter.register("on_action_error", this.OnActionError.bind(this), this.node), q.MessageCenter.register("onSetShowAuditState", this.setShowAudit.bind(this), this.node), q.MessageCenter.register("sit_down_limit", this.onSitDownLimit.bind(this), this.node), q.MessageCenter.register("change_tables", this.onChangeTables.bind(this), this.node), q.MessageCenter.register("sit_down_limit_error", this.onSitDownLimitError.bind(this), this.node), q.MessageCenter.register("notice_critisicm_start", this.onNoticeCritisicmStart.bind(this), this.node), q.MessageCenter.register("notice_critisicm_not_enough", this.onNoticeCritisicmTips.bind(this), this.node), q.MessageCenter.register("guess_begin_bet", this.onGuessBeginBet.bind(this), this.node), q.MessageCenter.register("guess_bet_rsp", this.onGuessBetRsp.bind(this), this.node), q.MessageCenter.register("guess_settle", this.onGuessSettle.bind(this), this.node), q.MessageCenter.register("guess_close_button", this.onGuessCloseButton.bind(this), this.node), q.MessageCenter.register("on_auto_buyin_eff", this.onAutoBuyinEff.bind(this), this.node), q.MessageCenter.register("hide_bombInfoTips", this.hideBombInfoPrompt.bind(this), this.node), q.MessageCenter.register("showUpgradeView", this.showUpgradeView.bind(this), this.node), q.MessageCenter.register("liveStatus", this.onLiveStatus.bind(this), this.node), q.MessageCenter.register("mikeMode", this.onMikeMode.bind(this), this.node), q.MessageCenter.register("voicePrivateNotice", this.onVoicePrivateNotice.bind(this), this.node), q.MessageCenter.register("canSpeakNotice", this.onCanSpeakNotice.bind(this), this.node), q.MessageCenter.register("openMike", this.onOpenMike.bind(this), this.node), q.MessageCenter.register("NotDisturb", this.onNotDisturb.bind(this), this.node), q.MessageCenter.register("commentatorChannel", this.onCommentatorChannel.bind(this), this.node), q.MessageCenter.register("closeStarNotice", this.onCloseStarNotice.bind(this), this.node), q.MessageCenter.register("inviterSeatFreedNotice", this.onInviterSeatFreedNotice.bind(this), this.node), q.MessageCenter.register("welcome", this.onWelcome.bind(this), this.node), q.MessageCenter.register("IsEmojiFree", this.isEmojiFree.bind(this), this.node), q.MessageCenter.register("closehitback", this.onCloseHitback.bind(this), this.node), q.MessageCenter.register("onBarrageMute", this.onBarrageMute.bind(this), this.node), q.MessageCenter.register("onBarrageConfChange", this.onBarrageConfChange.bind(this), this.node), q.MessageCenter.register("updata_star_redpacket", this.onUpdataStarRedpacket.bind(this), this.node), q.MessageCenter.register("star_redpacket_result_action", this.onStarRedpacketResultAction.bind(this), this.node), q.MessageCenter.register("debug_guess_settle", this.onGuessSettleDebug.bind(this), this.node), q.MessageCenter.register("guess_set_bet_opt", this.onGuessSetBetOpt.bind(this), this.node)
        }
        onChangeTableBg() {
            this.updateTablebg(), this.updateButtonImgPath(), this.updateUi()
        }
        isTheSameStyle() {}
        updateUi() {
            this.isSeaStyle();
            let t = q.tools.GetTableBack(this.isGameStarSeat());
            Pt.Instance.isWPTO || (this.getPokerNameTextNode().getComponent(x).color = this._getNameColor(t), this.mangZhu_text.node.getComponent(x).color = this._getNameColor(t), this.getPokerNameTextNode().getComponent(B).opacity = this._getNameAlpha(t), this.mangZhu_text.node.getComponent(B).opacity = this._getNameAlpha(t))
        }
        thisCCFind(t, e) {
            return f(t, e)
        }
        getPokerNameTextNode() {
            return this.pokerNameText
        }
        updateSubmenuImg() {
            let t = this.isSeaStyle() ? "ui_seaStyle/submenu" : "ui/submenu",
                e = q.StringTools.formatC("zh_CN/game/dzpoker/%s/submenu＿menu", t);
            e = q.StringTools.formatC("zh_CN/game/dzpoker/%s/submenu＿record", t), q.resMgr.setSpriteFrame(f("allReview_icon", this.allReview_button), e), this.setSpriteFrameForShopButton(), e = q.StringTools.formatC("zh_CN/game/dzpoker/%s/submenu＿guess", t), q.resMgr.setSpriteFrame(f("Background", this.guess_hand_card_button.node), e), e = q.StringTools.formatC("zh_CN/game/dzpoker/%s/submenu＿status", t), this.setAddTimeIcon(t), e = q.StringTools.formatC("zh_CN/game/dzpoker/%s/submenu＿barrage", t), q.resMgr.setSpriteFrame(f("face_icon", this.face_button), e), e = q.StringTools.formatC("zh_CN/game/dzpoker/%s/submenu＿mic", t), q.resMgr.setSpriteFrame(this.record_button_img, e)
        }
        setAddTimeIcon(t) {
            let e = q.StringTools.formatC("zh_CN/game/dzpoker/%s/submenu＿delay", t);
            q.resMgr.setSpriteFrame(f("addTime_icon", this.addTime_button), e)
        }
        setSpriteFrameForShopButton() {
            let t = this.isSeaStyle() ? "ui_seaStyle/submenu" : "ui/submenu",
                e = q.StringTools.formatC("zh_CN/game/dzpoker/%s/submenu＿menu", t);
            e = q.StringTools.formatC("zh_CN/game/dzpoker/%s/submenu＿shop", t), q.resMgr.setSpriteFrame(f("Image_2", this.shop_button), e)
        }
        isSeaStyle() {
            return q.tools.GetTableBack(this.isGameStarSeat()) < 2
        }
        updateButtonImgPath() {
            let t = "ui/gameMain";
            this.allInImg = q.StringTools.formatC("zh_CN/game/dzpoker/%s/game_Button_allin_15", t), this.allInGrayImg = q.StringTools.formatC("zh_CN/game/dzpoker/%s/game_Button_allin_15_02", t), this.midSmallButton = q.StringTools.formatC("zh_CN/game/dzpoker/%s/game_Button_allin_15", t), this.midBigButton = q.StringTools.formatC("zh_CN/game/dzpoker/%s/game_Button_big_01", t), this.giveUpImg = q.config.getLanguagePath(q.StringTools.formatC("game/dzpoker/%s/game_Button_big_03", t)), this.giveUpGrayImg = q.config.getLanguagePath(q.StringTools.formatC("game/dzpoker/%s/game_Button_big_04", t)), this.giveUpLookImg = q.config.getLanguagePath(q.StringTools.formatC("game/dzpoker/%s/game_Button_big_03x2", t)), this.giveUpLookGrayImg = q.config.getLanguagePath(q.StringTools.formatC("game/dzpoker/%s/game_Button_big_03x3", t)), this.quickFoldGrayImg = q.config.getLanguagePath(q.StringTools.formatC("game/dzpoker/%s/game_Button_big_03x5", t)), this.checkImg = q.config.getLanguagePath(q.StringTools.formatC("game/dzpoker/%s/game_Button_big_06", t)), this.checkGrayImg = q.config.getLanguagePath(q.StringTools.formatC("game/dzpoker/%s/game_Button_big_05", t)), this.callImg = q.config.getLanguagePath(q.StringTools.formatC("game/dzpoker/%s/game_Button_big_02x2", t)), this.callGrayImg = q.config.getLanguagePath(q.StringTools.formatC("game/dzpoker/%s/game_Button_big_02x1", t)), this.midBigButton = q.config.getLanguagePath(q.StringTools.formatC("game/dzpoker/%s/game_Button_big_01", t)), this.dichiButtonImg = q.StringTools.formatC("zh_CN/game/dzpoker/%s/game_Button_samll_01", t)
        }
        showUpgradeView() {
            let t = pt.getSinglePrefabInst(this.upgradePref);
            t.active = !0, t.setSiblingIndex(q.Enum.ZORDER_TYPE.ZORDER_7), q.action.addChildToSceneOnce(t)
        }
        HideSidePot() {
            for (let t = 0; t < this.sidepoolList.length; ++t) A.stopAllByTag(Number(this.sidepoolList[t].name) + this.GAME_SIDE_POT_TAG_BEGIN), A.stopAllByTarget(this.sidepoolList[t]), this.sidepoolList[t].active = !1, this.sidepoolList[t].name = "0"
        }
        HideSidePotByPotCount() {
            let t = this.gameDataInstance.tRoomData.pkTableStates.pots.length;
            for (let e = 0 == t ? t : t - 1; e < this.sidepoolList.length; ++e) A.stopAllByTag(Number(this.sidepoolList[e].name) + this.GAME_SIDE_POT_TAG_BEGIN), A.stopAllByTarget(this.sidepoolList[e]), this.sidepoolList[e].active = !1, this.sidepoolList[e].name = "0"
        }
        testSidePot() {
            const t = this,
                e = function(e) {
                    let a = e.map((t => ({
                        potid: t,
                        amount: t
                    })));
                    t.showSidepool(a)
                };
            this.scheduleOnce((() => {
                e([10, 100])
            }), 2), this.scheduleOnce((() => {
                e([10, 100, 5e5])
            }), 4), this.scheduleOnce((() => {
                e([10, 100, 5e5, 155e4])
            }), 6), this.scheduleOnce((() => {
                e([10, 100, 5e5, 155e4, 1e3])
            }), 8), this.scheduleOnce((() => {
                e([10, 100, 5e5, 155e4, 1e3, 4e3])
            }), 10), this.scheduleOnce((() => {
                e([10, 100, 5e5, 155e4, 1e3, 4e3, 5e5])
            }), 12), this.scheduleOnce((() => {
                e([10, 100, 5e5, 155e4, 1e3, 4e3, 5e5, 155e4])
            }), 14), this.scheduleOnce((() => {
                e([10, 100, 5e5, 155e4, 1e3, 4e3, 5e5, 155e4, 2e6])
            }), 16)
        }
        giveUpCallBack() {
            Lt.SetTrackAttributesToSpan(Ot.CashGameActions, {
                userClick: !0,
                action: q.Enum.ActionType.Enum_Action_Fold,
                type: "fold_button"
            }), this.isZoom() && this.actionButtonStatus >= q.Enum.ActionButtonStatus.Control_Bet && this.actionButtonStatus < q.Enum.ActionButtonStatus.Control_Null ? this.toggleZoomObserveOnFold.getChecked() ? this._giveUpCallFuncTrue() : this._giveUpCallFuncFalse() : this.onGiveUpCallBack(!1)
        }
        _giveUpCallFuncTrue() {
            this.onGiveUpCallBack(!0)
        }
        _giveUpCallFuncFalse() {
            this.onGiveUpCallBack(!1)
        }
        onGiveUpCallBack(t = !1) {
            switch (this.actionButtonStatus) {
                case q.Enum.ActionButtonStatus.Control_Bet:
                    this.ShowFoldTips(t);
                    break;
                case q.Enum.ActionButtonStatus.Control_Raise:
                case q.Enum.ActionButtonStatus.Control_AllIn:
                case q.Enum.ActionButtonStatus.Control_Just_Call:
                case q.Enum.ActionButtonStatus.Control_add_AllIn:
                    this.RequestAction(q.Enum.ActionType.Enum_Action_Fold, 0, !0, t ? 1 : 0);
                    break;
                case q.Enum.ActionButtonStatus.Control_Default_fallOrCheck:
                    var e, a;
                    if (this.isZoom()) q.gameNet.RequestQuickFold(null == (e = this.gameDataInstance) || null == (e = e.tRoomData) ? void 0 : e.u32RoomId, !0, t ? 1 : 0);
                    else this.giveUp_buttonIsCheck = !this.giveUp_buttonIsCheck, this.giveUp_buttonIsCheck ? this.markNode(this.giveUpRed.node, "giveUpLookImg") : this.markNode(this.giveUpRed.node, "giveUpLookGrayImg"), q.gameNet.RequestDefaultFold(null == (a = this.gameDataInstance) || null == (a = a.tRoomData) ? void 0 : a.u32RoomId, 1);
                    this.markNode(this.followFill_Blue.node, "checkGrayImg"), this.followFill_buttonIsCheck = !1;
                    break;
                case q.Enum.ActionButtonStatus.Control_Default_Call:
                    var i, n, o;
                    if (this.isZoom()) q.gameNet.RequestQuickFold(null == (i = this.gameDataInstance) || null == (i = i.tRoomData) ? void 0 : i.u32RoomId, !0, t ? 1 : 0);
                    else if (this.giveUp_buttonIsCheck = !this.giveUp_buttonIsCheck, this.giveUp_buttonIsCheck ? this.markNode(this.giveUpRed.node, "giveUpImg") : this.markNode(this.giveUpRed.node, "giveUpGrayImg"), this.giveUp_buttonIsCheck) q.gameNet.RequestDefaultFold(null == (n = this.gameDataInstance) || null == (n = n.tRoomData) ? void 0 : n.u32RoomId, 3);
                    else q.gameNet.RequestDefaultFold(null == (o = this.gameDataInstance) || null == (o = o.tRoomData) ? void 0 : o.u32RoomId, 2);
                    this.markNode(this.followFill_Blue.node, "callGrayImg"), this.followFill_buttonIsCheck = !1;
                    break;
                case q.Enum.ActionButtonStatus.Control_AllInOrFold:
                    var s;
                    if (this.isZoom()) q.gameNet.RequestQuickFold(null == (s = this.gameDataInstance) || null == (s = s.tRoomData) ? void 0 : s.u32RoomId, !0, t ? 1 : 0);
                    else this.giveUp_buttonIsCheck = !this.giveUp_buttonIsCheck, this.giveUp_buttonIsCheck ? this.markNode(this.giveUpRed.node, "giveUpImg") : this.markNode(this.giveUpRed.node, "giveUpGrayImg");
                    this.markNode(this.followFill_Blue.node, "allInGrayImg"), this.followFill_buttonIsCheck = !1;
                    break;
                case q.Enum.ActionButtonStatus.Control_Null:
            }
        }
        markNode(t, e) {
            this.setSpriteFrame(t, e), t.getComponent(_t).setMark(e)
        }
        reSetSpriteFrame(t) {
            const e = t.getComponent(_t).getMark();
            this.setSpriteFrame(t, e)
        }
        setSpriteFrame(t, e) {
            if (t == this.giveUpRed.node) switch (e) {
                case "giveUpLookGrayImg":
                    this.giveUpRed.node.active = !1, this.preBetFold.node.active = !0, this.preBetFoldText.string = q.config.getStringData("ActionTips6") + "/" + q.config.getStringData("ActionTips1"), this.loadPreBetFold(!1);
                    break;
                case "quickFoldGrayImg":
                    this.giveUpRed.node.active = !0, this.buttonFoldText.string = q.config.getStringData("Zoom_button_text_4"), this.preBetFold.node.active = !1;
                    break;
                case "giveUpImg":
                    this.gameDataInstance.tGameData.m_bIsOnSelfAction ? (this.giveUpRed.node.active = !0, this.buttonFoldText.string = q.config.getStringData("ActionTips1"), this.preBetFold.node.active = !1) : (this.giveUpRed.node.active = !1, this.preBetFoldText.string = q.config.getStringData("ActionTips1"), this.preBetFold.node.active = !0, this.loadPreBetFold(!0));
                    break;
                case "giveUpGrayImg":
                    this.giveUpRed.node.active = !1, this.preBetFold.node.active = !0, this.preBetFoldText.string = q.config.getStringData("ActionTips1"), this.loadPreBetFold(!1);
                    break;
                case "giveUpLookImg":
                    this.gameDataInstance.tGameData.m_bIsOnSelfAction ? (this.buttonFoldText.string = q.config.getStringData("ActionTips6") + "/" + q.config.getStringData("ActionTips1"), this.giveUpRed.node.active = !0, this.preBetFold.node.active = !1) : (this.giveUpRed.node.active = !1, this.preBetFoldText.string = q.config.getStringData("ActionTips6") + "/" + q.config.getStringData("ActionTips1"), this.preBetFold.node.active = !0, this.loadPreBetFold(!0))
            } else if (t == this.followFill_Blue.node) switch (e) {
                case "checkGrayImg":
                    this.followFill_Blue.node.active = !1, this.preBetCheck.node.active = !0, this.preBetCheckText.string = q.config.getStringData("ActionTips6"), this.loadPreBetCheck(!1);
                    break;
                case "checkImg":
                    this.gameDataInstance.tGameData.m_bIsOnSelfAction ? (this.buttonCheckText.node.active = !0, this.buttonCallText.node.active = !1, this.buttonCheckText.string = q.config.getStringData("ActionTips6"), this.followFill_Blue.node.active = !0, this.preBetCheck.node.active = !1) : (this.followFill_Blue.node.active = !1, this.preBetCheckText.string = q.config.getStringData("ActionTips6"), this.preBetCheck.node.active = !0, this.loadPreBetCheck(!0));
                    break;
                case "callGrayImg":
                    this.followFill_Blue.node.active = !1, this.preBetCheck.node.active = !0, this.preBetCheckText.string = q.config.getStringData("ActionTips0"), this.loadPreBetCheck(!1);
                    break;
                case "callImg":
                    let t = q.config.getStringData("ActionTips0");
                    this.buttonCallText.string = t, this.preBetCheckText.string = t, this.gameDataInstance.tGameData.m_bIsOnSelfAction ? (this.buttonCallText.node.active = !0, this.buttonCheckText.node.active = !1, this.followFill_Blue.node.active = !0, this.preBetCheck.node.active = !1) : (this.followFill_Blue.node.active = !1, this.preBetCheck.node.active = !0, this.loadPreBetCheck(!0));
                    break;
                case "midBigButton":
                    break;
                case "midSmallButton":
                case "allInImg":
                    let e = q.config.getStringData("Name_Allin");
                    this.buttonCheckText.string = e, this.preBetCheckText.string = e, this.gameDataInstance.tGameData.m_bIsOnSelfAction ? (this.buttonCallText.node.active = !1, this.buttonCheckText.node.active = !0, this.followFill_Blue.node.active = !0, this.preBetCheck.node.active = !1) : (this.followFill_Blue.node.active = !1, this.preBetCheck.node.active = !0, this.loadPreBetCheck(!0));
                    break;
                case "allInGrayImg":
                    this.followFill_Blue.node.active = !1, this.preBetCheck.node.active = !0, this.preBetCheckText.string = q.config.getStringData("Name_Allin"), this.loadPreBetCheck(!1)
            }
        }
        followFillCallBack() {
            var t, e, a;
            switch (Lt.SetTrackAttributesToSpan(Ot.CashGameActions, {
                    userClick: !0,
                    action: this.actionButtonStatus,
                    type: "call_button"
                }), this.actionButtonStatus) {
                case q.Enum.ActionButtonStatus.Control_Bet:
                    this.RequestActionAndHideBetButtons(q.Enum.ActionType.Enum_Action_Check, 0);
                    break;
                case q.Enum.ActionButtonStatus.Control_Raise:
                    this.RequestActionAndHideBetButtons(q.Enum.ActionType.Enum_Action_Call, q.StringTools.showStringToNumber(this._followFillValue.toString()));
                    break;
                case q.Enum.ActionButtonStatus.Control_AllIn:
                    let n = this.gameDataInstance.tRoomData.u32Stake + this.gameDataInstance.tGameData.m_u32RoundBet;
                    null == (t = Lt.getInstance()) || t.startSpan(Ot.CashGameRaise, "followFillCallBack", {
                        amount: n
                    }), this.OnRaise(n, !0);
                    break;
                case q.Enum.ActionButtonStatus.Control_Just_Call:
                case q.Enum.ActionButtonStatus.Control_add_AllIn:
                    this.RequestActionAndHideBetButtons(q.Enum.ActionType.Enum_Action_Call, q.StringTools.showStringToNumber(this._followFillValue.toString()));
                    break;
                case q.Enum.ActionButtonStatus.Control_Default_fallOrCheck:
                    var i;
                    if (this.followFill_buttonIsCheck = !this.followFill_buttonIsCheck, this.followFill_buttonIsCheck) this.markNode(this.followFill_Blue.node, "checkImg"), q.gameNet.RequestDefaultFold(null == (i = this.gameDataInstance) || null == (i = i.tRoomData) ? void 0 : i.u32RoomId, 2);
                    else this.markNode(this.followFill_Blue.node, "checkGrayImg");
                    this.markNode(this.giveUpRed.node, this.isZoom() ? "quickFoldGrayImg" : "giveUpLookGrayImg"), this.giveUp_buttonIsCheck = !1;
                    break;
                case q.Enum.ActionButtonStatus.Control_Default_Call:
                    this.followFill_buttonIsCheck = !this.followFill_buttonIsCheck, this.followFill_buttonIsCheck ? this.markNode(this.followFill_Blue.node, "callImg") : this.markNode(this.followFill_Blue.node, "callGrayImg"), this.markNode(this.giveUpRed.node, this.isZoom() ? "quickFoldGrayImg" : "giveUpGrayImg"), this.giveUp_buttonIsCheck = !1, q.gameNet.RequestDefaultFold(null == (e = this.gameDataInstance) || null == (e = e.tRoomData) ? void 0 : e.u32RoomId, 2);
                    break;
                case q.Enum.ActionButtonStatus.Control_AllInOrFold:
                    this.followFill_buttonIsCheck = !this.followFill_buttonIsCheck, this.followFill_buttonIsCheck ? this.markNode(this.followFill_Blue.node, "allInImg") : this.markNode(this.followFill_Blue.node, "allInGrayImg"), this.markNode(this.giveUpRed.node, this.isZoom() ? "quickFoldGrayImg" : "giveUpGrayImg"), this.giveUp_buttonIsCheck = !1, q.gameNet.RequestDefaultFold(null == (a = this.gameDataInstance) || null == (a = a.tRoomData) ? void 0 : a.u32RoomId, 2);
                    break;
                case q.Enum.ActionButtonStatus.Control_Null:
            }
        }
        allInDichiCallback() {
            let t = this.gameDataInstance.tRoomData.u32Stake + this.gameDataInstance.tGameData.m_u32RoundBet;
            Lt.SetTrackAttributesToSpan(Ot.CashGameActions, {
                userClick: !0,
                action: q.Enum.ActionButtonStatus.Control_AllIn,
                type: "allin_dichi_button"
            }), this.OnRaise(t, !0)
        }
        freeFillCallBack() {
            switch (Lt.SetTrackAttributeToSpan(Ot.CashGameActions, "UserClickAllInButton", q.Enum.ActionButtonStatus.Control_AllIn), this.actionButtonStatus) {
                case q.Enum.ActionButtonStatus.Control_Bet:
                case q.Enum.ActionButtonStatus.Control_Raise:
                case q.Enum.ActionButtonStatus.Control_AllIn:
                case q.Enum.ActionButtonStatus.Control_Default_fallOrCheck:
                case q.Enum.ActionButtonStatus.Control_Default_Call:
                case q.Enum.ActionButtonStatus.Control_Null:
                    break;
                case q.Enum.ActionButtonStatus.Control_add_AllIn: {
                    var t;
                    let e = this.gameDataInstance.tRoomData.u32Stake + this.gameDataInstance.tGameData.m_u32RoundBet;
                    null == (t = Lt.getInstance()) || t.startSpan(Ot.CashGameRaise, "freeFillCallBack", {
                        amount: e
                    }), this.OnRaise(e, !0)
                }
            }
        }
        diChiCallBack(t, e) {
            if (Lt.SetTrackAttributesToSpan(Ot.CashGameActions, {
                    userClick: !0,
                    action: e,
                    type: "dichi_button"
                }), Lt.SetTrackAttributeToSpan(Ot.CashGameActions, "UserClickDichiButton", e), 0 == e) switch (this.actionButtonStatus) {
                case q.Enum.ActionButtonStatus.Control_Bet:
                case q.Enum.ActionButtonStatus.Control_Raise:
                case q.Enum.ActionButtonStatus.Control_add_AllIn:
                    this.onDichiButtonSetValue(this._dichiButton0Value)
            } else if (1 == e) switch (this.actionButtonStatus) {
                case q.Enum.ActionButtonStatus.Control_Bet:
                case q.Enum.ActionButtonStatus.Control_Raise:
                case q.Enum.ActionButtonStatus.Control_add_AllIn:
                    this.onDichiButtonSetValue(this._dichiButton1Value)
            } else if (2 == e) switch (this.actionButtonStatus) {
                case q.Enum.ActionButtonStatus.Control_Bet:
                case q.Enum.ActionButtonStatus.Control_Raise:
                case q.Enum.ActionButtonStatus.Control_add_AllIn:
                    this.onDichiButtonSetValue(this._dichiButton2Value)
            } else if (3 == e) switch (this.actionButtonStatus) {
                case q.Enum.ActionButtonStatus.Control_Bet:
                case q.Enum.ActionButtonStatus.Control_Raise:
                case q.Enum.ActionButtonStatus.Control_add_AllIn:
                    this.onDichiButtonSetValue(this._dichiButton3Value)
            } else if (4 == e) switch (this.actionButtonStatus) {
                case q.Enum.ActionButtonStatus.Control_Bet:
                case q.Enum.ActionButtonStatus.Control_Raise:
                case q.Enum.ActionButtonStatus.Control_add_AllIn:
                    this.onDichiButtonSetValue(this._dichiButton4Value)
            }
        }
        onDichiButtonSetValue(t) {
            this.OnRaise(q.StringTools.serverGoldByClient(t), !0)
        }
        OnRaise(t, e = !1) {
            var a;
            if (this.isGamePLO()) {
                const e = this.gameDataInstance.tGameData.m_u32StakeNow;
                t > e && (t = e)
            }
            let i = q.StringTools.clientGoldByServer(t);
            if (this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat)) switch (this.actionButtonStatus) {
                case q.Enum.ActionButtonStatus.Control_Bet:
                    if (t < this.gameDataInstance.tRoomData.u32Stake + this.gameDataInstance.tGameData.m_u32RoundBet)
                        if (t >= this.gameDataInstance.tGameData.m_u32MiniRaise) this.RequestAction(q.Enum.ActionType.Enum_Action_Bet, i, !1, 0, e);
                        else {
                            var n, o;
                            let e = {
                                title: q.config.getStringData("Error"),
                                txt: q.config.getStringData("RoleInfoSetBuyinLimit"),
                                isPopupDarkActive: !0,
                                cashGameScene: null == (n = this.gameSceneInstance) || null == (n = n.room) ? void 0 : n.gameScene
                            };
                            q.popUp.showMsg(e), null == (o = Lt.getInstance()) || o.endSpan(Ot.CashGameRaise, "InvalidBet", {
                                amount: t,
                                stake: this.gameDataInstance.tRoomData.u32Stake,
                                roundBet: this.gameDataInstance.tGameData.m_u32RoundBet,
                                minRaise: this.gameDataInstance.tGameData.m_u32MiniRaise
                            }, jt.ERROR)
                        }
                    else this.RequestAction(q.Enum.ActionType.Enum_Action_Allin, i, !1, 0, e);
                    break;
                case q.Enum.ActionButtonStatus.Control_Raise:
                    if (t < this.gameDataInstance.tRoomData.u32Stake + this.gameDataInstance.tGameData.m_u32RoundBet)
                        if (t >= this.gameDataInstance.tGameData.m_u32MiniRaise) this.RequestAction(q.Enum.ActionType.Enum_Action_Raise, i, !1, 0, e);
                        else {
                            var s, l;
                            let e = {
                                title: q.config.getStringData("Error"),
                                txt: q.config.getStringData("RoleInfoSetBuyinLimit"),
                                isPopupDarkActive: !0,
                                cashGameScene: null == (s = this.gameSceneInstance) || null == (s = s.room) ? void 0 : s.gameScene
                            };
                            q.popUp.showMsg(e), null == (l = Lt.getInstance()) || l.endSpan(Ot.CashGameRaise, "InvalidRaise", {
                                amount: t,
                                stake: this.gameDataInstance.tRoomData.u32Stake,
                                roundBet: this.gameDataInstance.tGameData.m_u32RoundBet,
                                minRaise: this.gameDataInstance.tGameData.m_u32MiniRaise
                            }, jt.ERROR)
                        }
                    else this.RequestAction(q.Enum.ActionType.Enum_Action_Allin, i, !1, 0, e);
                    break;
                case q.Enum.ActionButtonStatus.Control_Just_Call:
                    t < this.gameDataInstance.tRoomData.u32Stake + this.gameDataInstance.tGameData.m_u32RoundBet ? this.RequestAction(q.Enum.ActionType.Enum_Action_Call, i, !1, 0, e) : this.RequestAction(q.Enum.ActionType.Enum_Action_Allin, i, !1, 0, e);
                    break;
                case q.Enum.ActionButtonStatus.Control_AllIn:
                    t == this.gameDataInstance.tRoomData.u32Stake + this.gameDataInstance.tGameData.m_u32RoundBet && (this.RequestAction(q.Enum.ActionType.Enum_Action_Allin, i, !1, 0, e), this.showSelfCardAllInEffect());
                    break;
                case q.Enum.ActionButtonStatus.Control_add_AllIn:
                    t == this.gameDataInstance.tRoomData.u32Stake + this.gameDataInstance.tGameData.m_u32RoundBet && this.RequestAction(q.Enum.ActionType.Enum_Action_Allin, i, !1, 0, e)
            }
            null == (a = Lt.getInstance()) || a.stopSpan(Ot.CashGameRaise)
        }
        ShowFoldTips(t) {
            var e;
            let a = this.isZoom() ? "UIGameSceneTips28" : "UIGameSceneTips3",
                i = {
                    txt: q.config.getStringData(a),
                    isTwoBtn: !0,
                    sureCallback: this.FoldCard.bind(this, t),
                    sureLabel: q.config.getStringData("Zoom_button_text_2"),
                    cancelCallback: this.CheckCard.bind(this),
                    cancelLabel: q.config.getStringData("Zoom_button_text_1"),
                    isPopupDarkActive: !0,
                    cashGameScene: null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene
                };
            q.popUp.showMsg(i)
        }
        FoldCard(t = !1) {
            this.RequestActionAndHideBetButtons(q.Enum.ActionType.Enum_Action_Fold, 0, !1, t ? 1 : 0)
        }
        CheckCard() {
            this.RequestActionAndHideBetButtons(q.Enum.ActionType.Enum_Action_Check, 0)
        }
        RequestActionAndHideBetButtons(t, e, a = !1, i = 0) {
            this.RequestAction(t, e, a, i, !0)
        }
        RequestAction(t, e, a = !1, i = 0, n = !1) {
            let o = this.gameDataInstance,
                s = !1;
            if ((!q.netWork.isEncrypt(this.currentGameId) || ue.getInstance().ecdh_getNeedGenKeyState()) && o) {
                let n = o.tRoomData;
                if (n) {
                    let o = n.u32GameID,
                        l = n.u32RoomId;
                    s = q.gameNet.RequestAction(o, l, t, e, a, i), te.config.enabled && this.sendHoneyPotMsg("PlayerActionRequest", {
                        actionType: t,
                        table: this
                    })
                }
            }
            n && s && (this._lastButtonStatus = this.actionButtonStatus, this.setControlButtonStatus(q.Enum.ActionButtonStatus.Control_Null))
        }
        showJackPotNumPanel(t) {
            var e;
            this.isZoom() || (this.game.jackPotPanel.active = t, t && q.worldNet.RequestGetJackpotData(this.gameDataInstance.tRoomData.pkRoomParam.club_id, null == (e = this.gameDataInstance) || null == (e = e.tRoomData) ? void 0 : e.u32RoomId))
        }
        updateJackpotNumEvent() {
            if (!this.gameDataInstance.tRoomData.pkRoomParam.is_associated_jackpot) return;
            if (null == this.game || null == this.game.jackPotPanel) return;
            if (!this.game.jackPotPanel.active) return;
            let t = this.game.jackPotPanel.getComponentInChildren(Mt);
            if (t) {
                let e = q.GameDataManager.tJackPot.getJackpotAmountByBlind(this.gameDataInstance.tRoomData.pkRoomParam.rule_blind_enum, this.gameDataInstance.tRoomData.pkRoomParam.club_id),
                    a = Math.round(parseInt(q.StringTools.numberToShowString(e)) / 100);
                t.updateVal(Gt.ThousandPointFormat(a), this.gameDataInstance.tRoomData.currency.type)
            }
        }
        onVoiceRecordCountDown(t) {}
        onVoiceRecordFinish(t) {
            console.log("######## onVoiceRecordFinish:"), this._recordTime <= 9 ? this.gameDataInstance.tRoomData.m_bIsCancelVoice || (N.isBrowser && q.config.GET_CLIENT_TYPE() == q.Enum.ClientType.H5WebPage ? q.httpHandler.UploadVoiceFile_Sy(t) : q.httpHandler.UploadVoiceFile()) : q.MessageCenter.send("on_voice_record_too_short", this.gameDataInstance)
        }
        OnVoiceRecordTooShort(t) {
            var e;
            xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node) || (this.record_button.active = this.isShowRecord(), q.TT.showMsg(q.config.getStringData("ErrorToast24"), q.Enum.ToastType.ToastTypeError, !1, !1, null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene))
        }
        OnUploadVoiceDone() {
            this.setRecordEnabled(!0)
        }
        OnVoiceShowMiPhoneTips() {
            var t;
            q.TT.showMsg(q.config.getStringData("MicPhoneToast2"), q.Enum.ToastType.ToastTypeError, !1, !1, null == (t = this.gameSceneInstance) || null == (t = t.room) ? void 0 : t.gameScene)
        }
        onPlayVoice(t) {
            N.os == N.OS.IOS && "ios_self" == t.kSender && (t.u32SeatId = this.gameDataInstance.tRoomData.i32SelfSeat);
            let e = this.getSeatBySeverId(t.u32SeatId);
            e && e.speak(t.f32Time)
        }
        onSyStartRecord(t) {
            let e = t.ret;
            t.op;
            var a;
            0 == e && (0 == this._bTouchStop ? this.startShowRecord() : q.TT.showMsg(q.config.getStringData("ErrorToast24"), q.Enum.ToastType.ToastTypeError, !1, !1, null == (a = this.gameSceneInstance) || null == (a = a.room) ? void 0 : a.gameScene))
        }
        onSyStopRecord(t) {
            let e = t.ret,
                a = t.file_base64;
            0 == e && this.onVoiceRecordFinish(a), this._bTouchStop = !1
        }
        onSyCancelRecord(t) {
            this._bTouchStop = !1
        }
        showPlayerJackPotAction() {
            let t = q.GameDataManager.tJackPot.noticeJackPotAwardInfo.awardInfo;
            for (let e = 0; e < t.length; e++) {
                let a = t[e],
                    i = this.gameDataInstance.tRoomData.GetTablePlayer(a.award_playid);
                if (i) {
                    this.m_hashitJackpotCard = !0;
                    let t = this.getSeatBySeverId(i.seatid);
                    t && (this.PotOfAppropriationEff(this.mainpool, t.node, i, .5, .3, !0), P(this.node).delay(.5).call((() => {
                        t.getComponent(ht).showNumber("+" + q.StringTools.serverGoldToShowString(a.award_amount))
                    })).start())
                }
            }
            this.game.sendNetJackPot()
        }
        OnAddRoomTime(t) {
            var e;
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || (this.playEffectOnCurrentRoom(se.PlayerTurn), t.msg.playerid == this.getUserIDData() && q.native.AnalysisCountEvent(q.Enum.native_cfg.EVENT_COUNT_ROOM_DELAY_TIME, null), q.TT.showMsg(q.config.getStringData("UIDelayRoomTimeTips"), q.Enum.ToastType.ToastTypeSuccess, !1, !1, null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene))
        }
        Pwd_tips(t) {
            var e;
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || (q.TP.showMsg("", q.Enum.ButtonStyle.TWO_BUTTON, this.checkPwd.bind(this, t.room_id), null, !0, !1, q.config.getStringData("TipsPanel_Title2"), null, o.HorizontalAlign.CENTER, !1, null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene), q.TP.setTag("TipsPanel_Title2"))
        }
        Hide_tips(t) {
            if (xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node)) return;
            let e = q.TP.getTag();
            null != e && "TipsPanel_Title2" == e && q.TP.hideTipsPanel()
        }
        OnUpdateStake(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let e = this.getSeatBySeverId(t.seat_id);
            e && e.setStake(t.stake)
        }
        onQuickLeave(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            for (let t = 0; t < this.m_pkSelfCard.length; ++t) this.m_pkSelfCard[t].setGary(!0);
            let e = D(this.zoomSurePref);
            e.name = "zoomSureTips", this.game.node.addChild(e), q.resMgr.adaptWidget(e), e.getComponent(dt).updateView(t.msg), q.netWorkManager.closeGameConnect(!1, t.gameData.tRoomData.u32GameID, t.gameData.tRoomData.u32RoomId)
        }
        onQuickFoldTips(t) {
            var e;
            xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node) || (q.TP.showMsg(q.config.getStringData("ZoomQuickFold_tips"), q.Enum.ButtonStyle.TWO_BUTTON, this.onQuickFold.bind(this), null, !1, !1, "", !1, o.HorizontalAlign.CENTER, !1, null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene), q.TP.setTag("ZoomQuickFold_tips"))
        }
        showLastRoundWin(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let e = t.msg;
            for (let t = 0; t < this.gameDataInstance.tRoomData.kTablePlayerList.length; ++t) {
                let a = this.gameDataInstance.tRoomData.kTablePlayerList[t],
                    i = this.getSeatBySeverId(a.seatid);
                if (i && 0 == i.getSeatViewId()) {
                    let t = "+" + e;
                    i.showNumber(t)
                }
            }
        }
        onBigCardTips(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || (0 == t.msg ? this.FoldCard() : this.onQuickFold())
        }
        needClub(t) {
            var e;
            xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node) || (this.gameDataInstance.tRoomData.isShowNeedClub = !1, q.TP.showMsg(q.config.getStringData("UIGameSceneTips26"), q.Enum.ButtonStyle.GOLD_BUTTON, this.gotoSelfView.bind(this), null, !1, !1, "", !1, o.HorizontalAlign.CENTER, !1, null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene))
        }
        gotoSelfView() {
            var t, e;
            q.roomManager.RequestLeaveRoom(null == (t = this.gameSceneInstance) || null == (t = t.room) ? void 0 : t.getCurrentGameID(), null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.getCurrentRoomID())
        }
        OnLeaveRoomSucc(t) {
            var e, a, i, n;
            if (xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node)) return;
            if (this._isLeaveRoom || !C(this.node, !0)) return;
            this._isLeaveRoom = !0;
            const o = null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.getCurrentRoomID(),
                s = null == (a = this.gameSceneInstance) || null == (a = a.room) ? void 0 : a.getCurrentGameID();
            if (this.isZoom() && (this.gameDataInstance.tRoomData.RemoveTablePlayer(this.getUserIDData()), q.MessageCenter.send(q.Enum.MessageCenterAction.onStandUpSucc, this.gameDataInstance)), q.roomManager.closeGame(this.currentGameId, o), q.appConfig.getGameConfig().enableMultiTableBar) {
                var l, r;
                (null == (l = Ht.instance) ? void 0 : l.getRoomIndex(null == (r = this.gameSceneInstance) ? void 0 : r.room)) < 0 && q.MessageCenter.send("multiple_game_log_all_indexs", "NotAbleToCloseZoomGame")
            }
            let h = 0;
            if (q.appConfig.getGameConfig().enableMultiTableBar) {
                h = Ht.instance.listRoom.filter((t => {
                    var e, a;
                    return !(t.type == Vt.CASH && t.data instanceof le && t.data.getCurrentGameID() == (null == (e = this.gameSceneInstance) ? void 0 : e.room.getCurrentGameID()) && t.data.getCurrentRoomID() == (null == (a = this.gameSceneInstance) ? void 0 : a.room.getCurrentRoomID()))
                })).length
            }
            null == (i = Wt.instance) || i.onCloseCashRoom(null == (n = this.gameSceneInstance) ? void 0 : n.room, h > 0), q.GameDataManager.removeInstance(s, o), q.netWorkManager.closeGameConnect(!1, s, o)
        }
        checkPwd(t) {
            var e;
            let a = q.TP.getEditBoxString(),
                i = a.search(" ");
            var n;
            a.length <= 0 || -1 != i ? q.TT.showMsg(q.config.getStringData("ErrorCode2"), q.Enum.ToastType.ToastTypeWarning, !1, !1, null == (n = this.gameSceneInstance) || null == (n = n.room) ? void 0 : n.gameScene) : q.gameNet.RequestBuyinWithPassword(null == (e = this.gameDataInstance) || null == (e = e.tRoomData) ? void 0 : e.u32RoomId, q.md5.md5(a))
        }
        removeOthersBtnEvent(t) {
            if (!C(t, !0)) return;
            let e = t.getComponent(r).clickEvents;
            for (let t = 0; t < e.length; t++) this.isGameMainEvent(e[t]._componentName.toString()) || e.splice(t, 1)
        }
        isZoom() {
            var t;
            return null == (t = this.gameDataInstance) || null == (t = t.tRoomData) ? void 0 : t.isZoom()
        }
        showCardFunTips() {
            this.cardFunTips_text.node.active = !0, this.cardFunTips_text.string = q.config.getStringData("UICardFunTips")
        }
        isGameMainEvent(t) {
            return "GameMain" == t
        }
        setWaitAction(t) {
            this.isZoom() && (t ? this.scheduleOnce(this.runWaitAction, 3) : (this.unschedule(this.runWaitAction), this.setEnableWaitingPlayerText(!1), this.stopTrackingNextPaceTable()))
        }
        runWaitAction(t) {
            this.setEnableWaitingPlayerText(!0)
        }
        showLuckPopupWelcome(t) {
            !this.isGameStarSeat() && q.appConfig.getGameConfig().redEnvelopeEnabled && q.dataHandler.getUserData().isShowLuckTurntables ? t && !this._hasShownLuckWelcomePopup && this._showLuckWelcomePopupNode() : this._removeLuckWelcomePopupNode()
        }
        _removeLuckWelcomePopupNode() {
            q.tools.isValidNode(this._luckWelcomePopupNode) && this._luckWelcomePopupNode.removeFromParent()
        }
        _showLuckWelcomePopupNode() {
            q.tools.isValidNode(this._luckWelcomePopupNode) || (this._luckWelcomePopupNode = D(this.luckWelcomePopup_prefab), this._luckWelcomePopupNode.parent = this.luckWelcomePopup_layer, this._luckWelcomePopupNode.setPosition(0, 0), this._hasShownLuckWelcomePopup = !0)
        }
        onShowLuckButton(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || this.showLuckButton()
        }
        showLuckButton() {
            !this.isGameStarSeat() && q.appConfig.getGameConfig().redEnvelopeEnabled && (null == this.luckLayer && (this.luckLayer = D(this.luckButton_prefab).getComponent($), this.redEnvelope_btn.node.addChild(this.luckLayer.node), this.luckLayer.init(this.luckWelcomePopup_layer), this.luckLayer.node.setPosition(0, 0), this.luckLayer.updateBg(), this.luckLayer.onAbleToShowWelcome = this.showLuckPopupWelcome.bind(this)), q.dataHandler.getUserData().isShowLuckTurntables ? (this.redEnvelope_btn.node.active = !0, this.luckLayer.updateView(!0)) : this.redEnvelope_btn.node.active = !1)
        }
        onTurntableResultNotice(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || this.turntableResultNotice(t.puf)
        }
        turntableResultNotice(t) {
            let e = this.getSeatByPlayerID(t.uid);
            null != e && this.luckLayer.runGoldMoveAction(this.redEnvelope_btn.node, e.node, (() => {
                e.showRedAction(t.currency_type, t.amount, this.isGameStarSeat())
            }))
        }
        onUpdataStarRedpacket() {
            this.isGameStarSeat() && (null == this.starRedpacketButton ? q.resMgr.load("zh_CN/game/starRedpacket/StarRedpacketButton", d, (t => {
                null == this.starRedpacketButton && (this.starRedpacketButton = D(t).getComponent(At), this.redEnvelope_btn.node.addChild(this.starRedpacketButton.node), this.starRedpacketButton.node.setPosition(0, 0)), this.gameDataInstance.tRoomData.starRedpacketInfo.left_time > 0 ? (this.redEnvelope_btn.node.active = !0, this.starRedpacketButton.updateView()) : this.redEnvelope_btn.node.active = !1
            }), q.resMgr.CleanResLevel.LEVEL_SCENE) : this.gameDataInstance.tRoomData.starRedpacketInfo.left_time > 0 ? (this.redEnvelope_btn.node.active = !0, this.starRedpacketButton.updateView()) : this.redEnvelope_btn.node.active = !1)
        }
        onStarRedpacketResultAction(t) {
            let e = this.getSeatByPlayerID(t.user_id);
            null != e && this.starRedpacketButton.runGoldMoveAction(this.redEnvelope_btn.node, e.node, (() => {
                e.showRedAction(q.Enum.RedItemType.gold, t.amount, this.isGameStarSeat())
            }))
        }
        getSeatByPlayerID(t) {
            for (let e = 0; e < this.gameDataInstance.tRoomData.kTablePlayerList.length; ++e) {
                let a = this.gameDataInstance.tRoomData.kTablePlayerList[e];
                if (a && t == a.playerid) {
                    return this.getSeatBySeverId(a.seatid)
                }
            }
        }
        getSeatById(t) {
            let e = this.seatList.length;
            for (let a = 0; a < e; a++)
                if (this.seatList[a].getSeatViewId() == t) return this.seatList[a]
        }
        updateLabaNum(t = !0) {}
        OnNeedMoreGold(t) {
            xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node) || (et.isShowNeedShop = !1, q.SHOP.RechargeClick())
        }
        gameStandUp() {
            var t;
            q.gameNet.RequestStandup(null == (t = this.gameDataInstance) || null == (t = t.tRoomData) ? void 0 : t.u32RoomId)
        }
        showShop() {
            q.AudioMgr.playButtonSound("button_click.mp3"), q.worldNet.requestGetUserData(), q.SHOP.RechargeClick()
        }
        getMainpoolWidth() {
            let t = this.mainpool_text.node.getComponent(b).contentSize.width + 50;
            return t <= 200 && (t = 200), t
        }
        RequestGetRoomLimitID() {
            var t;
            q.gameNet.RequestGetRoomLimitID(null == (t = this.gameDataInstance) || null == (t = t.tRoomData) ? void 0 : t.u32RoomId)
        }
        onSitDownLimit(t) {
            var e;
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let a = q.config.getStringData("GameScene_sitDownLimit_panel_view_panel_des_1"),
                i = q.config.getStringData("GameScene_sitDownLimit_panel_view_panel_des_3");
            q.popUp.showMsg({
                txt: t.msg + "\n" + i,
                title: "",
                subtitle: q.StringTools.convertText(a, 4),
                isTwoBtn: !0,
                sureCallback: this.RequestGetRoomLimitID.bind(this),
                cancelCallback: null,
                needEditBox: !1,
                iconType: void 0,
                cancelLabel: q.StringTools.convertText(q.config.getStringData("GameScene_sitDownLimit_panel_view_panel_cancel_button"), 2),
                sureLabel: q.StringTools.convertText(q.config.getStringData("YES"), 2),
                msgType: q.Enum.ToastType.ToastTypeDefault,
                cashGameScene: null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene
            }), this.game.buyin_panel.active = !1
        }
        onSitDownLimitError(t) {
            var e;
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let a = q.config.getStringData("ServerErrorCode" + t.msg);
            q.TP.showMsg(a, q.Enum.ButtonStyle.TWO_BUTTON, this.RequestGetRoomLimitID.bind(this), null, !1, !1, "", !1, o.HorizontalAlign.CENTER, !1, null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene), q.TP.setButtonText(q.Enum.ButtonType.TWO_BUTTON_LIMIT_TIPS)
        }
        onChangeTables(t) {
            var e, a;
            xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node) || (this.m_bIsInit = !1, null != (e = this.gameSceneInstance) && null != (e = e.room) && e.isNeedCheckOutCashGame() && (null == (a = this.gameManager) || a.sureToSettlement()))
        }
        initRoomData() {
            for (; this.seatList.length > 0;) {
                let t = this.seatList.pop();
                t.node.removeFromParent(), t.node.destroy()
            }
        }
        onNoticeCritisicmStart(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            this._bReciviceCriticsStart = !0;
            let e = this.bomb_node.getChildByName("bombAnim");
            e && (e.getComponent("WPTOBombPotAnim").playBombAnim(), this.playEffectOnCurrentRoom("zh_CN/game/dzpoker/audio/baojiFire")), this.hideBombInfoPrompt()
        }
        onNoticeCritisicmTips(t) {
            var e;
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || q.TT.showMsg(q.config.getStringData("Criticsim_not_enough"), q.Enum.ToastType.ToastTypeWarning, !1, !1, null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene)
        }
        showBombInfoPrompt(t) {
            this.gameDataInstance.tRoomData.isShowCritPrompt = !1;
            let e = 20,
                a = 10,
                i = "BB",
                n = q.config.getStringData("BombPrompt_title_SD");
            0 != t.maxCritProb && (e = t.maxCritProb), 0 != t.critNeedMoney && (a = t.critNeedMoney), t.game_mode == q.Enum.CreateGameMode.CreateGame_Mode_Short ? (i = "Ante", n = q.config.getStringData("BombPrompt_title_SD")) : n = q.config.getStringData("BombPrompt_title");
            let o = q.StringTools.formatC(q.config.getStringData("BombPrompt_Content"), e, a, i),
                s = n;
            var l;
            q.tools.isBombPotPromptShowAgain() && (q.popUp.showMsg({
                txt: o,
                title: s,
                isTwoBtn: !1,
                sureCallback: null,
                cancelCallback: null,
                needEditBox: false,
                iconType: void 0,
                msgType: q.Enum.ToastType.ToastTypeDefault,
                isPopupDarkActive: true,
                cashGameScene: null == (l = this.gameSceneInstance) || null == (l = l.room) ? void 0 : l.gameScene,
                doNotShowAgain: !0,
                doNotShowAgainCallback: t => {
                    q.tools.setBombPotPromptShowAgain(!t)
                }
            }), q.popUp.setButtonText(q.Enum.ButtonType.ONE_BUTTON_BOOMTIP))
        }
        hideBombInfoPrompt() {}
        setForbidChat(t) {
            this._isAllin = t, q.MessageCenter.send("forbid_chat", t), t ? (this.game.face_Panel && (this.isGameStarSeat() ? this.game.face_Panel.getComponent(J).hideUi() : this.game.face_Panel.getComponent(Y).hideUi()), this.setRecordEnabled(!1), this.setFaceBtnEnabled(!1), this.setFullscreenEmojiBtnEnabled(!1)) : (this.setRecordEnabled(-1 != this.gameDataInstance.tRoomData.i32SelfSeat), this.setFaceBtnEnabled(!0), this.setFullscreenEmojiBtnEnabled(!0))
        }
        setDynamicConfig() {
            var t;
            const e = this.gameDataInstance.tRoomData.pkDynamicConfig;
            Qt.config.TableCountdown = e.magicEmojiDuration, Qt.config.Enable = e.magicEmojiEnable, Qt.config.PotSizeRestriction = e.magicEmojiPotBB;
            const a = this.isShowFullscreenEmojiBtn();
            this.emoji_button.active = a, this.setFullscreenEmojiBtnEnabled(a), null == (t = this.game.emoji_Panel) || t.getComponent(Xt).updateConfig()
        }
        onGuessBeginBet(t) {
            if (!xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) && (this.game.guess_hand_card.getComponent(ut).setGuessBeginBet(t.msg), this._isShowGuess))
                if (this._isGuessClose) {
                    this.game.guess_hand_card.active = !1;
                    let t = this.guess_hand_card_button.node.getChildByName("guess_tips");
                    A.stopAllByTarget(t), t.setScale(I(0, 0, 0)), this.guess_hand_card_button.node.active = !0
                } else this.game.guess_hand_card.active = !0, this.guess_hand_card_button.node.active = !1
        }
        onGuessBetRsp(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || (this.game.guess_hand_card.getComponent(ut).setGuessBetRsp(t.msg), this._isShowGuess && (this.game.guess_hand_card.active = !0, this._isAutoGuessHandOn = t.msg.repeat, this.lastUnhandledGuessHandTime = Date.now()))
        }
        onGuessOpenButton(t) {
            this._isShowGuess && (this._isGuessClose = !1, this.game.guess_hand_card.active = !0, this.guess_hand_card_button.node.active = !1)
        }
        onGuessCloseButton(t) {
            if (xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node)) return;
            if (!this._isShowGuess) return;
            this._isGuessClose = !0;
            let e = this.guess_hand_card_button.node.getChildByName("guess_tips");
            A.stopAllByTarget(e), e.setScale(I(1, 1, 1)), this.game.guess_hand_card.active = !1, this.guess_hand_card_button.node.active = !0, P(e).delay(1).to(.5, {
                scale: I(0, 0, 0)
            }).start()
        }
        onGuessSettle(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || (this._guess_settle_amount = t.msg)
        }
        showGuessSettle(t) {
            let e = this._guess_settle_amount;
            if (-1 == e) return;
            this._guess_settle_amount = -1;
            let a = D(this.guess_result_panel),
                i = a.getChildByName("lose"),
                n = a.getChildByName("win"),
                s = this.getSeatBySeatViewId(0).node.getPosition();
            s.x = q.appConfig.isLandscapeLayout ? 3 * this.game.gameMain_panel.getComponent(b).width / 4 : this.game.gameMain_panel.getComponent(b).width / 2, s.y = q.appConfig.isLandscapeLayout ? 100 : 200, this.game.gameMain_panel.addChild(a), a.setSiblingIndex(107), a.setPosition(s);
            let l = e > 0;
            if (i.active = !l, n.active = l, l) {
                let t = n.getChildByName("guess_result_dos"),
                    i = n.getChildByName("guess_result_label"),
                    s = n.getChildByName("gold_icon"),
                    l = a.getChildByName("guess_result_bg");
                t.getComponent(o).string = q.config.getStringData("UIGuessWin"), i.getComponent(o).string = "+" + q.StringTools.numToFloatString(e);
                let r = q.resMgr.getLabelStringSize(i.getComponent(o)).width,
                    h = s.getComponent(b).contentSize.width + r,
                    d = l.getComponent(b).contentSize,
                    u = q.resMgr.getLabelStringSize(t.getComponent(o)).width,
                    m = u > h ? u : h;
                d.width < m + 50 && l.getComponent(b).setContentSize(new M(m + 50, d.height)), s.setPosition(-r / 2 - 5, s.getPosition().y), i.setPosition(s.getComponent(b).contentSize.width / 2 - 5, i.getPosition().y)
            } else {
                i.getChildByName("guess_result_label").getComponent(o).string = q.config.getStringData("UIGuessLose")
            }
            P(a).to(.2, {
                position: new p(s.x, s.y + 165, 0)
            }).call((() => {
                P(ne.addOrGetComponent(a, B)).to(2, {
                    opacity: 0
                }).removeSelf().start()
            })).start()
        }
        resetPointAni() {
            this.gameDataInstance.tRoomData.change_points = 0
        }
        createVideoEngine() {
            if (N.isNative && N.os == N.OS.ANDROID) {
                let t = U.reflection.callStaticMethod("com.cocos.game.AppActivity", "emulatorCheck", "()I");
                this._runningOnDevice = 1 == t ? 1 : 0
            }
            this._needCreateVideoEngine = !1, St.setRenderListener(this.renderVideoImage.bind(this), this.cleanVideoImage.bind(this)), St.setEngineStateListener(this.onVideoEngineStateChanged.bind(this)), this.isEnableAudioVolumeIndication() && St.setAudioVolumeListener(this.onAudioVolumeIndication.bind(this)), St.createEngine(St.CHANNEL_PROFILE_LIVE_BROADCASTING, {
                width: 720,
                height: 720
            }, St.VIDEO_FRAME_RATE_FPS_15, St.VIDEO_ORIENTATION_MODE_ADAPTIVE)
        }
        destroyVideoEngine() {
            St.setRenderListener(null, null), St.setEngineStateListener(null), St.setAudioVolumeListener(null), St.destroyEngine(), this._needCreateVideoEngine = !0
        }
        isEnableAudioVolumeIndication() {
            return "2.10.0" != window.big_version
        }
        isGameStarSeat() {
            var t;
            return (null == (t = this.gameDataInstance) || null == (t = t.tRoomData) ? void 0 : t.u32GameID) == q.Enum.GameId.StarSeat
        }
        isEnableGameStarSeat() {
            var t;
            return (null == (t = this.gameDataInstance) || null == (t = t.tRoomData) ? void 0 : t.pkRoomParam.reserveSeat) > 0
        }
        isEnableMike() {
            let t = this.getCommentatorInfoByUid(this.getUserIDData());
            return !(!t || 1 != t.mikeStatus)
        }
        isGamePLO() {
            var t;
            let e = !1;
            switch (null == (t = this.gameDataInstance) || null == (t = t.tRoomData) ? void 0 : t.u32GameID) {
                case q.Enum.GameId.Plo:
                case q.Enum.GameId.Plo5:
                    e = !0
            }
            return e
        }
        getseatHandsCardType() {
            let t = Tt.SHCT_NONE;
            switch (this.gameDataInstance.tRoomData.u32GameID) {
                case q.Enum.GameId.Plo:
                    t = Tt.SHCT_PLO;
                    break;
                case q.Enum.GameId.Plo5:
                    t = Tt.SHCT_PLO5;
                    break;
                default:
                    t = Tt.SHCT_TEXAS
            }
            return t
        }
        joinVideoChannel(t, e) {
            St.joinChannel(t, e)
        }
        leaveVideoChannel() {
            St.leaveChannel()
        }
        setVideoClientRole(t) {
            switch (t) {
                case 1:
                    St.setClientRole(St.CLIENT_ROLE_BROADCASTER), St.enableLocalAudio(!1), St.enableLocalVideo(!0);
                    break;
                case 2:
                    St.setClientRole(St.CLIENT_ROLE_BROADCASTER), St.enableLocalAudio(!0), St.enableLocalVideo(!1);
                    break;
                case 0:
                case 3:
                default:
                    St.setClientRole(St.CLIENT_ROLE_AUDIENCE), St.enableLocalAudio(!1), St.enableLocalVideo(!1)
            }
        }
        renderVideoImage(t, e, a, i, n, o, s) {
            if (!this.isEnableGameStarSeat()) return;
            let l = this.getSeatByUid(s);
            if (null == l || 1 != l.getData().identity || 1 != l.getData().liveStatus) return;
            let r = new Uint8Array(U.fileUtils.getDataFromFile(t));
            if (null == r) return;
            let h = 1,
                d = 1;
            if (s == this.getUserIDData()) {
                let t = Math.abs(n);
                90 == t || 270 == t ? d = 1 == this._runningOnDevice ? 1 : -1 : h = 1 == this._runningOnDevice ? 1 : -1
            }
            l.setHeadTextureWithData(r, V.PixelFormat.RGBA8888, a, i, n, h, d)
        }
        cleanVideoImage(t, e) {}
        onVideoEngineStateChanged(t) {
            if (1 == t) {
                var e;
                if (St.setBeautyEffectOptions(!0), this.setVideoClientRole(this.myIdentity()), 2 == this.myIdentity() && 0 == this.isEnableMike()) St.enableLocalAudio(!1);
                else if (1 == this.myIdentity()) {
                    let t = this.getSeatByUid(this.getUserIDData());
                    (this.isAudience() || t && 1 != t.getData().liveStatus) && St.enableLocalVideo(!1), this.updateMikMode()
                }
                this.onCommentatorChannel({
                    msg: this.getCommentator().getAudioChannel(),
                    gameData: this.gameDataInstance
                }), this.updateVoicePrivateNotice(), this.isEnableAudioVolumeIndication() && St.enableAudioVolumeIndication(500), this.joinVideoChannel("superstar_video_" + this.gameDataInstance.tRoomData.u32GameID + "_" + (null == (e = this.gameDataInstance) || null == (e = e.tRoomData) ? void 0 : e.u32RoomId), this.getUserIDData())
            }
        }
        getSeatByUid(t) {
            let e = null;
            for (let a = 0; a < this.seatList.length; ++a)
                if (null != this.seatList[a].PlayerInfo && this.seatList[a].PlayerInfo.playerid == t) {
                    e = this.seatList[a];
                    break
                } return e
        }
        onLiveStatus(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let e = this.isAudience(),
                a = 1 == t.msg.liveStatus,
                i = this.getSeatByUid(t.msg.uid),
                n = -1,
                o = !1;
            if (i && 1 == i.getData().identity) {
                i.getData().liveStatus = t.msg.liveStatus, n = i.getSeverId();
                let s = i.getViewStyle();
                e && a ? i.setViewStyle(2) : i.setViewStyle(1), o = s != i.getViewStyle(), o || 1 != s || a || i.resetHead(), this.updateGiftSmallIconStatus()
            }
            1 == this.myIdentity() && t.msg.uid == this.getUserIDData() && St.enableLocalVideo(a), o && n == this.gameDataInstance.tGameData.i32DealerSId && this.DrunAction(this.gameDataInstance.tGameData.i32DealerSId, 0)
        }
        updateMikMode() {
            if (1 == this.myIdentity()) {
                let t = this.gameDataInstance.tRoomData.GetTablePlayer(this.getUserIDData());
                t && 1 == t.mikeMode ? St.enableLocalAudio(!0) : St.enableLocalAudio(!1)
            }
        }
        onMikeMode(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || (this.record_button.active = this.isShowRecord(), this.updateMikMode())
        }
        updateVoicePrivateNotice() {
            if (0 == this.myIdentity())
                for (let t = 0; t < this.gameDataInstance.tRoomData.voicePrivate.length; ++t) {
                    let e = this.gameDataInstance.tRoomData.voicePrivate[t];
                    this.onVoicePrivateNotice({
                        msg: e,
                        gameData: this.gameDataInstance
                    })
                }
        }
        onVoicePrivateNotice(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || 0 == this.myIdentity() && St.muteRemoteAudio(t.msg.uid, !t.msg.isVoicePublic)
        }
        onCanSpeakNotice(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || (this.record_button.active = this.isShowRecord())
        }
        onOpenMike(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            if (!this.getCommentatorInfoByUid(t.msg.uid)) return;
            let e = this.getCommentator();
            if (2 == this.myIdentity() && t.msg.uid == this.getUserIDData()) {
                let a = 1 == t.msg.mikeStatus;
                e.enableMike(a), St.enableLocalAudio(a), a || e.setAudioVolume(0)
            }
        }
        containsKey(t, e) {
            if (null != t && t instanceof Array)
                for (let a = t.length - 1; a >= 0; --a)
                    if (t[a] == e) return !0;
            return !1
        }
        onCommentatorChannel(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            const e = t.msg;
            let a = this.gameDataInstance.tRoomData.pkRoomParam.commentators,
                i = [],
                n = [];
            for (let t = a.length - 1; t >= 0; --t) this.getUserIDData() != a[t].uid && (a[t].television == e ? i.push(a[t].uid) : n.push(a[t].uid));
            for (let t = n.length - 1; t >= 0; --t) St.muteRemoteAudio(n[t], !0);
            for (let t = i.length - 1; t >= 0; --t) St.muteRemoteAudio(i[t], !1)
        }
        currentCommentatorChannels() {
            let t = this.gameDataInstance.tRoomData.pkRoomParam.commentators,
                e = [];
            for (let a = 0; a < t.length; ++a) this.containsKey(e, t[a].television) || e.push(t[a].television);
            return e
        }
        defaultCommentatorChannel() {
            return q.config.getCurrentLanguageDetails().commentatorChannel
        }
        onNotDisturb(t) {
            if (xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node)) return;
            let e = this.getSeatByUid(t.msg.whoId);
            e && e.showHeadBlock(1 == t.msg.operate)
        }
        onCloseStarNotice(t) {
            if (!xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) && this.isGameStarSeat() && !this.isEnableGameStarSeat()) {
                let t = f("commentator", this.node);
                this.setSeatViewStyle(), q.MessageCenter.send("closeStarSeat", !0), this.record_button.active = this.isShowRecord(), t.active = !1, this.destroyVideoEngine()
            }
        }
        onInviterSeatFreedNotice(t) {
            if (!this.isEnableGameStarSeat() || null == t || 0 == t.seatId.length) return;
            if (q.MessageCenter.send("freeInviterSeat", t), this.isAudience()) return;
            let e = t.seatId,
                a = t.attr,
                i = !1;
            for (let t = e.length - 1; t >= 0; --t)
                if (this.gameDataInstance.tRoomData.i32SelfSeat == e[t]) {
                    i = !0;
                    break
                } var n;
            if (i && (0 == a || 1 == a || 2 == a))
                if (1 == a) this.isInviter() || q.TT.showMsg(q.config.getStringData("GameScene_seatStar_change_inviter"), q.Enum.ToastType.ToastTypeError, !1, !1, null == (n = this.gameSceneInstance) || null == (n = n.room) ? void 0 : n.gameScene);
                else if (2 == a) {
                var o;
                if (1 != this.myIdentity()) q.TT.showMsg(q.config.getStringData("GameScene_seatStar_change_star"), q.Enum.ToastType.ToastTypeError, !1, !1, null == (o = this.gameSceneInstance) || null == (o = o.room) ? void 0 : o.gameScene)
            }
        }
        isKeepSilent() {
            let t = this.getCommentator().getAudioChannel(),
                e = this.gameDataInstance.tRoomData.pkRoomParam.commentators;
            for (let a = e.length - 1; a >= 0; --a)
                if (1 == e[a].mikeStatus && e[a].television == t) return !1;
            return !0
        }
        updateAudioVolumeIndication() {
            if (this.isEnableAudioVolumeIndication()) return;
            let t = this.getCommentator(),
                e = this.isKeepSilent() ? 0 : 1;
            2 == t.getRole() || t.isEnableMike() || (e = 0), t.setAudioVolume(e)
        }
        onAudioVolumeIndication(t, e) {
            let a = JSON.parse(t);
            if (null == a || !(a instanceof Array)) return;
            let i = a.length,
                n = 1 == i && 0 == a[0].uid,
                o = this.getCommentator();
            if (n) return void(2 == this.myIdentity() && o.setAudioVolume(a[0].volume));
            let s = 0;
            if (i > 0)
                for (let t = i - 1; t >= 0; --t) {
                    this.getCommentatorInfoByUid(a[t].uid) && (s += a[t].volume)
                }
            2 == this.myIdentity() && o.isEnableMike() && (s += o.getAudioVolume()), o.setAudioVolume(s)
        }
        getCommentator() {
            return f("commentator", this.node).getComponent(ft)
        }
        getCommentatorInfoByUid(t) {
            let e = this.gameDataInstance.tRoomData.pkRoomParam.commentators;
            for (let a = e.length - 1; a >= 0; --a)
                if (e[a].uid == t) return e[a];
            return null
        }
        myIdentity() {
            return this.gameDataInstance.tRoomData.identity
        }
        isAudience() {
            return -1 == this.gameDataInstance.tRoomData.i32SelfSeat
        }
        isInviter() {
            if (0 == this.myIdentity()) {
                let t = this.gameDataInstance.tRoomData.pkRoomParam.starInviter;
                for (let e = 0; e < t.length; ++e)
                    if (t[e] == this.getUserIDData()) return !0
            }
            return !1
        }
        setSeatViewStyle() {
            let t = this.isAudience();
            for (let e = 0; e < this.seatList.length; e++) {
                let a = !1,
                    i = this.seatList[e];
                i && i.getData() && 1 == i.getData().identity && 1 == i.getData().liveStatus && (a = !0), this.isEnableGameStarSeat() && t && a ? i.setViewStyle(2) : i.setViewStyle(1)
            }
        }
        isShowRecord() {
            if (-1 == this.gameDataInstance.tRoomData.i32SelfSeat) return !1;
            let t = !this.isZoom() && this.currentGameId != q.Enum.GameId.Bet;
            if (this.isGameStarSeat() && this.isEnableGameStarSeat())
                if (2 == this.myIdentity()) t = !1;
                else if (1 == this.myIdentity()) {
                let e = this.gameDataInstance.tRoomData.GetTablePlayer(this.getUserIDData());
                t = !e || 1 != e.mikeMode
            } else {
                t = this.gameDataInstance.tRoomData.pkRoomParam.canSpeak;
                let e = this.gameDataInstance.tRoomData.GetTablePlayer(this.getUserIDData());
                t = e ? e.canSpeak : t
            }
            return t
        }
        isShowFaceBtn() {
            return this.isGameStarSeat() ? 2 != this.myIdentity() : -1 != this.gameDataInstance.tRoomData.i32SelfSeat
        }
        isShowFullscreenEmojiBtn() {
            return !1
        }
        onBarrageMute(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || q.MessageCenter.send("barrageMute", t)
        }
        onBarrageConfChange(t) {
            xt.isInvalidRoomMultiWindow(t, null == this ? void 0 : this.node) || q.MessageCenter.send("barrageConfChange", {
                canBarrage: this.gameDataInstance.tRoomData.openCustomBarrage,
                canInput: this.gameDataInstance.tRoomData.openTablePlayerCustomBarrage,
                price: this.gameDataInstance.tRoomData.nextCustomBarrageFee
            })
        }
        getBlind() {
            return this.mangZhu_text.string
        }
        getShowDiChiBtnStatus() {
            return this.actionButtonStatus != q.Enum.ActionButtonStatus.Control_AllIn && this.actionButtonStatus != q.Enum.ActionButtonStatus.Control_Just_Call
        }
        getPkSelfCard() {
            return this.m_pkSelfCard
        }
        getDistanceFromCenter() {
            if (Pt.Instance.isLandscapeLayout) return new p(p.ZERO);
            const t = W.getScene().getComponentInChildren(z).node.position,
                e = this.nodeUITransform.convertToWorldSpaceAR(this.node.position);
            return I(e.add(t))
        }
        convertToAnimContainerSpaceAR(t, e) {
            return this.nodeUITransform.convertToWorldSpaceAR(t, e), this.gameSceneInstance.gameNode.getComponent(b).convertToNodeSpaceAR(e, t), t
        }
        getAnimContainerNode() {
            return this.gameSceneInstance.gameNode
        }
        getLocalFont() {
            return q.resMgr.getLocalFontByName("arial")
        }
        getCardLen() {
            let t = 2;
            return this.getseatHandsCardType() == Tt.SHCT_PLO ? t = 4 : this.getseatHandsCardType() == Tt.SHCT_PLO5 && (t = 5), t
        }
        getCardScale() {
            return 1
        }
        initSelfCardPosition(t) {
            let e = -35;
            this.isGamePLO() && (e = 0);
            let a = 0;
            q.appConfig.isLandscapeLayout || (a = e);
            let i = this.gameDataInstance.tRoomData.i32SelfSeat < 0 ? this.seatList[0] : this.getSeatBySeverId(this.gameDataInstance.tRoomData.i32SelfSeat);
            if (i) {
                let e = new p(0, 0, 0);
                (this.dealCenterNode.getComponent(b) || this.mainpoolUITransform).convertToWorldSpaceAR(p.ZERO, e);
                let n = this.getCardPanel().getChildByName("card_panel_mask"),
                    o = i.node.getComponent(b).convertToWorldSpaceAR(I(0, 0, 0));
                n.parent.getComponent(b).convertToNodeSpaceAR(o, o), n.setPosition(I(o.x + this.getOffsetCardPanelMask().x, o.y + this.getOffsetCardPanelMask().y));
                for (let o = 0; o < t; ++o) {
                    let t = i.getShowCard(o),
                        s = t.node.getComponent(b).convertToWorldSpaceAR(I(0, 0, 0));
                    const l = this.m_pkSelfCard[o];
                    l.node.removeFromParent(), n.addChild(l.node), l.node.parent.getComponent(b).convertToNodeSpaceAR(s, s), l.node.setPosition(I(s.x, s.y + a)), l.setDealPos(e);
                    let r = i.getShowCardAngle(o);
                    l.rootNode.angle = r;
                    let h = t.node.getScale();
                    l.node.setScale(h), l.setDealRotate(r)
                }
                this.setSliderAllInPosition();
                const s = {
                    cardPos: _.ZERO,
                    seatPos: _.ZERO
                };
                this.isSelfCardPlacedAtWrongPosition(i, s)
            }
        }
        isSelfCardPlacedAtWrongPosition(t, e) {
            if (this.m_pkSelfCard.length < 0) return !1;
            const a = this.m_pkSelfCard[0].node.getComponent(b).convertToWorldSpaceAR(p.ZERO),
                i = t.node.getComponent(b).convertToWorldSpaceAR(p.ZERO);
            e && (e.cardPos = H(a.x, a.y), e.seatPos = H(i.x, i.y));
            let n = _.distance(a, i);
            if (n > 300) {
                var o;
                const a = t.getShowCard(0).node.getComponent(b).convertToWorldSpaceAR(p.ZERO);
                let i = e ? {
                    cardPos: `x: ${e.cardPos.x}, y: ${e.cardPos.y}`,
                    seatPos: `x: ${e.seatPos.x}, y: ${e.seatPos.y}`,
                    cardOfSeatPos: `x: ${a.x}, y: ${a.y}`
                } : {
                    cardOfSeatPos: `x: ${a.x}, y: ${a.y}`
                };
                return null == (o = Lt.getInstance()) || o.traceEvent(Ot.SelfCardPlacedWrongPosition, "RootCardPlacedAtWrongPosition", i), !0
            }
            const s = this.getCardPanel().getChildByName("card_panel_mask");
            let l = t.node.getComponent(b).convertToWorldSpaceAR(I(0, 0, 0));
            s.parent.getComponent(b).convertToNodeSpaceAR(l, l), l.subtract(this.getOffsetCardPanelMask());
            const r = s.getPosition();
            n = _.distance(l, r);
            if (n > (q.appConfig.isLandscapeLayout ? 260 : 400)) {
                var h;
                let t = {
                    isTurnSeat: this.isTurnSeat,
                    isTurnRight: this.isRight,
                    seatCardPanelPos: `x: ${l.x}, y: ${l.y}`,
                    actualCardPanelPos: `x: ${r.x}, y: ${r.y}`,
                    distance: n
                };
                return null == (h = Lt.getInstance()) || h.traceEvent(Ot.SelfCardPlacedWrongPosition, "CardPanelMaskPlacedAtWrongPosition", t), !0
            }
            return !1
        }
        checkChatAvailable() {
            !q.appConfig.getGameConfig().chatTabEnabled && (this.face_button.parent = null)
        }
        checkFullscreenEmojiAvailable() {
            !q.appConfig.getGameConfig().fullscreenEmojiEnabled && (this.emoji_button.parent = null)
        }
        setMangZhuText(t) {
            this.mangZhu_text.node.active = t
        }
        getCardDestination(t) {
            let e = this.mainpoolUITransform.convertToWorldSpaceAR(I(0, 0, 0));
            return this.getCardPanel().getComponent(b).convertToNodeSpaceAR(e)
        }
        selectSelfSeat(t) {
            t.setSelfPosition(), this.card_panel.parent = t.selfCardPanel
        }
        unSelectSelfSeat(t) {
            t.reverseSelfPosition(), this.card_panel.parent = this.node
        }
        getCardPanel() {
            return this.card_panel
        }
        showDichiChipText(t) {
            this.dichiChip_text.node.parent.active = t, this.totalPotTextContainer.getComponent(w).updateLayout()
        }
        loadPreBetFold(t) {
            let e = q.tools.GetTableBack();
            q.resMgr.loadPreBetSprite(this.preBetFold, e, t)
        }
        loadPreBetCheck(t) {
            let e = q.tools.GetTableBack();
            q.resMgr.loadPreBetSprite(this.preBetCheck, e, t)
        }
        updateRaiseButton(t) {
            let e = this.haveAnyUnplayedPlayerBehind(t);
            this.setBetBtnsVisible(e), this.enableSlider(e)
        }
        setRaiseToAllin(t) {}
        haveAnyUnplayedPlayerBehind(t) {
            for (let e = 0; e < t.players.length; e++) {
                let a = t.players[e];
                if (a.playerid != t.curr_action_uid && a.stake > 0 && a.last_action != q.Enum.ActionType.Enum_Action_Fold) return !0
            }
            return !1
        }
        showRaiseButton(t) {
            this.enableSlider(t), this.setBetBtnsVisible(t), this.SetExtraBetBtnVisible(t)
        }
        showWinnerCombination(t) {
            this.totalPotTextContainer.active = !t, this.winnerCombinationText.node.active = t
        }
        getOffsetCardPanelMask() {
            return new p(0, -200, 0)
        }
        setTotalPotValue(t) {
            this.dichiChip_text.string = t
        }
        setAddTimeValue(t) {
            this.addTime_text.updateVal(q.StringTools.serverGoldToShowString(t), this.gameDataInstance.tRoomData.currency.type)
        }
        updateCoinModeValue() {
            for (let t = 0; t < this.gameDataInstance.tRoomData.kTablePlayerList.length; ++t) {
                let e = this.gameDataInstance.tRoomData.kTablePlayerList[t];
                if (e) {
                    let t = this.getSeatBySeverId(e.seatid);
                    t && t.updateCoinModeValue()
                }
            }
            this.setFreeSliderText(this._freeSliderValue);
            let t = q.StringTools.formatC(q.config.getStringData("dichiNum"), this._dichiChipValue);
            this.setTotalPotValue(this.gameDataInstance.tRoomData.getDataPointValue(t));
            let e = 0;
            for (let t = 0; t < this.dichi_buttonList.length; t++) {
                let a = f(q.StringTools.formatC("dichi_mangZhuText%d", t), this.dichi_buttonList[t].node);
                switch (t) {
                    case 0:
                        e = this._dichiButton0Value;
                        break;
                    case 2:
                        e = this._dichiButton2Value;
                        break;
                    case 1:
                        e = this._dichiButton1Value;
                        break;
                    case 3:
                        e = this._dichiButton3Value;
                        break;
                    case 4:
                        e = this._dichiButton4Value;
                        break;
                    default:
                        e = this._dichiButton0Value
                }
                null != a && (a.getComponent(o).string = this.gameDataInstance.tRoomData.getDataPointValue(e))
            }
            this.followFill_text.string = this.gameDataInstance.tRoomData.getDataPointValue(this._followFillValue), this.setMainPoolLabel(this.gameDataInstance.tRoomData.getDataPointValue(this._mainPoolValue));
            for (let t in this._sidePotValue) {
                this.sidepoolList[t].getComponentInChildren(o).string = this.gameDataInstance.tRoomData.getDataPointValue(this._sidePotValue[t])
            }
        }
        collectGameEventTrace(t) {
            this._onGameEventTraceList.push([cc_mtt.vv.DataManager.getNow().getTime(), t]), this._onGameEventTraceList = this._onGameEventTraceList.slice(0, 5)
        }
        get gameEventTraceList() {
            return this._onGameEventTraceList
        }
        getUserIDData() {
            var t;
            return q.dataHandler.getUserData().getUserIdByGameID(null == (t = this.gameDataInstance) || null == (t = t.tRoomData) ? void 0 : t.u32GameID)
        }
        closeZoomTips() {
            let t = q.TP.getTag();
            null != t && ("ZoomQuickFold_tips" != t && "Big_Card_Tips" != t && "ZoomQuickFold_tips2" != t || q.TP.hideTipsPanel())
        }
        _setupGameJackpotEventController() {
            this.gameJackPotEventController.init(), this.gameJackPotEventController.setEffectCamera(this._getMainCameraFromScene()), this.gameJackPotEventController.setChipMoveAction(this.ChipsMoveAction.bind(this), this.game.jackPotPanel, this.mainpool), this.gameJackPotEventController.setShowPlayerJackpotAction(this.showPlayerJackPotAction.bind(this)), this.gameJackPotEventController.setShowJackpotActionFunc((() => {
                this.game.sendNetJackPot(), this.hideBombInfoPrompt()
            }))
        }
        _getMainCameraFromScene() {
            return Nt.instance.getParentScene(W, this.node).getComponentInChildren(Z)
        }
        startTrackingNextPaceTable() {
            this.stopTrackingNextPaceTable(), $t.start("TrackNextPaceTable"), this.schedule(this.trackPaceTable, 1)
        }
        stopTrackingNextPaceTable() {
            $t.end("TrackNextPaceTable"), this.unschedule(this.trackPaceTable)
        }
        trackPaceTable() {
            if ($t.getElapseTime("TrackNextPaceTable") > 1e4) {
                var t, e;
                const i = null == (t = this.gameDataInstance) || null == (t = t.tRoomData) ? void 0 : t.u32GameID,
                    n = null == (e = this.gameDataInstance) || null == (e = e.tRoomData) ? void 0 : e.u32RoomId,
                    o = q.roomManager.getRoomByIds(i, n);
                var a;
                if (this.stopTrackingNextPaceTable(), null != o && o.joinedGame) null == (a = Lt.getInstance()) || a.trace(Ot.CashGameIssues, "LengthyMatchingNextPaceRoom", {
                    gameId: i,
                    roomId: n,
                    hasGameHeartbeat: q.netWorkManager.isScheduleGameHeartByGameId(i),
                    isGameServerTimeout: q.netWorkManager.isGameServerTimeout(i),
                    pkwWorldHeartBeatTimeOutCount: q.netWorkManager.pkwWorldHeartBeatTimeOutCount
                }, !1, !1)
            }
        }
        isWaitingPlayers(t) {
            const e = t.tRoomData.kTablePlayerList.filter((t => t.left_stay_time <= 0)).length;
            if (t.tRoomData.pkRoomState.isBegin && e > 1) return !1;
            return 1 === e || e > 0 && t.tRoomData.pkRoomParam.auto_start_num > e
        }
        setEnableWaitingPlayerText(t) {
            if (!t) return void(this.waitForStart_img.active = !1);
            const e = this.mainpool.activeInHierarchy && this.mainpool.getComponent(B).opacity > 0,
                a = this.sidepoolList.some((t => t.activeInHierarchy && t.getComponent(B).opacity > 0));
            this.waitForStart_img.active = !e && !a
        }
        _isSpectatorReveal() {
            return !this._isSeat && this.gameDataInstance.tRoomData.spectatorRevealEnabled
        }
        onPotChange(t) {
            q.MessageCenter.send("pot_changed", {
                gameData: this.gameDataInstance,
                pot: t,
                bb: this.gameDataInstance.tRoomData.pkTableStates.bb_amount
            })
        }
        _checkForHoneyPot() {
            const t = this.getActionBtnColorNodes(),
                e = this.m_pkPublicCard.map((t => t.node));
            te.addComponentToCashGame(this, this.node, this.publicCard_panel, this.actionButtonView, t, e)
        }
        getActionBtnColorNodes() {
            return [this.giveUpRed.node, this.preBetFold.node, this.followFill_Blue.node, this.preBetCheck.node, this.dichi_button0.node, this.dichi_button1.node, this.dichi_button2.node, this.dichi_button3.node, this.dichi_button4.node]
        }
        getSelfHoleCards() {
            return this.m_pkSelfCard
        }
        getDelayTime() {
            return this.gameDataInstance.tGameData.m_u32DelayTime
        }
        isSelfPlayer(t) {
            return t == this.getUserIDData()
        }
        isSelfPlaying() {
            this.seatList.some((t => t.isSelfSeat()));
            return this.seatList.some((t => t.isSelfSeat()))
        }
        getTableName() {
            let t = "";
            if (this.isGameStarSeat()) {
                var e = this.gameDataInstance.tRoomData.pkRoomParam.tableTitle.split("#");
                t = e[q.config.getCurrentLanguageDetails().index] || e[1]
            } else t = this.gameDataInstance.tRoomData.pkRoomParam.game_name;
            return t
        }
        getWindowTitle() {
            return this._windowTitle
        }
        sendHoneyPotMsg(t, e) {
            te.config.enabled && q.MessageCenter.send(t, e)
        }
        trackGuessHandOnStartGame() {
            null == this.lastUnhandledGuessHandTime && this._isAutoGuessHandOn && (this.lastUnhandledGuessHandTime = Date.now(), this.scheduleOnce((() => {
                this.checkGuessHandResponse("StartedHandWithAutoBet")
            }), 5))
        }
        clearGuessHandTracking() {
            this.lastUnhandledGuessHandTime = void 0
        }
        checkGuessHandResponse(t) {
            var e;
            this.lastUnhandledGuessHandTime && Date.now() - this.lastUnhandledGuessHandTime > 5e3 && (this.clearGuessHandTracking(), null == (e = Lt.getInstance()) || e.traceEvent(Ot.CashGameIssues, "UnhandledGuessHand", {
                requestTime: this.lastUnhandledGuessHandTime,
                clientAutoGuessOn: this._isAutoGuessHandOn,
                source: t
            }))
        }
        onGuessSettleDebug(t) {
            xt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || (this.lastUnhandledGuessHandTime = void 0)
        }
        onGuessSetBetOpt(t) {
            this._isAutoGuessHandOn = t
        }
        _makeAppearonTop(t, e) {
            t.active = !0, t.setSiblingIndex(e ?? 120)
        }
        _checkPeeking() {
            return !!this._isPeekRound || (this._cleanPeekCard(), !1)
        }
        _dealRiverForPeek() {
            if (this.m_pkPublicCard[3].setCrackAnim(!1), this.m_pkPublicCard[4].node.active) return Promise.resolve();
            const t = this.m_pkPublicCard[4];
            return t.stopSchedulesAndActions(), t.setFace(!1), t.setGary(!1), t.setOp(!1), t.deal(0), new Promise((t => {
                this.scheduleOnce((() => {
                    t()
                }), .7)
            }))
        }
        async onPeekStart(t) {
            const {
                msg: e,
                gameData: a
            } = t;
            if (!xt.isInvalidRoomMultiWindow(a, null == this ? void 0 : this.node) && (this._isPeekRound = !0, await this._dealRiverForPeek(), this._checkPeeking()))
                if (e.needPeek) {
                    var i;
                    if (this._displayPeekCardOnTable(e.cardItem), await this._peekForSelf(e.cardItem, e.timeout), !this._checkPeeking()) return;
                    let t = Math.max(.5, Math.min(4, e.timeout - Date.now() / 1e3 + 2));
                    null == (i = this._peekCardDisplay) || i.open(t)
                } else {
                    if (await this._displayPeekCardOnTable(e.cardItem), !this._checkPeeking()) return;
                    this.scheduleOnce((() => {
                        var t;
                        let a = Math.max(.2, Math.min(4, e.timeout - Date.now() / 1e3));
                        null == (t = this._peekCardDisplay) || t.open(a)
                    }), 1)
                }
        }
        onPeekFinish(t) {
            var e, a, i;
            const {
                msg: n,
                gameData: o
            } = t;
            var s;
            xt.isInvalidRoomMultiWindow(o, null == this ? void 0 : this.node) || this._checkPeeking() && (null == (e = this._peekCardPupup) || e.setOnOpenCard(void 0), null == (a = this._peekCardPupup) || a.setOnClickOpenCard(void 0), null != (i = this._peekCardDisplay) && i.node.active && (null == (s = this._peekCardDisplay) || s.open(2)))
        }
        _afterRealDealCard() {
            this._cleanPeekCard(), this._isPeekRound = !1
        }
        _cleanPeekCard(t = !1) {
            var e, a, i;
            (null != (e = this._peekCardPupup) && e.isValid && (t ? this._peekCardPupup.node.destroy() : (this._peekCardPupup.setOnOpenCard(void 0), this._peekCardPupup.setOnClickOpenCard(void 0), this._peekCardPupup.node.active = !1)), null != (a = this._peekCardDisplay) && a.isValid) && (null != (i = this.m_pkPublicCard[3]) && null != (i = i.node) && i.active && (this.m_pkPublicCard[4].node.active = !0), t ? this._peekCardDisplay.node.destroy() : this._peekCardDisplay.node.active = !1);
            t && (this._peekCardPupup = null, this._peekCardDisplay = null)
        }
        _peekForSelf(t, e) {
            if (!this._peekCardPupup) {
                const t = D(this.peekCardPopup);
                this._peekCardPupup = t.getComponent(de);
                const e = this.node;
                t.setParent(e)
            }
            this._peekCardPupup.node.setSiblingIndex(999);
            const a = this._peekCardPupup;
            return a.node.active = !0, a.init(t.number, t.suit, e), a.setOnClickOpenCard(this._sendPeekCardFinishReq.bind(this)), new Promise((t => {
                null == a || a.setOnOpenCard((() => {
                    t()
                }))
            }))
        }
        async _displayPeekCardOnTable(t) {
            const e = this.m_pkPublicCard[4],
                a = this.publicCard_panel;
            if (this.peekCardDisplayHolder.setPosition(a.position), !this._peekCardDisplay) {
                const t = D(this.peekCardDisplay);
                this._peekCardDisplay = t.getComponent(he), t.setParent(this.peekCardDisplayHolder), t.active = !1
            }
            const i = this._peekCardDisplay;
            if (await e.setContent(t.number, t.suit), !this._checkPeeking()) return;
            const n = e.img_back.spriteFrame;
            i.setCardType(q.tools.GetCardFace()), i.setCardBack(n), i.setCardFace(t.number, t.suit);
            const o = e.node.parent.getWorldPosition(),
                s = i.getComponent(b).convertToNodeSpaceAR(o);
            i.node.setPosition(s), i.cardPeeker.node.setPosition(I(0, -1, 0)), e.node.active = !1, i.node.active = !0;
            const l = e.img_back.node.getComponent(b).contentSize;
            i.setSize(l.width * a.scale.x, l.height * a.scale.y), i.setOpened(!1), i.cardPeeker.reset()
        }
        _sendPeekCardFinishReq() {
            q.gameNet.requestPeekCard(this.gameDataInstance.tRoomData.u32RoomId)
        }
        _traceIsPeekCardCleared() {
            var t, e, a;
            const i = {
                peekCardDisplay: !1,
                peekcardPopup: !1,
                riverCard: !1
            };
            let n = !1;
            var o;
            (C(this._peekCardDisplay) && null != (t = this._peekCardDisplay) && null != (t = t.node) && t.active && (i.peekCardDisplay = !0, n = !0), C(this._peekCardPupup) && null != (e = this._peekCardPupup) && null != (e = e.node) && e.active && (i.peekcardPopup = !0, n = !0), C(this.m_pkPublicCard[4].node) && null != (a = this.m_pkPublicCard[4]) && null != (a = a.node) && a.active && (i.riverCard = !0, n = !0), n) && (null == (o = Lt.getInstance()) || o.traceEvent(Ot.PeekCard, "Peek Card Clean Up Message", i))
        }
    }).prototype, "bottomMenuHandler", [Se], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Pi = e(Ri.prototype, "newReplayer", [Ce], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), wi = e(Ri.prototype, "seatPanel", [fe], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Bi = e(Ri.prototype, "pokerNameText", [be], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Ei = e(Ri.prototype, "tablePositions", [De], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Mi = e(Ri.prototype, "deal_button", [Ie], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Gi = e(Ri.prototype, "shop_button", [ye], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Ni = e(Ri.prototype, "deal_text", [Te], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Fi = e(Ri.prototype, "deal_icon", [ke], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Li = e(Ri.prototype, "addTime_button", [ve], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Oi = e(Ri.prototype, "damon_img", [Re], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), xi = e(Ri.prototype, "waitForStart_img", [Ae], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Ui = e(Ri.prototype, "allReview_button", [Pe], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Vi = e(Ri.prototype, "face_button", [we], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Wi = e(Ri.prototype, "emoji_button", [Be], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), zi = e(Ri.prototype, "record_button_img", [Ee], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Hi = e(Ri.prototype, "record_button", [Me], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Zi = e(Ri.prototype, "gaopai", [Ge], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), ji = e(Ri.prototype, "dichiChip_text", [Ne], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), qi = e(Ri.prototype, "mainpool", [Fe], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Yi = e(Ri.prototype, "sidePot", [Le], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Ji = e(Ri.prototype, "D_img", [Oe], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), $i = e(Ri.prototype, "actionButtonView", [xe], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Xi = e(Ri.prototype, "actionButtonView_2", [Ue], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Qi = e(Ri.prototype, "sliderBg", [Ve], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Ki = e(Ri.prototype, "freeSliderText_bg", [We], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), tn = e(Ri.prototype, "freeSliderText", [ze], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), en = e(Ri.prototype, "freeSlider", [He], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), an = e(Ri.prototype, "freeSliderContainer", [Ze], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), nn = e(Ri.prototype, "freeSliderProgressBar", [je], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), on = e(Ri.prototype, "freeHandle", [qe], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), sn = e(Ri.prototype, "backGame_button", [Ye], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), ln = e(Ri.prototype, "backAllTable_button", [Je], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), rn = e(Ri.prototype, "backGamePanel", [$e], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), hn = e(Ri.prototype, "forceShowCard_button", [Xe], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), dn = e(Ri.prototype, "showcardDamon_img", [Qe], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), un = e(Ri.prototype, "forceShowCard_text", [Ke], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), mn = e(Ri.prototype, "mainpool_text", [ta], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), cn = e(Ri.prototype, "mainpool_chips", [ea], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), gn = e(Ri.prototype, "mangZhu_text", [aa], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), pn = e(Ri.prototype, "freeFill_button", [ia], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), _n = e(Ri.prototype, "freeFill_button_img", [na], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Sn = e(Ri.prototype, "preBetFold", [oa], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Cn = e(Ri.prototype, "preBetFoldText", [sa], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), fn = e(Ri.prototype, "preBetCheck", [la], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), bn = e(Ri.prototype, "preBetCheckText", [ra], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Dn = e(Ri.prototype, "preBetCheckAmountText", [ha], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), In = e(Ri.prototype, "buttonFoldText", [da], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), yn = e(Ri.prototype, "buttonCheckText", [ua], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Tn = e(Ri.prototype, "buttonCallText", [ma], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), kn = e(Ri.prototype, "gameTypeText", [ca], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), vn = e(Ri.prototype, "bgImageList", [ga], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return []
        }
    }), Rn = e(Ri.prototype, "borderGraphicsImageList", [pa], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return []
        }
    }), An = e(Ri.prototype, "prefab_report", [_a], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Pn = e(Ri.prototype, "seat", [Sa], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), wn = e(Ri.prototype, "followFill_Blue", [Ca], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Bn = e(Ri.prototype, "giveUpRed", [fa], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), En = e(Ri.prototype, "followFill_text", [ba], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Mn = e(Ri.prototype, "followFill_button", [Da], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Gn = e(Ri.prototype, "allInDichi", [Ia], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Nn = e(Ri.prototype, "dichiButtonContainer", [ya], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Fn = e(Ri.prototype, "dichi_button0", [Ta], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Ln = e(Ri.prototype, "dichi_button1", [ka], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), On = e(Ri.prototype, "dichi_button2", [va], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), xn = e(Ri.prototype, "dichi_button3", [Ra], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Un = e(Ri.prototype, "dichi_button4", [Aa], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Vn = e(Ri.prototype, "dichi_mangZhuText0", [Pa], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Wn = e(Ri.prototype, "dichi_mangZhuText1", [wa], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), zn = e(Ri.prototype, "dichi_mangZhuText2", [Ba], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Hn = e(Ri.prototype, "dichi_mangZhuText3", [Ea], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Zn = e(Ri.prototype, "dichi_mangZhuText4", [Ma], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), jn = e(Ri.prototype, "addTime_text", [Ga], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), qn = e(Ri.prototype, "publicCard_panel", [Na], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Yn = e(Ri.prototype, "totalPotTextContainer", [Fa], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Jn = e(Ri.prototype, "winnerCombinationText", [La], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), $n = e(Ri.prototype, "card_panel", [Oa], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Xn = e(Ri.prototype, "modal_panel", [xa], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Qn = e(Ri.prototype, "cardFunTips_text", [Ua], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Kn = e(Ri.prototype, "sliderAllin", [Va], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), to = e(Ri.prototype, "short_pai", [Wa], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), eo = e(Ri.prototype, "zoomWaitNode", [za], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), ao = e(Ri.prototype, "youwin", [Ha], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), io = e(Ri.prototype, "upgradePref", [Za], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), no = e(Ri.prototype, "gameJackPotEventController", [ja], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), oo = e(Ri.prototype, "headAni", [qa], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), so = e(Ri.prototype, "calmDown_prefab", [Ya], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), lo = e(Ri.prototype, "fist_prefab", [Ja], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), ro = e(Ri.prototype, "zhuaji_prefab", [$a], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), ho = e(Ri.prototype, "flower_prefab", [Xa], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), uo = e(Ri.prototype, "money_prefab", [Qa], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), mo = e(Ri.prototype, "towel_prefab", [Ka], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), co = e(Ri.prototype, "fan_prefab", [ti], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), go = e(Ri.prototype, "zoomSurePref", [ei], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), po = e(Ri.prototype, "redEnvelope_btn", [ai], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), _o = e(Ri.prototype, "luckWelcomePopup_layer", [ii], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), So = e(Ri.prototype, "luckWelcomePopup_prefab", [ni], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Co = e(Ri.prototype, "luckButton_prefab", [oi], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), fo = e(Ri.prototype, "guess_hand_card_button", [si], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), bo = e(Ri.prototype, "guess_result_panel", [li], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Do = e(Ri.prototype, "addtimePrefab", [ri], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Io = e(Ri.prototype, "wpto_bomb_ani_prefab", [hi], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), yo = e(Ri.prototype, "bomb_node", [di], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), To = e(Ri.prototype, "autoBuyinMessage_node", [ui], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), ko = e(Ri.prototype, "autoBuyinMessage_richTxt", [mi], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), vo = e(Ri.prototype, "peekCardDisplay", [ci], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {}
    }), Ro = e(Ri.prototype, "peekCardPopup", [gi], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {}
    }), Ao = e(Ri.prototype, "peekCardDisplayHolder", [pi], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {}
    }), Po = e(Ri.prototype, "bighead", [_i], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), wo = e(Ri.prototype, "toggleZoomObserveOnFold", [Si], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Bo = e(Ri.prototype, "hitback_faceitem_prefab", [Ci], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Eo = e(Ri.prototype, "sidePot_prefab", [fi], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Mo = e(Ri.prototype, "pkchipsNode", [bi], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: null
    }), Go = e(Ri.prototype, "dealCenterNode", [Di], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), No = e(Ri.prototype, "gameSceneInstance", [Ii], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Fo = e(Ri.prototype, "gameDataInstance", [yi], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Lo = e(Ri.prototype, "normalMaterial", [Ti], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Oo = e(Ri.prototype, "grayMaterial", [ki], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), vi = Ri)) || vi));
    i._RF.pop()
}