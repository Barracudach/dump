import * as o from "./rollupPluginModLoBabelHelpers.js";
import * as e from "./rollupPluginModLoBabelHelpers.js";
import * as g from "./cc.js";
import * as u from "./cc.js";
import * as h from "./cc.js";
import * as F from "./cc.js";
import * as G from "./cc.js";
import * as f from "./cc.js";
import * as p from "./cc.js";
import * as n from "./cc.js";
import * as U from "./cc.js";
import * as H from "./cc.js";
import * as N from "./cc.js";
import * as a from "./cc.js";
import * as V from "./cc.js";
import * as r from "./cc.js";
import * as P from "./cc.js";
import * as c from "./cc.js";
import * as s from "./cc.js";
import * as E from "./cc.js";
import * as z from "./cc.js";
import * as m from "./cc.js";
import * as C from "./cc.js";
import * as B from "./cc.js";
import * as x from "./cc.js";
import * as S from "./cc.js";
import * as _ from "./cc.js";
import * as M from "./cc.js";
import * as D from "./cc.js";
import * as T from "./cc.js";
import * as b from "./cc.js";
import * as A from "./cc.js";
import * as W from "./cc.js";
import * as O from "./cc.js";
import * as l from "./cc.js";
import * as d from "./cc.js";
import * as R from "./cc.js";
import * as v from "./cc.js";
import * as L from "./cc.js";
import * as i from "./cc.js";
import * as I from "./cc.js";
import * as k from "./cc.js";
import * as w from "./cc.js";
import * as Z from "./cc.js";
import * as y from "./cc.js";
import * as Y from "./cowboy.mjs_cjs=&original=.js";
import * as q from "./cv.js";
import * as K from "./cb.js";
import * as X from "./CowboyCard.js";
import * as j from "./define.js";
import * as J from "./HashMap.js";
import * as Q from "./CowboyEnum.js";
import * as tt from "./CowboyRoomData.js";
import * as et from "./CircleSprite.js";
import * as ot from "./cowboyChart.js";
import * as it from "./HumanboyExchange.js";
import * as nt from "./CowboySetting.js";
import * as st from "./HumanboyList.js";
import * as at from "./HumanboyDialog.js";
import * as rt from "./HumanboyGuid.js";
import * as lt from "./HumanboyMenu.js";
import * as dt from "./HumanboyAdvancedSetting.js";
import * as ht from "./HumanboyAdvancedAuto.js";
import * as _t from "./LuckTurntablesButton.js";
import * as ut from "./Deque.js";
import * as gt from "./Deque.js";
import * as ct from "./Enum.js";
import * as mt from "./HeadPointsAni.js";
import * as Ct from "./PopSilence.js";
import * as pt from "./CurrencyValue.js";
import * as yt from "./AppConfig.js";
import * as At from "./CommonTools.js";
import * as bt from "./CommonTools.js";
import * as wt from "./GameSceneInstance.js";
import * as ft from "./Holdem_RestPopup.js";
import * as Bt from "./CowboyExit.js";
import * as St from "./MiniGameAdvancedAuto.js";
import * as Tt from "./ConcreteAdvancedAuto.js";
import * as Pt from "./ConcreteMiniGameDialog.js";
import * as Ot from "./MiniGameDialog.js";
import * as Et from "./DialogStyleModel.js";
import * as Nt from "./Particle_2D.js";
import * as Rt from "./CowboySkeletonAnimHandler.js";
import * as Lt from "./MiniGameRuleContainer.js";
import * as vt from "./MiniGameRuleContainer.js";
import * as It from "./MiniGamePopupManager.js";
import * as Dt from "./StatusView.js";
import * as Wt from "./MiniGameSoundManager.js";
import * as xt from "./GroupLabel.js";
import * as Mt from "./MappingPlist.js";
import * as Gt from "./ToastMessage.js";
import * as Ht from "./AnalyticsHandler.js";
import * as Ft from "./LoginController.js";
import * as kt from "./PushNoticeInGame.js";
import * as zt from "./NodeTools.js";
import * as Ut from "./node-extension.js";
import * as Zt from "./TweenControl.js";

function main() {
    var Vt, Yt, qt, Kt, Xt, jt, Jt, Qt, $t, te, ee, oe, ie, ne, se, ae, re, le, de, he, _e, ue, ge, ce, me, Ce, pe, ye, be, Ae, we, fe, Be, Se, Te, Pe, Oe, Ee, Ne, Re, ve, Le, Ie, De, We, xe, Me, Ge, He, Fe, ke, ze, Ue, Ze, Ve, Ye, qe, Ke, Xe, je, Je, Qe, $e, to, eo, oo, io, no, so, ao, ro, lo, ho, _o, uo, go, co, mo, Co, po, yo, bo, Ao, wo, fo, Bo, So, To, Po, Oo, Eo, No, Ro, vo;
    i._RF.push({}, "38387rVAFROaZ5p3ynF+Knw", "cowboyScene", void 0);
    let Lo = t("COWBOY_LOCAL_ZORDER", function(t) {
        return t[t.COWBOY_LOCAL_ZORDER_DUMMY = 0] = "COWBOY_LOCAL_ZORDER_DUMMY", t[t.COWBOY_LOCAL_ZORDER_IMG_HEAD = 1] = "COWBOY_LOCAL_ZORDER_IMG_HEAD", t[t.COWBOY_LOCAL_ZORDER_IMG_WIN_COUNT = 12] = "COWBOY_LOCAL_ZORDER_IMG_WIN_COUNT", t[t.COWBOY_LOCAL_ZORDER_COIN_NODE = 13] = "COWBOY_LOCAL_ZORDER_COIN_NODE", t[t.COWBOY_LOCAL_ZORDER_ANIM_NODE = 14] = "COWBOY_LOCAL_ZORDER_ANIM_NODE", t[t.COWBOY_LOCAL_ZORDER_TIMELINE_NODE = 15] = "COWBOY_LOCAL_ZORDER_TIMELINE_NODE", t[t.COWBOY_LOCAL_ZORDER_ADVANCE_AUTO_SELECT = 16] = "COWBOY_LOCAL_ZORDER_ADVANCE_AUTO_SELECT", t[t.COWBOY_LOCAL_ZORDER_REWRAD_TIP = 17] = "COWBOY_LOCAL_ZORDER_REWRAD_TIP", t[t.COWBOY_LOCAL_ZORDER_RED_PACKAGE = 18] = "COWBOY_LOCAL_ZORDER_RED_PACKAGE", t[t.COWBOY_LOCAL_ZORDER_MENU_PANEL = 99] = "COWBOY_LOCAL_ZORDER_MENU_PANEL", t[t.COWBOY_LOCAL_ZORDER_TOAST = 100] = "COWBOY_LOCAL_ZORDER_TOAST", t[t.COWBOY_LOCAL_ZORDER_GUIDE = 101] = "COWBOY_LOCAL_ZORDER_GUIDE", t[t.COWBOY_LOCAL_ZORDER_ADVANCE_AUTO_ADD_SELECT = 102] = "COWBOY_LOCAL_ZORDER_ADVANCE_AUTO_ADD_SELECT", t[t.COWBOY_LOCAL_ZORDER_GIFT_POPUP = 103] = "COWBOY_LOCAL_ZORDER_GIFT_POPUP", t[t.COWBOY_LOCAL_ZORDER_GIFT_WELCOME = 104] = "COWBOY_LOCAL_ZORDER_GIFT_WELCOME", t[t.COWBOY_LOCAL_ZORDER_CONNECTION_LOST = 105] = "COWBOY_LOCAL_ZORDER_CONNECTION_LOST", t[t.COWBOY_LOCAL_ZORDER_LOADING_SCREEN = 998] = "COWBOY_LOCAL_ZORDER_LOADING_SCREEN", t
    }({}));
    class Io {
        constructor() {
            this.iAreaIdx = -1, this.iWayOutLoseLimitCount = 0, this.panelWayOut = null, this.rtxtWayOut = null, this.vWayOutImg = [], this.vWayOutImgSrcPos = [], this.eWayOutStyle = X.eGameboyWayOutStyle.GWS_NONE
        }
    }
    t("tCowboyWayOutInfo", Io);
    class Do {
        constructor() {
            this.uid = 0, this.bg = null, this.textCoin = null, this.nbFlag = null
        }
    }
    t("OtherPlayerHead", Do);
    class Wo {
        constructor() {
            this.audioId = 0, this.duringTime = 0, this.startPlayTime = 0, this.bGoOn = !1, this.func = null
        }
    }
    const {
        ccclass: xo,
        property: Mo
    } = d;
    t("default", (Vt = Mo(n), Yt = Mo(n), qt = Mo(n), Kt = Mo(n), Xt = Mo(n), jt = Mo(n), Jt = Mo(n), Qt = Mo(n), $t = Mo(n), te = Mo(n), ee = Mo(n), oe = Mo(n), ie = Mo(n), ne = Mo(n), se = Mo(n), ae = Mo(n), re = Mo(n), le = Mo(n), de = Mo(n), he = Mo(n), _e = Mo(n), ue = Mo(n), ge = Mo(n), ce = Mo(s), me = Mo(s), Ce = Mo(s), pe = Mo(s), ye = Mo(s), be = Mo(a), Ae = Mo(a), we = Mo(a), fe = Mo(n), Be = Mo(n), Se = Mo(n), Te = Mo(n), Pe = Mo(n), Oe = Mo(n), Ee = Mo(r), Ne = Mo(l), Re = Mo(l), ve = Mo(xt), Le = Mo(r), Ie = Mo(Ft), De = Mo(n), We = Mo(n), xe = At(), xo((He = e((Ge = class extends h {
        constructor(...t) {
            super(...t), o(this, "round_start_prefab", He, this), o(this, "fight_begin_prefab", Fe, this), o(this, "fight_end_prefab", ke, this), o(this, "wait_for_next_round_prefab", ze, this), o(this, "win_flag_prefab", Ue, this), o(this, "special_card_type_prefab", Ze, this), o(this, "win_player_light_prefab", Ve, this), o(this, "btnBet_0_prefab", Ye, this), o(this, "btnBet_3_prefab", qe, this), o(this, "mainCowboyPrefab", Ke, this), o(this, "mainBullPrefab", Xe, this), o(this, "cowboyChart", je, this), o(this, "humanboyExchange_prefab", Je, this), o(this, "cowboyRule", Qe, this), o(this, "cowboySetting", $e, this), o(this, "cowboyExit", to, this), o(this, "cowboyList", eo, this), o(this, "humanboyAdvancedSetting_prefab", oo, this), o(this, "humanboyGuid_prefab", io, this), o(this, "HumanboyMenu_prefab", no, this), o(this, "HumanboyAdvancedAuto_prefab", so, this), o(this, "MiniGameAddAdvancedAuto_prefab", ao, this), o(this, "HumanboyDialog_prefab", ro, this), o(this, "game_dznz_PLIST", lo, this), o(this, "cowboy_trend_anim_PLIST", ho, this), o(this, "special_card_type_PLIST", _o, this), o(this, "chart_PLIST", uo, this), o(this, "cowboy_PLIST", go, this), o(this, "win_num_FNT", co, this), o(this, "bet_btn_num_gray", mo, this), o(this, "bet_btn_num_yellow", Co, this), o(this, "luckButton_prefab", po, this), o(this, "points_ani_prefab", yo, this), o(this, "popSilencePre", bo, this), o(this, "miniGameLoadingScreenPrefab", Ao, this), o(this, "resultCardTypePrefab", wo, this), o(this, "winCountPrefab", fo, this), o(this, "menuAnchorPoint", Bo, this), o(this, "btnInfo", So, this), o(this, "btnInfo2", To, this), o(this, "mappingPlist", Po, this), o(this, "luckPanelLayer", Oo, this), o(this, "pushNotice", Eo, this), o(this, "luckWelcomePopup_prefab", No, this), o(this, "mxnCurrencyInfo_prefab", Ro, this), this._luckWelcomePopupNode = null, this._hasShownLuckWelcomePopup = !1, this.points_node = null, this._cardPanel = null, this._oriRedHandCards = [], this._oriBlueHandCards = [], this._oriPublicCards = [], this._oriRedHandCardsPos = [], this._oriBlueHandCardsPos = [], this._oriPublicCardsPos = [], this._redHandCards = [], this._blueHandCards = [], this._publicCards = [], this._redCardType = null, this._blueCardType = null, this._redCardTypeBg = null, this._blueCardTypeBg = null, this._mapLevelCardTypeImage = new j, this._redCardTypeWinNode = null, this._redCardTypeLoseNode = null, this._blueCardTypeWinNode = null, this._blueCardTypeLoseNode = null, this._gameContent = null, this._menuPanel = null, this._betContentBg = null, this._menuBg = null, this._bottomPanel = null, this._btnMenu = null, this._btnPlayerList = null, this.self_panel = null, this._topBg = null, this._btnZouShi = null, this._betButtons = [], this._betButtonTexts = [], this._betButtonMasks = [], this._vBottomBetBtns = [], this._betButtonNum = 5, this._fBetBtnSrcScaleRate = .75, this._fBetBtnTarScaleRate = 1, this._fFlyCoinScaleRate = .5, this._curBetButtonIdx = 0, this.bottom_bg = null, this._panel_betbtn = null, this._btnBetAuto = null, this._labelBetAuto = null, this._autoBetUsingNode = null, this._btnBetClean = null, this._labelBetClean = null, this._betAreas = [], this._betCoinContents = [], this._textSelfBetNum = [], this._textTotalBetNum = [], this._oriTextSelfBetNumPos = [], this._oriTextTotalBetNumPos = [], this._sprBetAreaWinFlags = [], this._textBetAreaOdds = [], this._mapBetOptionArea = new j, this._betCountDownBg = null, this._textCountDown = null, this._oriBetCountDownBgPos = new _(0, 0), this._textNickName = null, this._textCoin = null, this._selfHeadBg = null, this._selfCoin = null, this._otherPlayerHeads = [], this._otherPlayerDescLeft = null, this._otherPlayerDescRight = null, this._leftPlayerPanel = null, this._rightPlayerPanel = null, this._heroBoy = null, this._heroCow = null, this._nodeAnim = null, this._timelineNodeAnim = null, this._roundStartAnim = null, this._roundStartAction = null, this._fightBeginAnim = null, this._fightBeginAction = null, this._fightEndAnim = null, this._fightEndAction = null, this._waitForNextRoundAnim = null, this._waitForNextRoundAction = null, this._effNode = null, this._prizeAnim = null, this._prizeAction = null, this._prizeActionIndex = 0, this._winFlagAnims = [], this._winFlagActions = [], this._gameTipsBg = null, this._textGameTips = null, this._rewardPanel = null, this._rewardTips = null, this._rewardPanel_width = 0, this._recordDotsTemp = [], this._recordDots = [], this._oriRecordDotsPos = [], this._lastRecordDotWorldPos = new _(0, 0), this._recordNum = 12, this._humanboyGuid = null, this._humanboyMenu = null, this._humanboyAdvancedSetting = null, this._humanboyAdvancedAuto = null, this._eAutoBtnStyle = X.eGameboyAutoBtnStyle.GAB_STYLE_NONE, this._cowboyChart = null, this._cowboyExchange = null, this._cowboyRule = null, this._cowboySetting = null, this._cowboyExit = null, this._cowboyList = null, this._toastNode = null, this._HEAD_IMG_TAG = "cowboy_head_tag", this._openIphoneXAdapter = !0, this._leftTime = 0, this._btn_redpacket_festival = null, this._btn_redpacket_festival_layer = null, this._luckButton = null, this._advancceAutoTipsLabelKey = void 0, this._isAdaptiveOnce = !1, this.s_cowboyBGM = "zh_CN/game/cowboy/audio/back", this.s_kaipai = "zh_CN/game/cowboy/audio/kaipai", this.s_fapai = "zh_CN/game/cowboy/audio/fapai", this.s_chuzhan_kaizhan = "zh_CN/game/cowboy/audio/half_time", this.s_betin = "zh_CN/game/cowboy/audio/chip", this.s_betin_many = "zh_CN/game/cowboy/audio/hechip", this.s_win_lose = "zh_CN/game/cowboy/audio/bx_getCoin", this.s_get_win_coin = "zh_CN/game/cowboy/audio/bigying", this.s_button = "zh_CN/game/cowboy/audio/press", this.s_time_tick = "zh_CN/game/cowboy/audio/time", this.s_begin_bet = "zh_CN/game/cowboy/audio/begin_bet", this.s_end_bet = "zh_CN/game/cowboy/audio/end_bet", this.s_special_card_type = "zh_CN/game/cowboy/audio/special_card_type_big", this.s_timer_starts = "zh_CN/game/cowboy/audio/Timer_Starts", this.s_timer_end = "zh_CN/game/cowboy/audio/Timer_Ends", this.s_next_round_in = "zh_CN/game/cowboy/audio/Next_Round_In", this.s_vs = "zh_CN/game/cowboy/audio/VS", this.silenceMusic = "zh_CN/game/dzpoker/audio/silence2", this._waitForNextRoundOutTheshould = 2, this._betCountDownEndDuration = .3, this._fightEndDuration = 1.05, this._showHandCardsDuration = 1, this._showPublicCardsDuration = 1.5, this._hideLoseBetCoinsDuration = 1.5, this._specialCardTypeDuration = 8, this._betWinFlagsAndFlyCoinsDuration = 2.7, this._showNextRoundDuration = 3, this.AREA_SIZE = 10, this.trend_anim = null, this._coinNode = null, this._coinNodeByArea = [], this._circlePool = new u, this._squarePool = new u, this._areaCoinMax = [200, 200, 200, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100], this._isAddEvent = !1, this._mapWayOutInfo = new j, this._fActExecute_WayOut = 1, this._mainCowboyNode = null, this._mainCowboyAction = null, this._mainCowboyParticle = null, this._mainBullNode = null, this._mainBullAction = null, this._mainBullParticle = null, this._vCoinOptimizationDeque = new _t, this._msInterval = 1, this._msNowTime = 0, this._msLastTime = 0, this._nLeftTime = 0, this._nMinTime = 0, this._isIpad = !1, this._isEnterBackground = !1, this._effectMap = new j, this._isViewX = !1, this._bSwitchTable = !1, this._isPlayingTimerEnd = !1, this._skeletonAnimHandler = null, this._miniGameLoadingScreen = null, this._statusController = null, this._autobetBtnColor = void 0, this.g_fullScreenOffset = new g(g.ZERO), this._isLeaving = !1, this._timerEndAudioId = 0, this.bet_content_bg_ipx_width = 1823, this.DESIGN_COWBOY_SCENE_W = 2340, this.DESIGN_COWBOY_SCENE_H = 1536, o(this, "gameSceneInstance", vo, this), this.advanceAutoAddBet = null, this.onPageVisibilityChange = () => {
                if (!Y.appConfig.isWebApp) return;
                const t = document.visibilityState;
                "hidden" === t ? this.OnAppEnterBackground() : "visible" === t && this.OnAppEnterForeground()
            }
        }
        onLoad() {
            if (Y.appConfig.isWebApp) {
                const t = this.node.scene.getComponentInChildren(c);
                t.overrideResolutionPolicy = !0, t.resolutionPolicy = m.NO_BORDER
            }
            Y.config.setCurrentScene(Y.Enum.SCENE.COWBOY_SCENE);
            Y.appConfig.getGeneralConfig().useSeparateSceneCasinoLandscape && Y.appConfig.isLandscapeLayout || Y.config.origionAdaptScreenHen(this.node), Y.appConfig.getGeneralConfig().multiWindowEnabled ? Y.resMgr.adaptWidget(this.node, !0, !1) : Y.resMgr.adaptWidget(this.node, !0), Y.config.GET_CLIENT_TYPE() == Y.Enum.ClientType.CowboyWeb && (C("bottomPanel/self_panel/btn_shop_valid", this.node).active = !1), this._skeletonAnimHandler = this.node.addComponent(Nt), Y.appConfig.getGeneralConfig().multiWindowEnabled && (this._miniGameLoadingScreen = p(this.miniGameLoadingScreenPrefab), this.node.addChild(this._miniGameLoadingScreen), this._miniGameLoadingScreen.active = !0, this._miniGameLoadingScreen.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_LOADING_SCREEN), Y.SwitchLoadingView.hide(), Y.SwitchLoadingView.switchToPotrait()), (Y.appConfig.isWebApp || y.isMobile) && (b.on("canvas-resize", this.onResize, this), this.registerPageVisibility())
        }
        start() {
            var t;
            if (Y.appConfig.getGeneralConfig().multiWindowEnabled) {
                let t = Y.roomManager.getGameScene(Y.Enum.GameId.CowBoy, Y.roomManager.getMiniGameRoomIdTemplate(Y.Enum.GameId.CowBoy));
                if (t) {
                    t.windowID;
                    A.setWindowTitle(t.windowID, "Poker Flips")
                }
                Y.resMgr.adaptWidget(this.node, !0, !1)
            }
            Y.appConfig.isWebApp && (this.onResize(!0), Y.native.isFullScreen() && (this.g_fullScreenOffset.x = Y.native.isScreenLandscape() ? Y.viewAdaptive.IPHONEX_OFFSETY : 0, this.g_fullScreenOffset.y = Y.native.isScreenLandscape() ? 0 : Y.viewAdaptive.IPHONEX_OFFSETY)), Y.SHOP && Y.SHOP.msgNode && (Y.SHOP.msgNode.active = !1), this.pushNotice.setPushNoticeType(ut.PUSH_COWBOY), q.addPlist("game_dznz_PLIST", this.game_dznz_PLIST), q.addPlist("special_card_type_PLIST", this.special_card_type_PLIST), q.addPlist("cowboy_trend_anim_PLIST", this.cowboy_trend_anim_PLIST), q.addPlist("chart_PLIST", this.chart_PLIST), this._gameContent = this.node.getChildByName("game_content"), this._bottomPanel = this.node.getChildByName("bottomPanel"), console.log("this._bottomPanel.position = " + this._bottomPanel.position), this._heroBoy = C("node_boy/img", this._gameContent), this._heroCow = C("node_cow/img", this._gameContent), this._gameTipsBg = this.node.getChildByName("game_tips_bg").getComponent(w), this._textGameTips = this._gameTipsBg.node.getChildByName("text_game_tips").getComponent(f), this._gameTipsBg.node.active = !1, this._rewardPanel = this.node.getChildByName("rewardPanel"), this._rewardPanel_width = this._rewardPanel.getComponent(B).width, this._rewardTips = this._rewardPanel.getChildByName("notice_text").getComponent(S), this._rewardPanel.active = !1, this._panel_betbtn = this._bottomPanel.getChildByName("panel_betbtn"), this._coinNode = new r, this._coinNode.name = "_coinNode", this.node.addChild(this._coinNode), this._coinNode.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_COIN_NODE), zt.addOrGetComponent(this._coinNode, B).setContentSize(Y.config.WIDTH, Y.config.HEIGHT), this._nodeAnim = new r, this._nodeAnim.name = "_nodeAnim", this.node.addChild(this._nodeAnim), this._nodeAnim.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_ANIM_NODE), zt.addOrGetComponent(this._nodeAnim, B).setContentSize(Y.config.WIDTH, Y.config.HEIGHT), this._timelineNodeAnim = new r, this._timelineNodeAnim.name = "_timelineNodeAnim", this.node.addChild(this._timelineNodeAnim), this._timelineNodeAnim.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_TIMELINE_NODE), zt.addOrGetComponent(this._timelineNodeAnim, B).setContentSize(Y.config.WIDTH, Y.config.HEIGHT), this.initConnectionView(), this.initTimelineAnims(), this.initCowboyAnims(), this.initCowboyToastNode(), this.initButtonEvents(), this.initCards(), this.initBetArea(), this.initBetButtons(), this.initBetCountDown(), this.initPlayersInfo(), this.initHistoryDots(), this.adaptiveScreen(), this.initRedPackage(), this.adaptiveBetBtnPanel(), this.initWinFlagAnims(), this.initTrendChangeAnim(), this.initGuide(), this.initChart(), this.clearRound(), this.betButtonSelected(0, !0), this._initMexicoInfoPanel(), this._initAudio(), Y.viewAdaptive.isselfchange = !1, Y.viewAdaptive.cowboyroomid = 0, Y.MessageCenter.register("on_cowboy_gamedata_syn_notify", this.OnGameDataSynNotify.bind(this), this.node), Y.MessageCenter.register("on_update_trend_notify", this.OnTrendUpdate.bind(this), this.node), Y.MessageCenter.register("on_update_playerlist_notify", this.OnPlayerListUpdate.bind(this), this.node), Y.MessageCenter.register("on_selfinfo_notify", this.OnSelfInfo.bind(this), this.node), Y.MessageCenter.register("showMedalMsg", this.OnCowboyRewardTips.bind(this), this.node), Y.MessageCenter.register("goldViewShop", this.onGoldViewShop.bind(this), this.node), Y.MessageCenter.register("onNoticeOpenCalmDownWindow", this.onCalmDownShowTip.bind(this), this.node), Y.MessageCenter.register("onCalmDownMsg", this.onCalmDownShowTip.bind(this), this.node), Y.MessageCenter.register("on_advance_autobet_add", this.onMsgAdvanceAutobetAdd.bind(this), this.node), Y.MessageCenter.register("click_btn_exit_room", this._onExitRoom.bind(this), this.node), Y.MessageCenter.register("on_leave_room_success", this._onExitRoomSuccess.bind(this), this.node), Y.MessageCenter.register("onClickedExchangeRate", this.showIntroPopup.bind(this), this.node), Y.MessageCenter.register(Y.Enum.MessageCenterAction.statusLatencyUpdated, this.onStatusLantencyUpdated.bind(this), this.node), Y.MessageCenter.register("on_minigame_background_music_enable_updated", this.OnBackgroundMusicEnable.bind(this), this.node), Y.config.isSiyuType() ? (Y.MessageCenter.register("on_syOnEnterBackground", this.OnAppEnterBackground.bind(this), this.node), Y.MessageCenter.register("on_syOnEnterForeground", this.OnAppEnterForeground.bind(this), this.node)) : (T.on(P.EVENT_HIDE, this.OnAppEnterBackground, this), T.on(P.EVENT_SHOW, this.OnAppEnterForeground, this)), Y.MessageCenter.register("switchSceneBegan", this._onMsgSwitchSceneBegan.bind(this), this.node), Y.MessageCenter.register(Y.Enum.MessageCenterAction.ExitRoomGame, this.backToMainScene.bind(this, "", !0), this.node), Y.MessageCenter.register("sendNoticeMsg", this.showNoticeMsg.bind(this), this.node), this.gameSceneInstance && this.gameSceneInstance.gameData && this.gameSceneInstance.gameData.tRoomData && (this.gameSceneInstance.gameData.tRoomData.m_bIsReconnectMode = !0), Y.roomManager.RequestJoinRoom(Y.Enum.GameId.CowBoy, Y.roomManager.getMiniGameRoomIdTemplate(Y.Enum.GameId.CowBoy));
            const e = Y.cowboyPromotionManager.data.instanceData;
            "" != e.launchFromScreen && (Gt.getInstance().sendEvent(e.launchFromScreen, Y.Enum.segmentEvent.PokerFlipLaunched, Y.Enum.Functionality.casino), e.launchFromScreen = ""), wt.requestingJoinCasinoGame && (Gt.getInstance().sendEvent(Y.Enum.CurrentScreen.room, Y.Enum.segmentEvent.CasinoGameStarted, Y.Enum.Functionality.casino, {
                game: "mtt",
                context: "clickThePopUp",
                buttonName: "pokerflips",
                crosssell: !0
            }), wt.requestingJoinCasinoGame = !1), Y.dataHandler.getUserData().minigameId = Y.Enum.GameId.CowBoy, null == (t = this._miniGameLoadingScreen) || t.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_LOADING_SCREEN), Y.StatusView.show(!1)
        }
        onDestroy() {
            Y.StatusView.show(!0), this.cleanData(), Y.StatusView.destroyMiniGameStatusController(), this.clearSoundEffectMap(), this._effectMap = null, (Y.appConfig.isWebApp || y.isMobile) && b.off("canvas-resize", this.onResize, this)
        }
        clearSoundEffectMap() {
            this._effectMap && (this._effectMap.forEach(((t, e) => {
                e && (this.unschedule(e.func), Y.AudioMgr.stopEffect(e.audioId))
            })), this._effectMap.clear())
        }
        OnAppEnterBackground() {
            y.os == y.OS.ANDROID ? (Dt.stopMusic(), Dt.pauseAll()) : Y.tools.IsMiniGameMusicOn() || Dt.play(this.silenceMusic, !0, .5), Y.tools.setEnterbackState(!0), this.clearSoundEffectMap(), this._effectMap.clear(), this._isEnterBackground = !0, O.stopAllByTarget(this.node), this.unscheduleAllCallbacks()
        }
        OnAppEnterForeground() {
            Y.tools.setEnterbackState(!1), y.os == y.OS.ANDROID ? (Dt.resumeAll(), this.OnBackgroundMusicEnable(!0)) : Y.tools.IsMiniGameMusicOn() || Dt.stop(Dt.getAudioID(this.silenceMusic)), this._isEnterBackground = !1
        }
        update(t) {
            this._vCoinOptimizationDeque.size() <= 0 || this._updateCoinOptimization(t)
        }
        getCowboyuserId() {
            return Y.dataHandler.getMiniGameUserId()
        }
        _updateCoinOptimization(t) {
            let e = this._vCoinOptimizationDeque.size();
            if (!(e <= 0))
                if (q.getCowboyRoom().curState === Zt.cowboy_proto.RoundState.BET && this._leftTime > 0) {
                    let t = 0;
                    this._leftTime > 1 ? (t = e / T.getFrameRate(), t = Math.ceil(t)) : t = e;
                    for (let e = 0; e < t; ++e) {
                        let t = this._vCoinOptimizationDeque.pop_front();
                        this.showBetInAnim(t)
                    }
                } else {
                    for (let t = 0; t < e; ++t) {
                        let t = this._vCoinOptimizationDeque.pop_front();
                        this.updatePlayerCoin(t.uid), this.updateBetArea(t.betOption)
                    }
                    this._vCoinOptimizationDeque.clear()
                }
        }
        playEffectForPath(t) {
            if (t && this._effectMap)
                if (this._effectMap.has(t)) {
                    let e = this._effectMap.get(t),
                        o = Y.AudioMgr.getState(e.audioId),
                        i = o == E.AudioState.PLAYING;
                    if (!0 === e.bGoOn && i) return;
                    let n = (new Date).getTime();
                    if (!1 === i) return void(o == E.AudioState.PAUSED ? (console.log(" PAUSED", ", ", e), Y.AudioMgr.resumeEffect(e.audioId), e.startPlayTime = n, this.schedule(e.func, e.duringTime)) : console.log(" !PAUSED state = ", o, ", ", e));
                    console.log(" PLAYING", ", ", e), n > e.startPlayTime + .5 * e.duringTime * 1e3 && (e.bGoOn = !0)
                } else {
                    let e = Y.resMgr.get(t, N),
                        o = Dt.executePlayEffect(e, !1),
                        i = Y.AudioMgr.getDuration(o),
                        n = new Wo;
                    n.audioId = o, n.bGoOn = !1, n.duringTime = i, n.startPlayTime = (new Date).getTime(), n.func = e => {
                        if (!this._effectMap || !this.node.isValid) return;
                        let o = this._effectMap.get(t);
                        o.startPlayTime = (new Date).getTime(), !1 === o.bGoOn && (Y.AudioMgr.pauseEffect(o.audioId), console.log("yyx123 setCurrentTime"), Y.AudioMgr.setCurrentTime(o.audioId, 0), this.unschedule(o.func)), o.bGoOn = !1
                    }, this._effectMap.add(t, n), Y.AudioMgr.setFinishCallback(o, (() => {
                        var e;
                        console.log("yyx123 setFinishCallback"), this.unschedule(n.func), null == (e = this._effectMap) || e.remove(t)
                    })), this.schedule(n.func, n.duringTime)
                }
            else console.warn("Invalid path or effect map not initialized")
        }
        ingorePutInQuenue(t) {
            return t != this.s_begin_bet && t != this.s_end_bet && t != this.s_win_lose && t != this.s_special_card_type && t != this.s_time_tick
        }
        playCowboyEffect(t) {
            this._isLeaving || Y.tools.IsMiniGameSoundEffectOn() && 0 == this._isEnterBackground && (y.isBrowser && this.ingorePutInQuenue(t) ? this.playEffectForPath(t) : Dt.playSoundEffect(t))
        }
        backToCowboyListScene() {
            var t;
            q.getCowboyRoom().Reset(), Y.netWorkManager.closeGameConnect(!1, Y.Enum.GameId.CowBoy, Y.roomManager.getMiniGameRoomIdTemplate(Y.Enum.GameId.CowBoy)), Y.viewAdaptive.isselfchange = !1, Y.viewAdaptive.cowboyroomid = 0;
            const e = null == (t = this.gameSceneInstance) ? void 0 : t.room;
            null == e || e.reset(), Y.action.switchScene(Y.Enum.SCENE.HALL_SCENE, (t => {
                Y.MessageCenter.send("switchSceneToMiniGame")
            }))
        }
        cleanData() {
            Y.MessageCenter.unregister("on_cowboy_gamedata_syn_notify", this.node), Y.MessageCenter.unregister("on_update_trend_notify", this.node), Y.MessageCenter.unregister("on_update_playerlist_notify", this.node), Y.MessageCenter.unregister("on_selfinfo_notify", this.node), Y.MessageCenter.unregister("showMedalMsg", this.node), Y.MessageCenter.unregister("goldViewShop", this.node), Y.MessageCenter.unregister("on_cowboy_game_round_end_notify", this.node), Y.MessageCenter.unregister("on_cowboy_deal_notify", this.node), Y.MessageCenter.unregister("on_cowboy_start_bet_notify", this.node), Y.MessageCenter.unregister("on_cowboy_bet_notify", this.node), Y.MessageCenter.unregister("on_cowboy_auto_bet_notify", this.node), Y.MessageCenter.unregister("on_cowboy_auto_bet_notify_handle_over", this.node), Y.MessageCenter.unregister("on_cowboy_leave_room_succ", this.node), Y.MessageCenter.unregister("on_cowboy_auto_bet_succ", this.node), Y.MessageCenter.unregister("on_cowboy_room_param_change_notify", this.node), Y.MessageCenter.unregister("on_cowboy_server_error", this.node), Y.MessageCenter.unregister("on_cowboy_kick_notify", this.node), Y.MessageCenter.unregister("on_cowboy_join_room_failed", this.node), Y.MessageCenter.unregister("showShopPanel", this.node), Y.MessageCenter.unregister("showLuckButton", this.node), Y.MessageCenter.unregister("turntableResultNotice", this.node), Y.MessageCenter.unregister("update_gold", this.node), Y.MessageCenter.unregister("on_cowboy_bet_amount_level_change", this.node), Y.MessageCenter.unregister("on_cowboy_advance_autobet_set", this.node), Y.MessageCenter.unregister("on_advance_autobet", this.node), Y.MessageCenter.unregister("on_cowboy_advance_autobet_cancel", this.node), Y.MessageCenter.unregister("on_cowboy_advance_autobet_limit_reached", this.node), Y.MessageCenter.unregister("onNoticeOpenCalmDownWindow", this.node), Y.MessageCenter.unregister("onCalmDownMsg", this.node), Y.MessageCenter.unregister("on_advance_autobet_add", this.node), Y.MessageCenter.unregister("click_btn_exit_room", this.node), Y.MessageCenter.unregister("onClickedExchangeRate", this.node), Y.MessageCenter.unregister(Y.Enum.MessageCenterAction.statusLatencyUpdated, this.node), Y.MessageCenter.unregister("on_minigame_background_music_enable_updated", this.node), Y.config.isSiyuType() ? (Y.MessageCenter.unregister("on_syOnEnterBackground", this.node), Y.MessageCenter.unregister("on_syOnEnterForeground", this.node)) : (T.off(P.EVENT_HIDE, this.OnAppEnterBackground, this), T.off(P.EVENT_SHOW, this.OnAppEnterForeground, this)), Y.MessageCenter.unregister(Y.config.CHANGE_LANGUAGE, this.node), Y.MessageCenter.unregister("switchSceneBegan", this.node), Y.MessageCenter.unregister("sendNoticeMsg", this.node), Y.MessageCenter.unregister(Y.Enum.MessageCenterAction.ExitRoomGame, this.node), Dt.stopMusic(), Dt.pauseAll(), this.unschedule(this.onLeftTimeUpdate), this._isPlayingTimerEnd && Dt.stop(this._timerEndAudioId), this._clearWayOutInfo(), this.unregisterPageVisibility()
        }
        backToMainScene(t, e) {
            t = null == t ? "" : t, Y.netWorkManager.closeGameConnect(!1, Y.Enum.GameId.CowBoy, Y.roomManager.getMiniGameRoomIdTemplate(Y.Enum.GameId.CowBoy)), Y.isDesktopBuild() && Y.appConfig.getGeneralConfig().multiWindowEnabled ? Y.MessageCenter.send("showMainTip", t) : q.getCowboyRoom().backToMainTips = t, e ? Y.cowboyNet.RequestLeaveRoom() : Y.roomManager.onResponse_LeaveRoom(Zt.cowboy_proto.LeaveRoomResp.create({
                code: 1
            }), Y.Enum.GameId.CowBoy, Y.roomManager.getMiniGameRoomIdTemplate(Y.Enum.GameId.CowBoy))
        }
        clearRound() {
            this.hideAllWinPlayerLightAnim(), this.hideAllCardsAndCardType(), this.hideWinCards(), this.clearAllBetArea(), this.hideBetCountDown(), this._nodeAnim.destroyAllChildren(), this._nodeAnim.removeAllChildren(), O.stopAllByTarget(this._nodeAnim), this.hideAllTimelineAnims(), this.hideGameTips(), this.hideHistoryMoveAnim(), this.resetPointAni(), this.hideTrendChangeAnim()
        }
        initCards() {
            this._cardPanel = this._gameContent.getChildByName("public_card_panel"), this._oriRedHandCards.push(this._cardPanel.getChildByName("handcard_red_0").getComponent(w)), this._oriRedHandCards.push(this._cardPanel.getChildByName("handcard_red_1").getComponent(w)), this._oriBlueHandCards.push(this._cardPanel.getChildByName("handcard_blue_0").getComponent(w)), this._oriBlueHandCards.push(this._cardPanel.getChildByName("handcard_blue_1").getComponent(w));
            for (let t = 0; t < 2; t++) {
                let e = new _(this._oriRedHandCards[t].node.getPosition()),
                    o = new _(this._oriBlueHandCards[t].node.getPosition());
                this._oriRedHandCardsPos.push(e), this._oriBlueHandCardsPos.push(o), this._redHandCards.push(K.create()), this._blueHandCards.push(K.create()), this._redHandCards[t].ResetFromNode(this._oriRedHandCards[t].node), this._blueHandCards[t].ResetFromNode(this._oriBlueHandCards[t].node)
            }
            for (let t = 0; t < 5; t++) {
                this._oriPublicCards.push(this._cardPanel.getChildByName(Y.StringTools.formatC("handcard_%d", t)).getComponent(w));
                let e = new _(this._oriPublicCards[t].node.getPosition());
                this._oriPublicCardsPos.push(e), this._publicCards.push(K.create()), this._publicCards[t].ResetFromNode(this._oriPublicCards[t].node)
            }
            this._redCardType = this._cardPanel.getChildByName("red_card_type").getComponent(w), this._blueCardType = this._cardPanel.getChildByName("blue_card_type").getComponent(w), this._redCardTypeBg = this._cardPanel.getChildByName("red_card_type_bg").getComponent(w), this._blueCardTypeBg = this._cardPanel.getChildByName("blue_card_type_bg").getComponent(w);
            this._redCardTypeBg.node.setSiblingIndex(-1), this._blueCardTypeBg.node.setSiblingIndex(-1), this._redCardType.node.setSiblingIndex(-1), this._blueCardType.node.setSiblingIndex(-1), this._mapLevelCardTypeImage.add(1, "gaopai"), this._mapLevelCardTypeImage.add(2, "yidui"), this._mapLevelCardTypeImage.add(3, "liangdui"), this._mapLevelCardTypeImage.add(4, "santiao"), this._mapLevelCardTypeImage.add(5, "shunzi"), this._mapLevelCardTypeImage.add(6, "tonghua"), this._mapLevelCardTypeImage.add(7, "hulu"), this._mapLevelCardTypeImage.add(8, "jingang"), this._mapLevelCardTypeImage.add(9, "tonghuashun"), this._mapLevelCardTypeImage.add(10, "huangtong");
            const t = p(this.resultCardTypePrefab);
            this._redCardTypeBg.node.addChild(t), this._redCardTypeWinNode = t.getChildByName("win_card_type").getComponent(Wt), this._redCardTypeLoseNode = t.getChildByName("lose_card_type").getComponent(Wt);
            const e = p(this.resultCardTypePrefab);
            this._blueCardTypeBg.node.addChild(e), this._blueCardTypeWinNode = e.getChildByName("win_card_type").getComponent(Wt), this._blueCardTypeLoseNode = e.getChildByName("lose_card_type").getComponent(Wt)
        }
        getCardTypeString(t) {
            let e = "";
            switch (t) {
                case 1:
                    e = "M_UITitle113";
                    break;
                case 2:
                    e = "M_UITitle114";
                    break;
                case 3:
                    e = "M_UITitle115";
                    break;
                case 4:
                    e = "Cowboy_three_of_a_kind_text";
                    break;
                case 5:
                    e = "M_UITitle117";
                    break;
                case 6:
                    e = "M_UITitle118";
                    break;
                case 7:
                    e = "M_UITitle119";
                    break;
                case 8:
                    e = "Cowboy_quads_text";
                    break;
                case 9:
                    e = "M_UITitle121";
                    break;
                case 10:
                    e = "M_UITitle122"
            }
            return Y.config.getStringData(e)
        }
        hideAllCardsAndCardType() {
            this.setAllCardsVisible(!1), this._redCardType.node.active = !1, this._blueCardType.node.active = !1, this._redCardTypeBg.node.active = !1, this._blueCardTypeBg.node.active = !1, this._blueCardTypeWinNode.node.active = !1, this._blueCardTypeLoseNode.node.active = !1, this._redCardTypeWinNode.node.active = !1, this._redCardTypeLoseNode.node.active = !1
        }
        setAllHandCardsVisible(t) {
            for (let e = 0; e < 2; e++) this._redHandCards[e].node.active = t, this._blueHandCards[e].node.active = t, O.stopAllByTarget(this._redHandCards[e].node), O.stopAllByTarget(this._blueHandCards[e].node), this._redHandCards[e].unscheduleAllCallbacks(), this._blueHandCards[e].unscheduleAllCallbacks(), t && (this._redHandCards[e].node.setPosition(this._oriRedHandCardsPos[e]), this._blueHandCards[e].node.setPosition(this._oriBlueHandCardsPos[e]))
        }
        setAllPublicCardsVisible(t) {
            for (let e = 0; e < 5; e++) this._publicCards[e].node.active = t, O.stopAllByTarget(this._publicCards[e].node), this._publicCards[e].unscheduleAllCallbacks(), t && this._publicCards[e].node.setPosition(this._oriPublicCardsPos[e])
        }
        setAllCardsVisible(t) {
            this.setAllHandCardsVisible(t), this.setAllPublicCardsVisible(t)
        }
        updateAllCardsBack() {
            for (let t = 0; t < 2; t++) this._redHandCards[t].SetFace(!1), this._blueHandCards[t].SetFace(!1);
            for (let t = 0; t < 5; t++) this._publicCards[t].SetFace(!1)
        }
        updateCards() {
            if (this.setAllCardsVisible(!0), this.updateAllCardsBack(), 2 == q.getCowboyRoom().redHandCards.length && 2 == q.getCowboyRoom().blueHandCards.length)
                for (let t = 0; t < 2; t++) this._redHandCards[t].SetContent(q.getCowboyRoom().redHandCards[t].number, q.getCowboyRoom().redHandCards[t].suit), this._blueHandCards[t].SetContent(q.getCowboyRoom().blueHandCards[t].number, q.getCowboyRoom().blueHandCards[t].suit), this._redHandCards[t].SetFace(!0), this._blueHandCards[t].SetFace(!0);
            let t = q.getCowboyRoom().publicCards.length;
            if (1 != t)
                for (let e = 0; e < 5; e++) e < t && (this._publicCards[e].SetContent(q.getCowboyRoom().publicCards[e].number, q.getCowboyRoom().publicCards[e].suit), this._publicCards[e].SetFace(!0));
            else console.log("1111111111-》publicCardNum == 1")
        }
        updateCardTypeText() {
            const t = q.getCowboyRoom().redLevel,
                e = q.getCowboyRoom().blueLevel,
                o = q.getCowboyRoom().result;
            var i, n;
            if (0 == o) null == (i = this._redCardTypeWinNode) || i.setString(this.getCardTypeString(t)), null == (n = this._blueCardTypeWinNode) || n.setString(this.getCardTypeString(e));
            else if (1 == o) {
                var s, a;
                null == (s = this._redCardTypeWinNode) || s.setString(this.getCardTypeString(t)), null == (a = this._blueCardTypeLoseNode) || a.setString(this.getCardTypeString(e))
            } else if (-1 == o) {
                var r, l;
                null == (r = this._redCardTypeLoseNode) || r.setString(this.getCardTypeString(t)), null == (l = this._blueCardTypeWinNode) || l.setString(this.getCardTypeString(e))
            }
        }
        updateCardType() {
            this._redCardTypeBg.node.active = !0, this._blueCardTypeBg.node.active = !0;
            const t = q.getCowboyRoom().redLevel,
                e = q.getCowboyRoom().blueLevel;
            0 == q.getCowboyRoom().result ? (q.loadSpriteTextureByPlist(this.game_dznz_PLIST, this._redCardTypeBg, "win_cardtype_bg"), q.loadSpriteTextureByPlist(this.game_dznz_PLIST, this._blueCardTypeBg, "win_cardtype_bg"), this._redCardTypeWinNode.node.active = !0, this._redCardTypeWinNode.setString(this.getCardTypeString(t)), this._blueCardTypeWinNode.node.active = !0, this._blueCardTypeWinNode.setString(this.getCardTypeString(e))) : 1 == q.getCowboyRoom().result ? (q.loadSpriteTextureByPlist(this.game_dznz_PLIST, this._redCardTypeBg, "win_cardtype_bg"), q.loadSpriteTextureByPlist(this.game_dznz_PLIST, this._blueCardTypeBg, "lose_cardtype_bg"), this._redCardTypeWinNode.node.active = !0, this._redCardTypeWinNode.setString(this.getCardTypeString(t)), this._blueCardTypeLoseNode.node.active = !0, this._blueCardTypeLoseNode.setString(this.getCardTypeString(e))) : -1 == q.getCowboyRoom().result && (q.loadSpriteTextureByPlist(this.game_dznz_PLIST, this._redCardTypeBg, "lose_cardtype_bg"), q.loadSpriteTextureByPlist(this.game_dznz_PLIST, this._blueCardTypeBg, "win_cardtype_bg"), this._redCardTypeLoseNode.node.active = !0, this._redCardTypeLoseNode.setString(this.getCardTypeString(t)), this._blueCardTypeWinNode.node.active = !0, this._blueCardTypeWinNode.setString(this.getCardTypeString(e)))
        }
        updateWinCards() {
            for (let t = 0; t < 2; t++) this._redHandCards[t].Gray(!0), this._blueHandCards[t].Gray(!0);
            for (let t = 0; t < 5; t++) this._publicCards[t].Gray(!0);
            let t = q.getCowboyRoom().winCards.length;
            for (let e = 0; e < t; e++) {
                let t = q.getCowboyRoom().winCards[e],
                    o = !1;
                for (let e = 0; e < 2; e++) {
                    if (this._redHandCards[e].GetNumber() == t.number && this._redHandCards[e].GetSuit() == t.suit) {
                        this._redHandCards[e].Gray(!1), o = !0;
                        break
                    }
                    if (this._blueHandCards[e].GetNumber() == t.number && this._blueHandCards[e].GetSuit() == t.suit) {
                        this._blueHandCards[e].Gray(!1), o = !0;
                        break
                    }
                }
                if (!o)
                    for (let e = 0; e < 5; e++)
                        if (this._publicCards[e].GetNumber() == t.number && this._publicCards[e].GetSuit() == t.suit) {
                            this._publicCards[e].Gray(!1), o = !0;
                            break
                        }
            }
        }
        hideWinCards() {
            for (let t = 0; t < 2; t++) this._redHandCards[t].Gray(!1), this._blueHandCards[t].Gray(!1);
            for (let t = 0; t < 5; t++) this._publicCards[t].Gray(!1)
        }
        updateWinFlags() {
            let t = q.getCowboyRoom().matchOption,
                e = t.length;
            for (let o = 0; o < e; o++) {
                let e = this.getAreaIdxByBetOption(t[o]);
                this.clearBetArea(e), this.hideWinFlagAnim(e), this.showWinFlagAnim(e)
            }
        }
        hideWinFlags() {
            let t = this._winFlagAnims.length;
            for (let e = 0; e < t; e++) this.hideWinFlagAnim(e), this._sprBetAreaWinFlags[e].node.active = !1
        }
        initCowboyToastNode() {
            this._toastNode = new r, this.node.addChild(this._toastNode), this._toastNode.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_ADVANCE_AUTO_ADD_SELECT + 1), zt.addOrGetComponent(this._toastNode, B).setContentSize(Y.config.WIDTH, Y.config.HEIGHT)
        }
        showCowboyToast(t, e) {
            let o = (new r).addComponent(w);
            Y.resMgr.setSpriteFrame(o.node, "zh_CN/game/cowboy/cowboy_tips_bg"), this._toastNode.addChild(o.node);
            let i = (new r).addComponent(f);
            i.verticalAlign = f.VerticalAlign.CENTER, i.horizontalAlign = f.HorizontalAlign.CENTER, i.fontSize = 45, i.lineHeight = 90, i.node.getComponent(R).color = new v(140, 204, 156);
            const n = i.addComponent(Mt);
            n.setMessage(t, e), i.string = n.getMessage();
            const s = Y.resMgr.getLabelStringSize(i);
            o.node.getComponent(B).setContentSize(s.width + 200, o.node.getContentSize().height), o.node.addChild(i.node), L(o.node).sequence(L().delay(.1), L().by(1, {
                position: new _(0, 120, 0)
            })).start(), Ut.fade(o.node, .8, 0, .4, (() => {
                o.node.destroy()
            }))
        }
        clearAllCowboyToasts() {
            this._toastNode.destroyAllChildren(), this._toastNode.removeAllChildren()
        }
        onLeftTimeUpdate(t) {
            this._leftTime--, this._leftTime = this._leftTime < 0 ? 0 : this._leftTime
        }
        resetLeftTimer() {
            this._leftTime = q.getCowboyRoom().leftSeconds, this.unschedule(this.onLeftTimeUpdate), this.schedule(this.onLeftTimeUpdate, 1)
        }
        initConnectionView() {
            if (this._statusController = Y.StatusView.getMiniGameStatusController(), this._statusController && this._statusController.haveAssets()) {
                this.node.getSiblingIndex();
                this.node.insertChild(this._statusController.node, 999), this._statusController.showLatency()
            }
        }
        initTimelineAnims() {
            this._roundStartAnim = this.initAni(this._timelineNodeAnim, this.round_start_prefab), this._roundStartAction = this._roundStartAnim.getComponent(I), this._skeletonAnimHandler.initVersusSkeletons(this._roundStartAnim), this._fightBeginAnim = this.initAni(this._timelineNodeAnim, this.fight_begin_prefab), this._fightBeginAction = this._fightBeginAnim.getComponent(I), this._fightEndAnim = this.initAni(this._timelineNodeAnim, this.fight_end_prefab), this._fightEndAction = this._fightEndAnim.getComponent(I), this._waitForNextRoundAnim = this.initAni(this._timelineNodeAnim, this.wait_for_next_round_prefab), this._waitForNextRoundAction = this._waitForNextRoundAnim.getComponent(I)
        }
        initAni(t, e) {
            let o = p(e);
            return o.active = !1, t.addChild(o), o
        }
        initWinFlagAnims() {
            let t = this._sprBetAreaWinFlags.length;
            for (let e = 0; e < t; e++) {
                let t = this._sprBetAreaWinFlags[e].node,
                    o = this.initAni(this.node, this.win_flag_prefab),
                    i = o.getComponent(I);
                o.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_ANIM_NODE), o.setPosition(o.parent.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(new _(0 + t.position.x, -180 + t.position.y, t.position.z))));
                const n = o.getChildByName("win_29");
                if (n) {
                    [Y.Enum.LANGUAGE_TYPE.en_US, Y.Enum.LANGUAGE_TYPE.zh_TW, ...Y.appConfig.getGameConfig().miniGameConfig.availableLangResForMiniGames].includes(Y.config.getCurrentLanguage()) && Y.resMgr.setSpriteFrame(n, q.getLanguagePath("game/cowboy/language/win_flag"))
                }
                this._winFlagAnims.push(o), this._winFlagActions.push(i)
            }
        }
        _initAudio() {
            Y.tools.isSoundEffectOpen() ? Dt.playMusic(this.s_cowboyBGM, !0) : (Y.tools.SetMiniGameMusicOn(!1), Y.tools.SetMiniGameSoundEffectOn(!1))
        }
        showWinFlagAnim(t) {
            this.getBetOptionByAreaIdx(t);
            this._winFlagAnims[t].active = !0, this.gotoFrameAndPlay(this._winFlagActions[t], 0, 145, !0)
        }
        hideWinFlagAnim(t) {
            t >= Y.StringTools.getArrayLength(this._winFlagAnims) || (this._winFlagAnims[t].active = !1, this.gotoFrameZeroAndPause(this._winFlagActions[t]))
        }
        showSpecialCardTypeAnim(t, e) {
            if (t = 1 == t, e = null == e ? 0 : e, this.clearSpecialCardTypeAnim(), !this.isResultSpecialCardType()) return;
            let o = -1,
                i = q.getCowboyRoom().matchOption,
                n = i.length;
            for (let t = 0; t < n; t++) {
                let e = this.getAreaIdxByBetOption(i[t]),
                    n = this.getBetOptionByAreaIdx(e);
                if (n == q.Enum.BetZoneOption.FIVE_KING_TONG_HUA_SHUN_4) {
                    o = n;
                    break
                }
            }
            if (o < 0) {
                let t = q.getCowboyRoom().matchOption,
                    e = t.length;
                for (let i = 0; i < e; i++) {
                    let e = this.getAreaIdxByBetOption(t[i]),
                        n = this.getBetOptionByAreaIdx(e);
                    if (n == q.Enum.BetZoneOption.HOLE_A) {
                        o = n;
                        break
                    }
                }
            }
            if (o < 0) return;
            let s = 0;
            0 == q.getCowboyRoom().result || 1 == q.getCowboyRoom().result ? s = q.getCowboyRoom().redLevel : -1 == q.getCowboyRoom().result && (s = q.getCowboyRoom().blueLevel);
            let a = "",
                r = "";
            if (o == q.Enum.BetZoneOption.FIVE_KING_TONG_HUA_SHUN_4)
                if (8 == s) a = "special_jingang", r = "special_card_odd_248";
                else if (9 == s) a = "special_tonghuashun", r = "special_card_odd_248";
            else {
                if (10 != s) return void console.log("showSpecialCardTypeAnim, show special cardtype anim error1");
                a = "special_huangtong", r = "special_card_odd_248"
            } else {
                if (o != q.Enum.BetZoneOption.HOLE_A) return void console.log("showSpecialCardTypeAnim, show special cardtype anim error2");
                a = "special_duia", r = "special_card_odd_100"
            }
            let l = this._nodeAnim.getChildByName("special_card_type_anim"),
                d = null;
            l || (l = this.initAni(this._nodeAnim, this.special_card_type_prefab), d = l.getComponent(I), l.name = "special_card_type_anim"), l.active = !0;
            const h = Y.config.getCurrentLanguage(),
                _ = [Y.Enum.LANGUAGE_TYPE.en_US, Y.Enum.LANGUAGE_TYPE.zh_TW, ...Y.appConfig.getGameConfig().miniGameConfig.availableLangResForMiniGames],
                u = l.getChildByName("special_card_type");
            _.includes(h) ? Y.resMgr.setSpriteFrame(u, q.getLanguagePath(`game/cowboy/language/${a}`)) : Y.resMgr.setSpriteFrame(u, `en_US/game/cowboy/language/${a}`), Y.resMgr.setSpriteFrame(l.getChildByName("special_card_odd"), `textures/game/cowboy/plist/${r}`), t ? (this.gotoFrameAndPlay(d, 480, 480, !1), L(this._nodeAnim).delay(e).call((() => {
                l.active = !1, this.showBetWinFlagsAndFlyCoinsAnim()
            })).start()) : (this.playCowboyEffect(this.s_special_card_type), this.gotoFrameAndPlay(d, 0, 480, !1), d.on(I.EventType.FINISHED, (t => {
                d.off(I.EventType.FINISHED), l.active = !1, this.showBetWinFlagsAndFlyCoinsAnim()
            })))
        }
        isResultSpecialCardType() {
            let t = q.getCowboyRoom().matchOption,
                e = Y.StringTools.getArrayLength(t);
            for (let o = 0; o < e; o++) {
                let e = this.getAreaIdxByBetOption(t[o]),
                    i = this.getBetOptionByAreaIdx(e);
                if (i == q.Enum.BetZoneOption.HOLE_A || i == q.Enum.BetZoneOption.FIVE_KING_TONG_HUA_SHUN_4) return !0
            }
            return !1
        }
        clearSpecialCardTypeAnim() {
            let t = this._nodeAnim.getChildByName("special_card_type_anim");
            Y.tools.isValidNode(t) && (t.removeFromParent(), t.destroy())
        }
        initTrendChangeAnim() {
            this.trend_anim = D.createWithSpriteFrames(this.cowboy_trend_anim_PLIST.getSpriteFrames(), 10), this.trend_anim.wrapMode = D.WrapMode.Loop
        }
        showTrendChangeAnim() {
            this._btnZouShi.node.active = !1;
            let t = this._topBg.node.getChildByName("trend_anim");
            Y.tools.isValidNode(t) && (t.removeFromParent(), t.destroy());
            let e = (new r).addComponent(w);
            q.loadSpriteTextureByPlist(this.cowboy_trend_anim_PLIST, e, "cowboy_trend_0"), e.node.name = "trend_anim", e.node.setPosition(this._btnZouShi.node.position.x - 1, this._btnZouShi.node.position.y + 3), this._topBg.node.addChild(e.node);
            let o = e.node.addComponent(I);
            o.addClip(this.trend_anim, "trend_anim"), o.play("trend_anim")
        }
        hideTrendChangeAnim() {
            this._btnZouShi.node.active = !0;
            let t = this._topBg.node.getChildByName("trend_anim");
            Y.tools.isValidNode(t) && (t.removeFromParent(), t.destroy())
        }
        showRecordDotBezierAnim() {
            let t = (new r).addComponent(w),
                e = (new r).addComponent(w),
                o = new _(0, 0),
                i = new _(0, 0),
                n = new _(0, 0);
            if (1 == q.getCowboyRoom().result) {
                q.loadSpriteTextureByPlist(this.game_dznz_PLIST, t, "record_red_fire_light"), q.loadSpriteTextureByPlist(this.game_dznz_PLIST, e, "record_red_fire");
                let s = this.getAreaIdxByBetOption(q.Enum.BetZoneOption.RED_WIN);
                o = this._betAreas[s].getParent().getComponent(B).convertToWorldSpaceAR(this._betAreas[s].getPosition(), o), o = this._nodeAnim.getComponent(B).convertToNodeSpaceAR(o), i = new _(300 + o.x, 80 + o.y), n = new _(600 + o.x, 160 + o.y)
            } else if (-1 == q.getCowboyRoom().result) {
                q.loadSpriteTextureByPlist(this.game_dznz_PLIST, t, "record_blue_fire_light"), q.loadSpriteTextureByPlist(this.game_dznz_PLIST, e, "record_blue_fire");
                let s = this.getAreaIdxByBetOption(q.Enum.BetZoneOption.BLUE_WIN);
                o = this._betAreas[s].getParent().getComponent(B).convertToWorldSpaceAR(this._betAreas[s].getPosition()), o = this._nodeAnim.getComponent(B).convertToNodeSpaceAR(o), i = new _(-80 + o.x, 80 + o.y), n = new _(-120 + o.x, 160 + o.y)
            } else if (0 == q.getCowboyRoom().result) {
                q.loadSpriteTextureByPlist(this.game_dznz_PLIST, t, "record_draw_fire_light"), q.loadSpriteTextureByPlist(this.game_dznz_PLIST, e, "record_draw_fire");
                let s = this.getAreaIdxByBetOption(q.Enum.BetZoneOption.EQUAL);
                o = this._betAreas[s].getParent().getComponent(B).convertToWorldSpaceAR(this._betAreas[s].getPosition()), o = this._nodeAnim.getComponent(B).convertToNodeSpaceAR(o), i = new _(80 + o.x, 80 + o.y), n = new _(160 + o.x, 160 + o.y)
            }
            if (!e) return;
            let s = this._nodeAnim.getComponent(B).convertToNodeSpaceAR(this._lastRecordDotWorldPos);
            this._nodeAnim.addChild(t.node), t.node.active = !1, t.node.setPosition(s), this._nodeAnim.addChild(e.node), e.node.setPosition(o), e.node.scale = W(_.ZERO), zt.addOrGetComponent(e.node, x).opacity = 0, L(e.node).to(.3, {
                scale: W(_.ONE)
            }).start(), L(zt.addOrGetComponent(e.node, x)).to(.3, {
                opacity: 255
            }).start(), this.showTrendChangeAnim();
            let a = Y.StringTools.getArrayLength(this._recordDots),
                l = L(zt.addOrGetComponent(t.node, x)).to(.18, {
                    opacity: 255
                }),
                d = L(zt.addOrGetComponent(t.node, x)).to(.18, {
                    opacity: 0
                });
            L(e.node).delay(.32).call((() => {
                Y.tools.isValidNode(e) && (e.node.removeFromParent(), e.node.destroy()), a > 0 && (this._recordDots[a - 1].node.active = !0), t.node.active = !0, L(zt.addOrGetComponent(t.node, x)).sequence(d, l, d, l, L().destroySelf())
            })).start(), L(this._nodeAnim).delay(.5).call((() => {
                a > 0 && (this._recordDots[a - 1].node.active = !1), this.showHistoryMoveAnim()
            })).start(), L(this._nodeAnim).delay(2).call((() => {
                this.hideTrendChangeAnim()
            })).start()
        }
        showWinPlayerLightAnim(t) {
            let e = this.getPlayerHeadNodesByUid(t);
            if (0 != e.length) {
                for (let t = 0; t < e.length; t++) {
                    let o = e[t];
                    if (o == this._selfHeadBg) continue;
                    let i = o.getChildByName("win_player_light"),
                        n = o.getChildByName(this._HEAD_IMG_TAG),
                        s = n ? n.position : new _(0, 15);
                    i || (i = this.initAni(o, this.win_player_light_prefab), i.name = "win_player_light", i.setPosition(s), i.setSiblingIndex(10));
                    let a = i.getComponent(I);
                    i.active = !0, this.gotoFrameAndPlay(a, 0, 20, !0)
                }
                L(this._nodeAnim).delay(.5).call((() => {
                    this.updatePlayerWinCount(t, !0)
                })).start()
            } else this.updatePlayerWinCount(t, !0)
        }
        hideAllWinPlayerLightAnim() {
            let t = this._otherPlayerHeads.length;
            for (let e = 0; e < t; e++) {
                let t = this._otherPlayerHeads[e].bg.node.getChildByName("win_player_light");
                Y.tools.isValidNode(t) && (t.removeFromParent(), t.destroy())
            }
        }
        updatePlayerWinCount(t, e) {
            e = 1 == e;
            let o = this.getPlayerHeadNodesByUid(t);
            if (0 != o.length)
                for (let i = 0; i < o.length; i++) {
                    let n = o[i];
                    if (this._otherPlayerHeads[0].bg.node == n || this._otherPlayerHeads[1].bg.node == n) continue;
                    let s = this.node.getChildByName("win_player_win_count_" + n.uuid);
                    Y.tools.isValidNode(s) && (s.removeFromParent(), s.destroy());
                    let a = q.getCowboyRoom().getPlayerKeepWinCountByUid(t);
                    if (a >= 3) {
                        a = a > 10 ? 11 : a;
                        const t = p(this.winCountPrefab);
                        t.name = "win_player_win_count_" + n.uuid;
                        let o = n == this._selfHeadBg ? 40 : 70,
                            i = n.convertToWorldSpaceAR(new _(0, o, 1));
                        i = this.node.convertToNodeSpaceAR(i), this.node.addChild(t), t.setPosition(i), t.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_IMG_WIN_COUNT);
                        const s = t.getComponentInChildren(Wt);
                        if (s ? s.setString(Y.config.getStringData(Y.StringTools.formatC("Wins_streak_%d", a))) : M("[CowboyScene] prefab winCountPrefab is missing GroupLabel"), e) {
                            let e = t.getPosition(),
                                o = e,
                                i = n.getParent().getComponent(B).convertToWorldSpaceAR(n.getPosition());
                            i = n.getComponent(B).convertToNodeSpaceAR(i), o = i.x < Y.config.WIDTH / 2 ? new _(-200 + o.x, 0 + o.y) : new _(200 + o.x, 0 + o.y), t.setPosition(o), Ut.moveTo(t, .18, e, G.backOut)
                        }
                    }
                }
        }
        updateAllPlayerWinCount() {
            this.updatePlayerWinCount(this.getCowboyuserId());
            for (let t = 0; t < this._otherPlayerHeads.length; t++) {
                let e = q.getCowboyRoom().otherPlayers;
                if (t < e.length) {
                    let o = e[t];
                    this.updatePlayerWinCount(o.uid)
                }
            }
        }
        hideAllTimelineAnims() {
            this.gotoFrameZeroAndPause(this._roundStartAction), this._roundStartAnim.active = !1, this.gotoFrameZeroAndPause(this._fightBeginAction), this._fightBeginAnim.active = !1, this.gotoFrameZeroAndPause(this._fightEndAction), this._fightEndAnim.active = !1, this.gotoFrameZeroAndPause(this._waitForNextRoundAction), this._waitForNextRoundAnim.active = !1;
            let t = this._winFlagAnims.length;
            for (let e = 0; e < t; e++) this.gotoFrameZeroAndPause(this._winFlagActions[e]), this._winFlagAnims[e].active = !1
        }
        gotoFrameZeroAndPause(t) {
            t.play(), t.stop()
        }
        updatePlayerCoinBeforeSettle() {
            let t = q.getCowboyRoom().playerSettles.get(this.getCowboyuserId());
            if (t) {
                const e = t.curCoin - t.totalWinAmount;
                this.updateUserBalanceStatus(e)
            }
            for (let t = 0; t < this._otherPlayerHeads.length; t++) {
                let e = this._otherPlayerHeads[t];
                if (e.bg.node.active && e.uid > 0) {
                    let t = q.getCowboyRoom().playerSettles.get(e.uid);
                    t && (e.textCoin.string = this.getShortOwnCoinString(t.curCoin - t.totalWinAmount))
                }
            }
        }
        updateUserBalanceStatus(t) {
            Y.dataHandler.getUserData().minigame_coin = t, this._textCoin.string = this.getShortOwnCoinString(t, Y.appConfig.enableUserBalanceShortCoin())
        }
        updateAllCardsBeforeSettle() {
            this.setAllCardsVisible(!0), this.updateAllCardsBack()
        }
        updateAllCardsExceptPublicBeforeSettle() {
            if (this.setAllCardsVisible(!0), this.updateAllCardsBack(), 2 == q.getCowboyRoom().redHandCards.length && 2 == q.getCowboyRoom().blueHandCards.length)
                for (let t = 0; t < 2; t++) this._redHandCards[t].SetContent(q.getCowboyRoom().redHandCards[t].number, q.getCowboyRoom().redHandCards[t].suit), this._blueHandCards[t].SetContent(q.getCowboyRoom().blueHandCards[t].number, q.getCowboyRoom().blueHandCards[t].suit), this._redHandCards[t].SetFace(!0), this._blueHandCards[t].SetFace(!0)
        }
        clearLoseBetCoins() {
            let t = this._betCoinContents.length,
                e = q.getCowboyRoom().matchOption,
                o = q.getCowboyRoom().matchOption.length;
            for (let i = 0; i < t; i++) {
                let t = this.getBetOptionByAreaIdx(i),
                    n = !1;
                for (let i = 0; i < o; i++)
                    if (t == e[i]) {
                        n = !0;
                        break
                    } n || (this._betCoinContents[i].destroyAllChildren(), this._betCoinContents[i].removeAllChildren(), console.log("clearLoseBetCoins-.清理areaIndex = " + i), this.hideAreaCoin(i, !1))
            }
        }
        showRoundStartAnim() {
            this.playCowboyEffect(this.s_vs), this._roundStartAnim.active = !0, this._skeletonAnimHandler.setVersusState(), this.gotoFrameAndPlay(this._roundStartAction, 0, 90, !1), this._roundStartAction.on(I.EventType.FINISHED, (t => {
                this._roundStartAction.off(I.EventType.FINISHED), this._roundStartAnim.active = !1, this.sendCardsAnim()
            }), this)
        }
        sendCardsAnim() {
            this.setAllCardsVisible(!1), this.updateAllCardsBack();
            let t = [],
                e = [],
                o = new g(30, -30),
                i = new g(-30, -30),
                n = new g(-30, -30);
            for (let t = 0; t < 2; t++) this._redHandCards[t].node.setPosition(this._oriRedHandCardsPos[t].x + o.x, this._oriRedHandCardsPos[t].y + o.y), this._blueHandCards[t].node.setPosition(this._oriBlueHandCardsPos[t].x + i.x, this._oriBlueHandCardsPos[t].y + i.y);
            for (let t = 0; t < 5; t++) this._publicCards[t].node.setPosition(this._oriPublicCardsPos[t].x + n.x, this._oriPublicCardsPos[t].y + n.y), this._publicCards[t].SetFace(!1);
            t.push(this._redHandCards[0]), t.push(this._blueHandCards[0]), t.push(this._redHandCards[1]), t.push(this._blueHandCards[1]), e.push(this._oriRedHandCardsPos[0]), e.push(this._oriBlueHandCardsPos[0]), e.push(this._oriRedHandCardsPos[1]), e.push(this._oriBlueHandCardsPos[1]);
            let s = .14,
                a = t.length;
            for (let o = 0; o < a; o++) {
                let i = L().to(s, {
                        position: e[o]
                    }, {
                        easing: Ut.easeInOut(1)
                    }),
                    n = L().delay(0).call((() => {
                        t[o].node.active = !0, t[o].SetFace(!1)
                    })),
                    r = L().delay(0).call((() => {
                        if (o == a - 1)
                            for (let t = 0; t < 5; t++) {
                                let e = L().to(s, {
                                        position: this._oriPublicCardsPos[t]
                                    }, {
                                        easing: Ut.easeInOut(1)
                                    }),
                                    o = function() {
                                        this._publicCards[t].node.active = !0, this._publicCards[t].SetFace(!1), this.playCowboyEffect(this.s_fapai)
                                    }.bind(this),
                                    i = function() {
                                        4 == t && L(this._nodeAnim).delay(.2).call((() => {
                                            this.showFightBeginAnim()
                                        })).start()
                                    }.bind(this);
                                this.scheduleOnce(function() {
                                    this._publicCards[t].node.active = !0, L(this._publicCards[t].node).sequence(L().delay(0).call(o), e, L().delay(0).call(i)).start()
                                }.bind(this), t * s)
                            }
                    }));
                this.scheduleOnce(function() {
                    t[o].node.active = !0, L(t[o].node).sequence(n, i, r).start()
                }.bind(this), o * s), this.scheduleOnce(function() {
                    this.playCowboyEffect(this.s_fapai)
                }.bind(this), .04 + o * s)
            }
        }
        showHandCardsAnim() {
            if (this.setAllCardsVisible(!0), 2 == q.getCowboyRoom().redHandCards.length && 2 == q.getCowboyRoom().blueHandCards.length)
                for (let t = 0; t < 2; t++) this._redHandCards[t].SetContent(q.getCowboyRoom().redHandCards[t].number, q.getCowboyRoom().redHandCards[t].suit), this._redHandCards[t].SetFace(!1), this._redHandCards[t].Turn(!0), this._blueHandCards[t].SetContent(q.getCowboyRoom().blueHandCards[t].number, q.getCowboyRoom().blueHandCards[t].suit), this._blueHandCards[t].SetFace(!1), this._blueHandCards[t].Turn(!0, .5), 0 == t && (this.playCowboyEffect(this.s_kaipai), L(this._nodeAnim).delay(.5).call((() => {
                    this.playCowboyEffect(this.s_kaipai)
                })).start());
            L(this._nodeAnim).delay(this._showHandCardsDuration).call((() => {
                this.showPublicCardsAnim()
            })).start()
        }
        showPublicCardsAnim() {
            let t = q.getCowboyRoom().publicCards.length;
            for (let e = 0; e < 5; e++)
                if (e < t) {
                    let t = L().delay(0).call((() => {
                        4 == e && (L(this._nodeAnim).delay(.3).call((() => {
                            this.hideGameTips(), this.showCardTypeAnim(), this.updateWinCards(), this.showCowboyLoseAnim()
                        })).start(), this.playCowboyEffect(this.s_kaipai))
                    }));
                    this._publicCards[e].SetFace(!1), L(this._publicCards[e].node).sequence(L().to(.3, {
                        position: this._oriPublicCardsPos[0]
                    }), L().call((() => {
                        this._publicCards[e].SetContent(q.getCowboyRoom().publicCards[e].number, q.getCowboyRoom().publicCards[e].suit), this._publicCards[e].Turn(!0)
                    })), L().to(.2, {
                        position: this._oriPublicCardsPos[e]
                    }), t).start()
                } L(this._nodeAnim).delay(this._showPublicCardsDuration).call((() => {
                this.showHideLoseBetCoinsAnim()
            })).start()
        }
        showCardTypeAnim() {
            this.updateCardType(), this._redCardType.node.setScale(W(_.ZERO)), this._blueCardType.node.setScale(W(_.ZERO)), Ut.scaleTo(this._redCardTypeBg.node, .18, new _(_.ONE), Ut.easeInOut(1)), Ut.scaleTo(this._blueCardTypeBg.node, .18, new _(_.ONE), Ut.easeInOut(1)), q.getCowboyRoom().showTheNewestTrend = !0
        }
        showFightBeginAnim() {
            this.playCowboyEffect(this.s_begin_bet), this._fightBeginAnim.active = !0, this.gotoFrameAndPlay(this._fightBeginAction, 0, 60, !1), this._fightBeginAction.on(I.EventType.FINISHED, (t => {
                this._fightBeginAction.off(I.EventType.FINISHED), this._fightBeginAnim.active = !1
            }), this)
        }
        showFightEndAnim() {
            this._fightEndAnim.active = !0, this.gotoFrameAndPlay(this._fightEndAction, 0, 60, !1), this.playPointAni(), this._fightEndAction.on(I.EventType.FINISHED, (t => {
                this._fightEndAction.off(I.EventType.FINISHED), this._fightEndAnim.active = !1, this.scheduleOnce((() => {
                    this.showHandCardsAnim()
                }), .3)
            })), this.playCowboyEffect(this.s_end_bet)
        }
        showBetCoutDownBeginAnim() {
            this.updateBetCoutDown(), O.stopAllByTarget(this._betCountDownBg.node), this._betCountDownBg.node.setPosition(this._betCountDownBg.node.position.x, Y.config.HEIGHT), L(this._betCountDownBg.node).to(.5, {
                position: this._oriBetCountDownBgPos
            }, {
                easing: "backOut"
            }).start()
        }
        showBetCoutDownEndAnim() {
            this._updateBetButtonState(), this.showOpenCardTips(), O.stopAllByTarget(this._betCountDownBg.node), this._betCountDownBg.node.setPosition(this._oriBetCountDownBgPos), L(this._betCountDownBg.node).to(.5, {
                position: new _(this._oriBetCountDownBgPos.x, Y.config.HEIGHT)
            }, {
                easing: "backIn"
            }).call((() => {
                this.hideBetCountDown()
            })).start(), L(this._nodeAnim).delay(this._betCountDownEndDuration).call((() => {
                this.showFightEndAnim()
            })).start()
        }
        showHideLoseBetCoinsAnim() {
            let t = q.getCowboyRoom().matchOption,
                e = Y.StringTools.getArrayLength(t),
                o = Y.StringTools.getArrayLength(this._betCoinContents);
            for (let i = 0; i < o; i++) {
                let o = this.getBetOptionByAreaIdx(i),
                    n = !1;
                for (let i = 0; i < e; i++)
                    if (o == t[i]) {
                        n = !0;
                        break
                    } n || (console.log("清理areaIndex = " + i), this.hideAreaCoin(i))
            }
            L(this._nodeAnim).delay(this._hideLoseBetCoinsDuration).call((() => {
                this.isResultSpecialCardType() ? this.showSpecialCardTypeAnim() : this.showBetWinFlagsAndFlyCoinsAnim()
            })).start()
        }
        hideAreaCoin(t, e) {
            e = 0 != e;
            let o = this._coinNodeByArea[t];
            for (let t = Y.StringTools.getArrayLength(o) - 1; t >= 0; t--) {
                let i = o[t],
                    n = zt.addOrGetComponent(i, x);
                e ? L(n).to(.5, {
                    opacity: 0
                }).start() : n.opacity = 0
            }
        }
        handleCoin() {
            let t = this._coinNode.children.length,
                e = this._coinNode.children;
            for (let o = t - 1; o >= 0; o--) e[o].active = !0, O.stopAllByTarget(e[o]), this.nodePutToPool(e[o]);
            let o = this._coinNodeByArea.length;
            for (let t = 0; t < o; t++) this._coinNodeByArea[t] = []
        }
        showBetWinFlagsAndFlyCoinsAnim() {
            let t = q.getCowboyRoom().matchOption,
                e = Y.StringTools.getArrayLength(t);
            for (let o = 0; o < e; o++) {
                let e = this.getAreaIdxByBetOption(t[o]);
                this.clearBetArea(e), this.showWinFlagAnim(e)
            }
            L(this._nodeAnim).delay(.5).call((() => {
                this._showAllWayOutAnim(), this.showRecordDotBezierAnim()
            })).start();
            let o = q.getCowboyRoom().playerSettles;
            if (o.add(4294967295, q.getCowboyRoom().otherPlayersSettle), o.forEach(((t, e, o) => {
                    let i = t,
                        n = this.getPlayerCoinNodesByUid(i);
                    0 == n.length && (console.log("playerSettles uid: %d not in gameplayers, use player list button", i), n.push(this._btnPlayerList.node));
                    for (let t = 0; t < n.length; t++) {
                        if (i == this.getCowboyuserId() && t > 0) continue;
                        let o = n[t],
                            s = o.parent.getComponent(B).convertToWorldSpaceAR(o.getPosition());
                        console.log("世界坐标系---------." + s);
                        let a = o.parent.getComponent(B).convertToWorldSpaceAR(o.getPosition());
                        a = this._nodeAnim.getComponent(B).convertToNodeSpaceAR(a);
                        let l = e.settle;
                        for (let t = 0; t < l.length; t++) {
                            let e = l[t];
                            if (e.winAmount > 0) {
                                let t = e.option,
                                    o = this.getAreaIdxByBetOption(t),
                                    i = this._betCoinContents[o],
                                    n = i.getComponent(B).contentSize,
                                    s = this.getBetDetailAmounts(e.winAmount),
                                    r = s.length;
                                for (let t = 0; t < r; t++) {
                                    let e = this.createFlyCoin(o, s[t], !0),
                                        r = i.getComponent(B).convertToWorldSpaceAR(new _(this.SERangeRandomf(.3 * n.width, .7 * n.width) - .5 * n.width, this.SERangeRandomf(.2 * n.height, .7 * n.height) - .5 * n.height));
                                    r = this._nodeAnim.getComponent(B).convertToNodeSpaceAR(r), this._nodeAnim.addChild(e.node), e.node.setPosition(r), this.scheduleOnce((() => {
                                        null != e && e.node && (e.node.active = !0, L(e.node).delay(.2 + .025 * t).to(.6, {
                                            position: a
                                        }, {
                                            easing: kt.easeOutWithFactor(.8)
                                        }).call((() => {
                                            this.nodePutToPool(e.node)
                                        })).start())
                                    }), .7)
                                }
                            }
                        }
                        let d = e.totalWinAmount;
                        d >= 100 ? (L(this._nodeAnim).delay(.3).call((() => {
                            let t = new r;
                            t.addComponent(B), t.addComponent(x);
                            let e = t.addComponent(w);
                            q.loadSpriteTextureByPlist(this.game_dznz_PLIST, e, "win_coin_bg"), t.setPosition(a), console.log("世界坐标系---------." + s + ", " + (Y.config.WIDTH / 2).toString()), console.log(o != this._selfCoin.node), o == this._btnPlayerList.node ? t.getComponent(B).setAnchorPoint(new g(0, .5)) : s.x < Y.config.WIDTH / 2 ? o != this._selfCoin.node && t.getComponent(B).setAnchorPoint(new g(0, .5)) : t.getComponent(B).setAnchorPoint(new g(1, .5)), this._nodeAnim.addChild(e.node);
                            let i = new r;
                            i.addComponent(B), i.addComponent(x);
                            let n = i.addComponent(f);
                            n.font = this.win_num_FNT, n.fontSize = 10, n.string = "+" + Y.StringTools.numberToString(Y.StringTools.clientGoldByServer(d)), t.addChild(i), i.setScale(new _(1.4, 1.4, 1.4)), o == this._btnPlayerList.node || s.x > Y.config.WIDTH / 2 ? i.setPosition(-t.getComponent(B).width / 2, 0) : o != this._selfCoin.node && i.setPosition(t.getComponent(B).width / 2, 0), L(t).delay(1.3).by(1.5, {
                                position: new _(0, 50)
                            }).destroySelf().start(), L(t.getComponent(x)).delay(1.4).to(1.5, {
                                opacity: 0
                            }, {
                                easing: Ut.easeInOut(1)
                            }).start(), L(i.getComponent(x)).delay(1.4).to(1.5, {
                                opacity: 0
                            }, {
                                easing: Ut.easeInOut(1)
                            }).start(), L(this._nodeAnim).delay(.3).call((() => {
                                this.updateRoundEndPlayerCoin()
                            })).start(), this.playCowboyEffect(this.s_get_win_coin)
                        })).start(), L(this._nodeAnim).delay(.7).call((() => {
                            this.showWinPlayerLightAnim(i)
                        })).start()) : this.updatePlayerWinCount(i, !0)
                    }
                })), 0 != q.getCowboyRoom().stopWorld) {
                let t = q.getCowboyRoom().idle_roomid > 0;
                t || this.showCowboyToast("Cowboy_server_will_stop_text"), L(this._nodeAnim).delay(this._betWinFlagsAndFlyCoinsDuration).call((() => {
                    t ? this.showSwitchTable() : this.backToMainScene()
                })).start()
            } else L(this._nodeAnim).delay(this._betWinFlagsAndFlyCoinsDuration).call((() => {
                Y.MessageCenter.send("on_cowboy_willstart_notify"), this.showNextRoundTips()
            })).start()
        }
        updateRoundEndPlayerCoin() {
            let t = q.getCowboyRoom().playerSettles.get(this.getCowboyuserId());
            t && this.updateUserBalanceStatus(t.curCoin);
            for (let t = 0; t < this._otherPlayerHeads.length; t++) {
                let e = this._otherPlayerHeads[t];
                if (e.bg.node.active && e.uid > 0) {
                    let t = q.getCowboyRoom().playerSettles.get(e.uid);
                    t && (e.textCoin.string = this.getShortOwnCoinString(t.curCoin))
                }
            }
        }
        getBetChipIdx(t) {
            let e = q.getCowboyRoom().pkRoomParam.amountLevel;
            for (let o = 0; o < e.length; o++)
                if (t == e[o]) return o;
            return -1
        }
        getBetDetailAmounts(t) {
            let e = q.getCowboyRoom().vBetCoinOption;
            return X.disinteBetAmounts(t, e)
        }
        getAllBetDetailAmounts(t) {
            let e = q.getCowboyRoom().allZoneBet.get(t);
            if (e) return e;
            return []
        }
        nodePutToPool(t) {
            if (!t) return;
            console.log("#########################nodePutToPool#############################" + this._circlePool.size());
            let e = t.name;
            "btnBet_0" == e ? this._circlePool.put(t) : "btnBet_3" == e && this._squarePool.put(t)
        }
        getRandPos(t, e) {
            let o = .3 * e.getComponent(B).width,
                i = .3 * e.getComponent(B).height;
            return new _(this.SERangeRandomf(0 + o, t.width - o) - .5 * t.width, this.SERangeRandomf(0 + i, t.height - i) - .5 * t.height)
        }
        createFlyCoin(t, e, o) {
            o = 1 == o;
            let i = this.isCircleCoin(e),
                n = null;
            if (Y.StringTools.getArrayLength(this._coinNodeByArea[t]) >= this._areaCoinMax[t]) {
                let e = this._coinNodeByArea[t][0];
                this.nodePutToPool(e), this._coinNodeByArea[t].splice(0, 1)
            }
            return n = i ? this._circlePool.size() > 0 ? this._circlePool.get() : p(this.btnBet_0_prefab) : this._squarePool.size() > 0 ? this._squarePool.get() : p(this.btnBet_3_prefab), o || (this._coinNode.addChild(n), this._coinNodeByArea[t].push(n)), n.active = !0, zt.addOrGetComponent(n, x).opacity = 255, this.setCoinText(n.getChildByName("textBet"), Y.StringTools.clientGoldByServer(e), !0), n.getComponent(w)
        }
        setCoinText(t, e, o) {
            let i = Y.StringTools.numberToShowString(e),
                n = Y.StringTools.getArrayLength(i);
            zt.addOrGetComponent(t, B).setContentSize(30 * n, 48), t.getComponent(B), Y.resMgr.adaptWidget(t), t.destroyAllChildren(), t.removeAllChildren();
            for (let e = 0; e < n; e++) {
                let n = new r;
                zt.addOrGetComponent(n, B).setContentSize(30, 48), t.addChild(n);
                let s = (new r).addComponent(w);
                s.spriteFrame = this.game_dznz_PLIST.getSpriteFrame((o ? "coin_yellow_" : "coin_gray_") + i.charAt(e)), n.addChild(s.node)
            }
        }
        isCircleCoin(t) {
            return Y.StringTools.clientGoldByServer(t) < q.getCowboyRoom().llCoinUICritical
        }
        showBetInAnim(t, e) {
            e = 1 == e, this.updatePlayerCoin(t.uid), this.updateBetArea(t.betOption);
            let o = this.getAreaIdxByBetOption(t.betOption),
                i = this.getPlayerCoinNodesByUid(t.uid);
            0 == i.length && (console.log("this.showBetInAnim, cannot find valid headBg, use btnPlayerList, oneBet.uid: %d", t.uid), i.push(this._btnPlayerList.node));
            let n = this.isCircleCoin(t.betAmount),
                s = this._betCoinContents[o],
                a = s.getComponent(B).contentSize;
            for (let r = 0; r < i.length; r++) {
                let l = i[r],
                    d = l.getParent().getComponent(B).convertToWorldSpaceAR(l.getPosition()),
                    h = l.getChildByName(this._HEAD_IMG_TAG),
                    u = $.getHeadNode(h);
                if (l != this._selfHeadBg && l != this._btnPlayerList.node && u && H.instance.ActionManager.getNumberOfRunningActionsInTarget(u) <= 0) {
                    let t, e = null;
                    d.x < Y.config.WIDTH / 2 ? (t = new _(-30, 0), e = new _(30, 0)) : (t = new _(30, 0), e = new _(-30, 0)), L(u).sequence(L().by(.1, {
                        position: t
                    }, {
                        easing: Ut.easeInOut(1)
                    }), L().by(.1, {
                        position: e
                    }, {
                        easing: Ut.easeInOut(1)
                    })).start()
                }
                if (t.uid == this.getCowboyuserId() && r > 0) continue;
                e || (n ? this.playCowboyEffect(this.s_betin) : this.playCowboyEffect(this.s_betin_many));
                let g = this._coinNode.getComponent(B).convertToNodeSpaceAR(d),
                    c = this.createFlyCoin(o, t.betAmount),
                    m = this.getRandPos(a, c.node);
                m = this._coinNode.getComponent(B).convertToNodeSpaceAR(s.getComponent(B).convertToWorldSpaceAR(m)), c.node.setPosition(g), 0 == r ? L(c.node).sequence(L().to(.3, {
                    position: m
                }), L().by(.3, {
                    angle: 360
                })).start() : L(c.node).to(.3, {
                    position: m
                }).call((() => {
                    c.node.active = !1
                })).start()
            }
        }
        SERangeRandomf(t, e) {
            return t + Math.random() * (e - t)
        }
        showWaitForNextRoundInAnim() {
            this._waitForNextRoundAnim.active = !0, this.gotoFrameAndPlay(this._waitForNextRoundAction, 0, 30, !1)
        }
        showWaitForNextRoundOutAnim() {
            this._waitForNextRoundAnim && this._waitForNextRoundAnim.active && L(this._waitForNextRoundAnim).to(.3, {
                position: new _(1.25 * Y.config.WIDTH, 0)
            }).call((() => {
                this._waitForNextRoundAnim.active = !1, this._waitForNextRoundAnim.setPosition(new _(0, 0))
            })).start()
        }
        gotoFrameAndPlay(t, e, o, i) {
            t.play()
        }
        initBetArea() {
            let t = this._gameContent.getChildByName("bet_content_bg_ipx"),
                e = this._gameContent.getChildByName("bet_content_bg"),
                o = this._gameContent.getChildByName("bet_content_bg_ipad"),
                i = this._gameContent.getChildByName("bet_content_bg_landscape"),
                n = Y.config.IS_IPHONEX_SCREEN;
            this._isIpad = this.isIPadDesign();
            let s = "bet_content";
            Y.appConfig.isWebApp && (n = this.isTrueFullScreenOnWeb()), n && Y.config.IS_FULLSCREEN ? (s = "bet_content_ipx", this._isViewX = !0, this._betContentBg = t.getComponent(w), Y.tools.isValidNode(e) && (e.removeFromParent(), e.destroy()), Y.tools.isValidNode(o) && (o.removeFromParent(), e.destroy()), Y.tools.isValidNode(i) && (i.removeFromParent(), i.destroy())) : this._isIpad ? (s = "bet_content_ipad", Y.tools.isValidNode(e) && (e.removeFromParent(), e.destroy()), Y.tools.isValidNode(t) && (t.removeFromParent(), t.destroy()), this.isLandscapeDesign() ? (this._betContentBg = i.getComponent(w), Y.tools.isValidNode(o) && (o.removeFromParent(), o.destroy())) : (this._betContentBg = o.getComponent(w), Y.tools.isValidNode(i) && (i.removeFromParent(), i.destroy()))) : (this._betContentBg = e.getComponent(w), Y.tools.isValidNode(t) && (t.removeFromParent(), t.destroy()), Y.tools.isValidNode(o) && (o.removeFromParent(), o.destroy()), Y.tools.isValidNode(i) && (i.removeFromParent(), i.destroy())), Y.resMgr.setSpriteFrame(this._betContentBg.node, "textures/game/cowboy/" + s), this._betContentBg.node.active = !0, this._coinNodeByArea = [], this._mapBetOptionArea.add(q.Enum.BetZoneOption.RED_WIN, 0), this._mapBetOptionArea.add(q.Enum.BetZoneOption.EQUAL, 1), this._mapBetOptionArea.add(q.Enum.BetZoneOption.BLUE_WIN, 2), this._mapBetOptionArea.add(q.Enum.BetZoneOption.HOLE_3_TONG_SAME_SHUN, 3), this._mapBetOptionArea.add(q.Enum.BetZoneOption.FIVE_NONE_1DUI, 4), this._mapBetOptionArea.add(q.Enum.BetZoneOption.FIVE_2DUI, 5), this._mapBetOptionArea.add(q.Enum.BetZoneOption.HOLE_SAME, 6), this._mapBetOptionArea.add(q.Enum.BetZoneOption.HOLE_A, 7), this._mapBetOptionArea.add(q.Enum.BetZoneOption.FIVE_3_SHUN_TONG_HUA, 8), this._mapBetOptionArea.add(q.Enum.BetZoneOption.FIVE_3_2, 9), this._mapBetOptionArea.add(q.Enum.BetZoneOption.FIVE_KING_TONG_HUA_SHUN_4, 10);
            let a = [];
            this._mapBetOptionArea.forEach(((t, e) => {
                a.push(e)
            })), a.sort(((t, e) => t > e ? 1 : -1));
            let l = a.length;
            for (let t = 0; t < l; ++t) {
                let e = this._betContentBg.node.getChildByName("text_self_bet_num_" + t),
                    o = this._betContentBg.node.getChildByName("text_total_bet_num_" + t);
                this._textSelfBetNum.push(e.getComponent(f)), this._textTotalBetNum.push(o.getComponent(f)), this._oriTextSelfBetNumPos.push(e.getPosition()), this._oriTextTotalBetNumPos.push(o.getPosition());
                let i = this._betContentBg.node.getChildByName("fnt_odd_" + t).getComponent(f);
                i.string = "", this._textBetAreaOdds.push(i)
            }
            for (let t = 0; t < l; ++t) {
                let e = a[t],
                    o = this._betContentBg.node.getChildByName(Y.StringTools.formatC("bet_area_%d", e)),
                    i = o.getChildByName("coin_content");
                o.on(r.EventType.TOUCH_END, (() => {
                    this.betAreaClicked(e)
                })), this._betAreas.push(o), this._betCoinContents.push(i), this._coinNodeByArea.push([]);
                let n = o.getChildByName("win_flag");
                this._sprBetAreaWinFlags.push(n.getComponent(w)), this._initWayOutInfoByAreaIdx(e)
            }
        }
        getWinSize() {
            return yt.instance.getWinSize(this.node)
        }
        isIPadDesign() {
            return Y.config.isIPadDesign(this.node)
        }
        isLandscapeDesign() {
            let t = this.getWinSize();
            return !!(Y.appConfig.isLandscapeLayout && t.width / t.height > 2048 / 1536)
        }
        betAreaClicked(t) {
            if (console.log("betAreaClicked, areaIdx: %d", t), q.getCowboyRoom().curState == q.Enum.RoundState.BET && this._leftTime > 0) {
                if (Y.appConfig.isWebApp && (!Y.dataHandler.getUserData().isLoggedIn() || Y.dataHandler.getUserData().isTouristUser)) return void Ht.getInstance().switchToLoginOrRegistrationScene();
                if (this._curBetButtonIdx < 0) return;
                Y.cowboyNet.RequestBet(this.getBetOptionByAreaIdx(t), this.getCurBetLevel())
            } else console.log("betAreaClicked, cannot bet, curState: %d, left bet time: %d", q.getCowboyRoom().curState, this._leftTime)
        }
        updateBetArea(t) {
            let e = this.getAreaIdxByBetOption(t),
                o = q.getCowboyRoom().selfZoneBet.get(t);
            o && this.updateSelfBetAreaCoin(e, o);
            let i = q.getCowboyRoom().totalZoneBet.get(t);
            i && this.updateTotalBetAreaCoin(e, i)
        }
        updateSelfBetAreaCoin(t, e) {
            let o = this._textSelfBetNum[t];
            o && (o.node.setPosition(this._oriTextSelfBetNumPos[t]), o.string = e >= 100 ? this.getBetAreaCoinString(e) : "")
        }
        updateTotalBetAreaCoin(t, e) {
            let o = this._textTotalBetNum[t];
            o && (o.node.setPosition(this._oriTextTotalBetNumPos[t]), o.string = e >= 100 ? this.getBetAreaCoinString(e) : "")
        }
        updateAllBetAreas() {
            q.getCowboyRoom().selfZoneBet.forEach(function(t, e, o) {
                this.updateSelfBetAreaCoin(this.getAreaIdxByBetOption(t), e)
            }.bind(this)), q.getCowboyRoom().totalZoneBet.forEach(function(t, e, o) {
                let i = this.getAreaIdxByBetOption(t),
                    n = e;
                if (this.updateTotalBetAreaCoin(i, n), n > 0) {
                    let e = this._betCoinContents[i];
                    e.destroyAllChildren(), e.removeAllChildren(!0);
                    let o = e.getContentSize(),
                        n = this.getAllBetDetailAmounts(t);
                    for (let t = 0; t < n.length; t++) {
                        let s = this.createFlyCoin(i, n[t]),
                            a = this.getRandPos(o, s.node);
                        a = this._coinNode.convertToNodeSpaceAR(e.convertToWorldSpaceAR(a)), s.node.setPosition(a)
                    }
                }
            }.bind(this))
        }
        initBetCountDown() {
            this._betCountDownBg = this._gameContent.getChildByName("bet_count_down_bg").getComponent(w), this._textCountDown = this._betCountDownBg.node.getChildByName("text_count_down").getComponent(f), this._oriBetCountDownBgPos = this._betCountDownBg.node.getPosition()
        }
        hideBetCountDown() {
            O.stopAllByTarget(this._betCountDownBg.node), this._betCountDownBg.node.active = !1, this._betCountDownBg.node.setPosition(this._oriBetCountDownBgPos), this.unschedule(this.updateBetTimer)
        }
        updateBetCoutDown() {
            this.hideBetCountDown(), q.getCowboyRoom().curState == q.Enum.RoundState.BET && this._leftTime > 0 && (this._betCountDownBg.node.active = !0, this._textCountDown.string = Y.StringTools.formatC("%lld", this._leftTime), this.schedule(this.updateBetTimer, 1))
        }
        updateBetTimer(t) {
            if (q.getCowboyRoom().curState == q.Enum.RoundState.BET && this._leftTime > 0) {
                if (this._betCountDownBg.node.active = !0, this._textCountDown.string = Y.StringTools.formatC("%lld", this._leftTime), this._leftTime > 0 && (this._isPlayingTimerEnd || this.playCowboyEffect(this.s_time_tick)), 4 == this._leftTime) {
                    this._isPlayingTimerEnd = !0;
                    let t = Y.resMgr.get(this.s_timer_end, N);
                    this._timerEndAudioId = Dt.playEffect(t, !1)
                }
            } else this._isPlayingTimerEnd = !1, this._textCountDown.string = "0"
        }
        hideGameTips() {
            this._gameTipsBg.node.active = !1, this.unschedule(this.updateNextRoundTipsTimer)
        }
        showNextRoundTips() {
            q.getCowboyRoom().curState == q.Enum.RoundState.WAIT_NEXT_ROUND && this._leftTime > 0 && (this._leftTime >= 2 && this.playCowboyEffect(this.s_next_round_in), this.clearRound(), this._gameTipsBg.node.active = !0, this._textGameTips.string = Y.StringTools.formatC(Y.config.getStringDataCasino("Cowboy_game_tips_wait_next_round_text"), this._leftTime), this.unschedule(this.updateNextRoundTipsTimer), this.schedule(this.updateNextRoundTipsTimer, 1), this._waitForNextRoundAnim.active && this._leftTime <= this._waitForNextRoundOutTheshould && this.showWaitForNextRoundOutAnim())
        }
        updateNextRoundTipsTimer(t) {
            q.getCowboyRoom().curState == q.Enum.RoundState.WAIT_NEXT_ROUND && this._leftTime > 0 ? (this._textGameTips.string = Y.StringTools.formatC(Y.config.getStringDataCasino("Cowboy_game_tips_wait_next_round_text"), this._leftTime), this._waitForNextRoundAnim.active && this._leftTime <= this._waitForNextRoundOutTheshould && this.showWaitForNextRoundOutAnim()) : this.hideGameTips()
        }
        showSendCardTips() {
            q.getCowboyRoom().curState == q.Enum.RoundState.NEW_ROUND && (this._gameTipsBg.node.active = !1, this._textGameTips.string = Y.config.getStringDataCasino("Cowboy_game_tips_send_card_text"))
        }
        showOpenCardTips() {
            q.getCowboyRoom().curState == q.Enum.RoundState.WAIT_NEXT_ROUND && this._leftTime > this._betWinFlagsAndFlyCoinsDuration + this._showNextRoundDuration && (this._gameTipsBg.node.active = !1, this._textGameTips.string = Y.config.getStringDataCasino("Cowboy_game_tips_open_card_text"))
        }
        initPlayersInfo() {
            this.self_panel = this._bottomPanel.getChildByName("self_panel"), this._textNickName = this.self_panel.getChildByName("text_nickname").getComponent(f), this._textCoin = this.self_panel.getChildByName("gold").getComponent(Ct), this._textCoin.updateVal("", gt.CNY), this._selfHeadBg = this.self_panel.getChildByName("img_head_box"), this._selfCoin = this.self_panel.getChildByName("gold").getChildByName("own_coin").getComponent(w), this._leftPlayerPanel = this.node.getChildByName("leftPlayerPanel"), this._rightPlayerPanel = this.node.getChildByName("rightPlayerPanel"), this._leftPlayerPanel.active = Y.appConfig.getGameConfig().miniGameConfig.showLeftRightLeaderboard, this._rightPlayerPanel.active = Y.appConfig.getGameConfig().miniGameConfig.showLeftRightLeaderboard;
            let t = this.isIPadDesign(),
                e = this.isLandscapeDesign(),
                o = t && e,
                i = !t;
            this.setLeftAndRightList();
            for (let t = 0; t < 5; t++) {
                {
                    let n = new Do,
                        s = this._leftPlayerPanel.getChildByName(Y.StringTools.formatC("player_%d", t)).getComponent(w);
                    if (n.bg = s, n.textCoin = this._leftPlayerPanel.getChildByName("text_coin_" + t).getComponent(Ct), 0 == t && (n.nbFlag = s.node.getChildByName("nb_flag").getComponent(w), n.nbFlag.node.setSiblingIndex(-1), n.nbFlag.node.getChildByName("nb_flag_desc").getComponent(f).string = Y.config.getStringDataCasino("Cowboy_richest_text"), this._otherPlayerDescLeft = n.nbFlag.node.getChildByName("nb_flag_desc").getComponent(f)), 4 == t && (o || i)) {
                        if (s.node.active = !1, n.textCoin.node.active = !1, e) {
                            let t = this._leftPlayerPanel.getPosition();
                            t.y = -s.node.getComponent(B).height / 2, this._leftPlayerPanel.setPosition(t)
                        }
                    } else this._otherPlayerHeads.push(n)
                } {
                    let n = new Do,
                        s = this._rightPlayerPanel.getChildByName(Y.StringTools.formatC("player_%d", t)).getComponent(w);
                    if (n.bg = s, n.textCoin = this._rightPlayerPanel.getChildByName("text_coin_" + t).getComponent(Ct), 0 == t && (n.nbFlag = s.node.getChildByName("nb_flag").getComponent(w), n.nbFlag.node.setSiblingIndex(11), n.nbFlag.node.getChildByName("nb_flag_desc").getComponent(f).string = Y.config.getStringDataCasino("Cowboy_shensuanzi_text"), this._otherPlayerDescRight = n.nbFlag.node.getChildByName("nb_flag_desc").getComponent(f)), 4 == t && (o || i)) {
                        if (s.node.active = !1, n.textCoin.node.active = !1, e) {
                            let t = this._rightPlayerPanel.getPosition();
                            t.y = -s.node.getComponent(B).height / 2, this._rightPlayerPanel.setPosition(t)
                        }
                    } else this._otherPlayerHeads.push(n)
                }
            }
        }
        adaptiveScreen() {
            this._openIphoneXAdapter && (Y.config.IS_FULLSCREEN || Y.appConfig.isWebApp && !this._isIpad) ? this.adaptiveForMobileView() : this._isIpad && this.adaptiveForWideView()
        }
        adaptiveForMobileView() {
            Y.viewAdaptive.IPHONEX_OFFSETY;
            this._btnMenu.node.setPosition(this._leftPlayerPanel.getPosition().x, this._btnMenu.node.getPosition().y), this._btnPlayerList.node.setPosition(this._rightPlayerPanel.getPosition().x, this._btnPlayerList.node.getPosition().y);
            let t = this._btnMenu.node.parent.convertToWorldSpaceAR(this._btnMenu.node.position);
            t = this._selfHeadBg.parent.convertToNodeSpaceAR(t), this.self_panel.setPosition(this.self_panel.position.x + t.x - this._selfHeadBg.position.x, this.self_panel.position.y), this.btnInfo.node.setPosition(this._rightPlayerPanel.position.x, this._btnMenu.node.position.y), this._isAdaptiveOnce = !0
        }
        adaptiveForWideView() {
            let t = 166,
                e = 170,
                o = 0;
            this.isLandscapeDesign() && (o = 10, t = 110, e = 83, this._mainCowboyNode.scale = new _(.35, .35, .35), this._mainBullNode.scale = new _(.35, .35, .35)), Y.appConfig.isWebApp && this._isAdaptiveOnce || (this._mainCowboyNode.setPosition(this._mainCowboyNode.position.x + o, t + this._mainCowboyNode.position.y), this._mainBullNode.setPosition(this._mainBullNode.position.x - o, t + this._mainBullNode.position.y), this._cardPanel.setPosition(this._cardPanel.position.x, e + this._cardPanel.position.y, this._cardPanel.position.z), this._betCountDownBg.node.setPosition(this._betCountDownBg.node.position.x, e + this._betCountDownBg.node.position.y, this._betCountDownBg.node.position.z), this._oriBetCountDownBgPos = this._betCountDownBg.node.getPosition()), this._btnMenu.node.getComponent(F).top = 68, Y.resMgr.adaptWidget(this._btnMenu.node), this._btnMenu.node.setPosition(this._leftPlayerPanel.position.x, this._btnMenu.node.position.y), this.btnInfo.node.setPosition(this._rightPlayerPanel.position.x, this._btnMenu.node.position.y), this._isAdaptiveOnce = !0
        }
        adaptiveBetBtnPanel() {
            if (0 == this._vBottomBetBtns.length) {
                let t = Y.StringTools.getArrayLength(this._betButtons);
                for (let e = 0; e < t; ++e) this._vBottomBetBtns.push(new X.tGameNodeScale(this._betButtons[e].node, this._fBetBtnSrcScaleRate));
                this._vBottomBetBtns.push(new X.tGameNodeScale(this._btnBetAuto.node, this._btnBetAuto.node.scale.x)), this._vBottomBetBtns.push(new X.tGameNodeScale(this._btnBetClean.node, this._btnBetClean.node.scale.x)), this._vBottomBetBtns.push(new X.tGameNodeScale(this._btn_redpacket_festival, this._btn_redpacket_festival.scale.x))
            }
            let t = this._btnPlayerList.node.position.x - this._btnPlayerList.node.getComponent(B).contentSize.width / 2;
            t -= this.self_panel.position.x + this.self_panel.getComponent(B).contentSize.width / 2, this._panel_betbtn.getComponent(B).setContentSize(new k(t, this._panel_betbtn.getComponent(B).contentSize.height)), this._panel_betbtn.setPosition(this.self_panel.position.x + t / 2 + this.self_panel.getComponent(B).contentSize.width / 2, this._panel_betbtn.position.y);
            let e = 0,
                o = 0,
                i = 0,
                n = Y.StringTools.getArrayLength(this._vBottomBetBtns);
            for (let t = 0; t < n; ++t) {
                let o = this._vBottomBetBtns[t].node,
                    n = this._vBottomBetBtns[t].scale.x;
                o.active && (++i, e += o.getComponent(B).contentSize.width * n)
            }
            o = (this._panel_betbtn.getComponent(B).contentSize.width - e) / (i + 1);
            let s = .5 * -this._panel_betbtn.getComponent(B).width;
            for (let t = 0; t < n; ++t) {
                let e = this._vBottomBetBtns[t].node,
                    i = this._vBottomBetBtns[t].scale.x;
                if (e.active) {
                    let t = e.getComponent(B).contentSize,
                        n = s + o + t.width * i / 2,
                        a = this._panel_betbtn.getComponent(B).convertToWorldSpaceAR(new _(n, 0));
                    a = e.getParent().getComponent(B).convertToNodeSpaceAR(a), e.setPosition(a.x, e.position.y), s = a.x + t.width * i / 2
                }
            }
            if (this._btn_redpacket_festival_layer) {
                let t = this._btn_redpacket_festival.getComponent(B).convertToWorldSpaceAR(W(_.ZERO));
                this._btn_redpacket_festival_layer.setPosition(this._btn_redpacket_festival_layer.parent.getComponent(B).convertToNodeSpaceAR(t))
            }
            this._humanboyAdvancedAuto && (this._humanboyAdvancedAuto.getComponent(dt).adaptAdvanceAutoTipsPos(this._btnBetAuto.node), this._humanboyAdvancedAuto.getComponent(dt).adaptAdvanceAutoCountPos(this._btnBetAuto.node))
        }
        getPlayerCoinNodesByUid(t) {
            let e = [];
            t == this.getCowboyuserId() && e.push(this._selfCoin.node);
            let o = this._otherPlayerHeads.length;
            for (let i = 0; i < o; i++) this._otherPlayerHeads[i].uid == t && e.push(this._otherPlayerHeads[i].bg.node);
            return e
        }
        getPlayerHeadNodesByUid(t) {
            let e = [];
            t == this.getCowboyuserId() && e.push(this._selfHeadBg);
            for (let o = 0; o < this._otherPlayerHeads.length; o++) this._otherPlayerHeads[o].uid == t && e.push(this._otherPlayerHeads[o].bg.node);
            return e
        }
        updatePlayerCoin(t) {
            t == this.getCowboyuserId() && this.updateUserBalanceStatus(q.getCowboyRoom().selfPlayer.curCoin);
            for (let e = 0; e < this._otherPlayerHeads.length; e++)
                if (this._otherPlayerHeads[e].uid == t)
                    if (t == this.getCowboyuserId()) this._otherPlayerHeads[e].textCoin.string = this.getShortOwnCoinString(q.getCowboyRoom().selfPlayer.curCoin);
                    else {
                        let o = q.getCowboyRoom().getOtherPlayerByUid(t);
                        o && (this._otherPlayerHeads[e].textCoin.string = this.getShortOwnCoinString(o.curCoin))
                    }
        }
        getShortOwnCoinString(t, e = !0) {
            let o = Y.StringTools.clientGoldByServer(t);
            if (!e) return Y.StringTools.numberToString(o);
            const i = 1e6;
            return Y.StringTools.numberToShowNumber(o) >= i ? Y.StringTools.numberToString(Y.StringTools.clientGoldByServer(t / i)) + Y.config.getStringDataCasino("Cowboy_million_coin_short_text") : Y.StringTools.numberToShowNumber(o) >= 1e3 ? Y.StringTools.numberToString(Y.StringTools.clientGoldByServer(t / 1e3)) + Y.config.getStringDataCasino("Cowboy_coin_short_text") : Y.StringTools.numberToString(o)
        }
        getBetAreaCoinString(t) {
            let e = Y.StringTools.clientGoldByServer(t);
            return Y.StringTools.numberToShowNumber(e) < 1e5 ? Y.StringTools.numberToString(e) : Y.StringTools.formatC("%lld", Y.StringTools.numberToShowNumber(e) / 1e3) + Y.config.getStringDataCasino("Cowboy_coin_short_text")
        }
        updateSelfCoin() {
            this.updateUserBalanceStatus(q.getCowboyRoom().selfPlayer.curCoin)
        }
        updateOtherCoin() {
            let t = this._otherPlayerHeads.length,
                e = q.getCowboyRoom().otherPlayers,
                o = e.length;
            for (let i = 0; i < t; i++)
                if (i < o) {
                    let t = e[i];
                    this._otherPlayerHeads[i].textCoin.string = this.getShortOwnCoinString(t.curCoin)
                }
        }
        updateSelfInfo() {
            Y.StringTools.setShrinkString(this._textNickName.node, q.getCowboyRoom().selfPlayer.name, !0), this.updateUserBalanceStatus(q.getCowboyRoom().selfPlayer.curCoin);
            let t = Y.dataHandler.getUserData().headUrl;
            $.setCircleSprite(this._selfHeadBg, t)
        }
        updateOtherPlayersInfo() {
            if (!Y.appConfig.getGameConfig().miniGameConfig.showLeftRightLeaderboard) return;
            let t = this._otherPlayerHeads.length,
                e = q.getCowboyRoom().otherPlayers,
                o = e.length;
            for (let i = 0; i < t; i++)
                if (i < o) {
                    q.loadSpriteTextureByPlist(this.game_dznz_PLIST, this._otherPlayerHeads[i].bg, "player_bg"), this._otherPlayerHeads[i].nbFlag && (this._otherPlayerHeads[i].nbFlag.node.active = !0);
                    let t = e[i];
                    this._otherPlayerHeads[i].uid = t.uid, this._otherPlayerHeads[i].textCoin.string = this.getShortOwnCoinString(t.curCoin);
                    let o = this._otherPlayerHeads[i].bg,
                        n = o.node.getChildByName(this._HEAD_IMG_TAG);
                    n || (n = new r, n.addComponent(w), Y.resMgr.setSpriteFrame(n, "zh_CN/game/cowboy/head/display_base"), n.name = this._HEAD_IMG_TAG, n.getComponent(B).setAnchorPoint(new g(.5, .5)), n.setPosition(new _(0, 15)), o.node.addChild(n), n.setSiblingIndex(9), n.getComponent(w).sizeMode = w.SizeMode.RAW, n.getComponent(w).trim = !0, n.active = !1);
                    let s = Y.dataHandler.getUserData().getImageURL(t.head);
                    $.setCircleSprite(n, s, t.plat, void 0, tt.IRREGULAR, !0, !0, !1), this._otherPlayerHeads[i].nbFlag && this._otherPlayerHeads[i].nbFlag.node.setSiblingIndex(-1)
                } else {
                    let t = this.node.getChildByName("win_player_win_count_" + this._otherPlayerHeads[i].bg.node.uuid);
                    Y.tools.isValidNode(t) && (t.removeFromParent(), t.destroy());
                    let e = this._otherPlayerHeads[i].bg.node.getChildByName(this._HEAD_IMG_TAG);
                    if (e) {
                        e.active = !1;
                        let t = $.getHeadNode(e);
                        t && (t.parent.active = !1)
                    }
                    this._otherPlayerHeads[i].uid = 0, q.loadSpriteTextureByPlist(this.game_dznz_PLIST, this._otherPlayerHeads[i].bg, "player_bg_2"), this._otherPlayerHeads[i].textCoin.string = "", this._otherPlayerHeads[i].nbFlag && (this._otherPlayerHeads[i].nbFlag.node.active = !1)
                }
        }
        initGuide() {
            let t = "cowboy_has_show_guide_2";
            if ("true" != Y.tools.GetStringByCCFile(t)) {
                let e = this._topBg.node.getChildByName("panelRecord");
                for (let t = 0; t < this._recordNum; t++) this._recordDotsTemp.push(e.getChildByName(Y.StringTools.formatC("recordDot%d", t)).getComponent(w));
                this._humanboyGuid || (this._humanboyGuid = p(this.humanboyGuid_prefab), this.node.addChild(this._humanboyGuid), this._humanboyGuid.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_GUIDE));
                let o = this._humanboyGuid.getComponent(at);
                o.setDescString(Y.config.getStringDataCasino("Cowboy_ludan_guide_text")), o.show(this._topBg.node, (() => {
                    Y.tools.SaveStringByCCFile(t, "true"), Y.cowboyNet.RequestTrend(), this._cowboyChart.active = !0, Y.MessageCenter.send("on_display_page1"), this.playCowboyEffect(this.s_button), Y.StringTools.clearArray(this._recordDotsTemp)
                }), !0)
            }
        }
        initChart() {
            this._cowboyChart = p(this.cowboyChart), this.node.addChild(this._cowboyChart), this._cowboyChart.getComponent(B).setAnchorPoint(.5, .5), this._cowboyChart.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_MENU_PANEL), this._cowboyChart.active = !1, Y.cowboyNet.RequestTrend()
        }
        onGuideBgClick(t) {
            t.propagationStopped = !0
        }
        onGuideTopBgClick(t) {
            Y.tools.SaveStringByCCFile("cowboy_has_show_guide_2", "true"), Y.cowboyNet.RequestTrend(), this.playCowboyEffect(this.s_button), this._recordDotsTemp = []
        }
        openShop(t) {
            Y.config.GET_CLIENT_TYPE() != Y.Enum.ClientType.CowboyWeb && (Y.appConfig.getGeneralConfig().multiWindowEnabled || (Y.viewAdaptive.isselfchange = !0, Y.viewAdaptive.cowboyroomid = q.getCowboyRoom().u32RoomId), Y.SHOP.RechargeClick(!0))
        }
        initButtonEvents() {
            this._btnMenu = this.node.getChildByName("btnMenu").getComponent(l), this._btnMenu.node.on(l.EventType.CLICK, (t => {
                if (Dt.playButtonSound("button_click"), !this._humanboyMenu) {
                    this._humanboyMenu = p(this.HumanboyMenu_prefab);
                    let t = this._humanboyMenu.getComponent(rt);
                    this.node.addChild(this._humanboyMenu), this._humanboyMenu.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_MENU_PANEL), t.getBtnExchange().node.on(l.EventType.CLICK, (e => {
                        this.playCowboyEffect(this.s_button), t.hide(!1), Y.dataHandler.getUserData().usdt <= 0 ? Y.TT.showMsg(Y.config.getStringDataCasino("USDTView_ex_coin_error_0_usdt"), Y.Enum.ToastType.ToastTypeError) : this._cowboyExchange ? this._cowboyExchange.openView() : (this._cowboyExchange = p(this.humanboyExchange_prefab).getComponent(ot), this.node.addChild(this._cowboyExchange.node), this._cowboyExchange.node.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_MENU_PANEL))
                    })), t.getBtnRule().node.on(l.EventType.CLICK, (e => {
                        var o;
                        (this.playCowboyEffect(this.s_button), t.hide(!1), null == this._cowboyRule) ? (this._cowboyRule = p(this.cowboyRule), this._cowboyRule.getComponent(B).setAnchorPoint(new g(.5, .5)), this._cowboyRule.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_MENU_PANEL), this.node.addChild(this._cowboyRule)) : null == (o = this._cowboyRule.getComponent(Rt)) || o.open()
                    })), t.getBtnSoundSetting().node.on(l.EventType.CLICK, (e => {
                        this.playCowboyEffect(this.s_button), t.hide(!1), null == this._cowboySetting ? (this._cowboySetting = p(this.cowboySetting), this._cowboySetting.getComponent(B).setAnchorPoint(new g(.5, .5)), this.node.addChild(this._cowboySetting), this._cowboySetting.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_MENU_PANEL)) : (this._cowboySetting.getComponent(it).initSwitch(), this._cowboySetting.active = !0)
                    })), t.getBtnAdvancedSetting().node.on(l.EventType.CLICK, (e => {
                        this.playCowboyEffect(this.s_button), t.hide(!1), this._humanboyAdvancedSetting || (this._humanboyAdvancedSetting = p(this.humanboyAdvancedSetting_prefab), this.node.addChild(this._humanboyAdvancedSetting), this._humanboyAdvancedSetting.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_MENU_PANEL)), this._humanboyAdvancedSetting.getComponent(lt).show()
                    })), t.getBtnExit().node.on(l.EventType.CLICK, (e => {
                        var o;
                        if (Y.isDesktopBuild() && Y.appConfig.getGeneralConfig().multiWindowEnabled) return t.hide(!1), void Y.focusWindow(1);
                        t.hide(!1), this._onExitRoom(null == (o = this.gameSceneInstance) ? void 0 : o.gameData)
                    }))
                }
                this._humanboyMenu.getComponent(rt).show(!0), this.UpdateMenuPosition()
            })), this._btnPlayerList = this._bottomPanel.getChildByName("btnPlayerList").getComponent(l), this._btnPlayerList.node.on(l.EventType.CLICK, (t => {
                Y.cowboyNet.RequestPlayerList(), this.playCowboyEffect(this.s_button)
            })), this.self_panel = this._bottomPanel.getChildByName("self_panel"), this.self_panel.getChildByName("btn_shop_valid").on(r.EventType.TOUCH_END, (t => {
                Y.config.GET_CLIENT_TYPE() == Y.Enum.ClientType.CowboyWeb || this.openShop(null)
            })), this.btnInfo.node.on(l.EventType.CLICK, (t => {
                this.showIntroPopup()
            })), this.btnInfo2.node.on(l.EventType.CLICK, (t => {
                this.showIntroPopup()
            }))
        }
        showIntroPopup() {
            var t, e, o;
            Y.miniGamePopupManager.clearPopupContent(null == (t = this.gameSceneInstance) || null == (t = t.room) ? void 0 : t.gameScene), Y.miniGamePopupManager.showPopup({
                popupId: vt.IntroPokerFlip,
                gameScene: null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene
            }), null == (o = this._humanboyMenu) || null == (o = o.getComponent(rt)) || o.hide(!1)
        }
        _onExitRoom(t) {
            var e, o;
            if (!t || t.tRoomData.u32GameID != Y.Enum.GameId.CowBoy) return;
            null == (e = this.gameSceneInstance) || null == (e = e.room) || null == (e = e.gameScene) || null == (e = e.getComponentInChildren(Lt)) || e.hide(), null == (o = this._humanboyMenu) || null == (o = o.getComponent(rt)) || o.hide(!1), this.playCowboyEffect(this.s_button);
            let i = q.getCowboyRoom().iUsedAutoBetCount,
                n = q.getCowboyRoom().iSelectAutoBetCount;
            if (n > 0) {
                const t = this.node.getChildByName("Cowboy_Dialog_exit");
                if (t) t.active = !0;
                else {
                    let t = p(this.HumanboyDialog_prefab);
                    t.name = "Cowboy_Dialog_exit";
                    const e = t.getComponent(Pt);
                    this.node.addChild(t, Lo.COWBOY_LOCAL_ZORDER_TOAST);
                    const o = t.getComponent(st),
                        s = Y.StringTools.formatC(Y.config.getStringDataCasino("Cowboy_auto_bet_exit_tips"), n - i, n),
                        a = Y.config.getStringDataCasino("CowBoy_btn_desc_exit_game"),
                        r = Y.config.getStringDataCasino("CowBoy_btn_desc_resume_game"),
                        l = t => {
                            Y.cowboyNet.RequestLeaveRoom()
                        },
                        d = t => {
                            null == e || e.close()
                        },
                        h = Y.config.getStringDataCasino("MiniGame_AddAutoBet_Text"),
                        _ = t => {
                            this.showAutoAddBetList(t)
                        },
                        u = t => {
                            if (o) {
                                let t = q.getCowboyRoom().iUsedAutoBetCount,
                                    e = q.getCowboyRoom().iSelectAutoBetCount;
                                o.txt_content.string = Y.StringTools.formatC(Y.config.getStringDataCasino("Cowboy_auto_bet_exit_tips"), e - t, e)
                            }
                            q.getCowboyRoom().reachLimitBet && (null == e || e.blockCenterButton())
                        },
                        g = {
                            title: "Notice_Layer_notice_panel_message_button",
                            textContent: "Cowboy_auto_bet_exit_tips",
                            leftBtn: "CowBoy_btn_desc_exit_game",
                            rightBtn: "CowBoy_btn_desc_resume_game",
                            centerBtn: "MiniGame_AddAutoBet_Text",
                            gameID: Y.Enum.GameId.CowBoy,
                            contentArgs: () => {
                                const t = q.getCowboyRoom().iUsedAutoBetCount,
                                    e = q.getCowboyRoom().iSelectAutoBetCount;
                                return [e - t, e]
                            }
                        },
                        c = Tt.onChangeLanguageAutoBetPopup(o, e, g),
                        m = {
                            miniDialog: e,
                            stringContent: s,
                            stringLeftBtn: a,
                            stringRightBtn: r,
                            cbLeftBtn: l,
                            cbRightBtn: d,
                            isReachedMax: q.getCowboyRoom().reachLimitBet,
                            legacyDialog: o,
                            isShowBtnCenter: !0,
                            stringCenterButton: h,
                            cbCenterBtn: _,
                            onUpdateContent: u,
                            themeType: null,
                            onChangeLanguage: c
                        };
                    Tt.showDialog(m)
                }
            } else {
                null == this._cowboyExit && (this._cowboyExit = p(this.cowboyExit), this._cowboyExit.getComponent(B).setAnchorPoint(z(.5, .5)), this._cowboyExit.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_MENU_PANEL), this.node.addChild(this._cowboyExit));
                let t = this._cowboyExit.getComponent(ft);
                null == t || t.show((() => {
                    Y.roomManager.RequestLeaveRoom(Y.Enum.GameId.CowBoy, Y.roomManager.getMiniGameRoomIdTemplate(Y.Enum.GameId.CowBoy), (() => {
                        if (U(t) && Y.config.NEEDS_LANDSCAPE()) {
                            var e;
                            const t = {
                                title: "Attention",
                                txt: "ErrorToast2",
                                isTwoBtn: !1,
                                sureCallback: null,
                                sureLabel: "OK",
                                isPopupDarkActive: Y.appConfig.isLandscapeLayout,
                                cashGameScene: null == (e = this.gameSceneInstance) || null == (e = e.room) ? void 0 : e.gameScene
                            };
                            Y.popUp.showMsgI18n(t)
                        }
                    }))
                })), this.playCowboyEffect(this.s_button)
            }
        }
        _onExitRoomSuccess() {
            var t;
            Y.appConfig.getGeneralConfig().multiWindowEnabled && (null != (t = this._luckButton) && null != (t = t.turntables_node) && t.active && Y.dataHandler.getUserData().removeLuckTurnById(Y.roomManager.luckTurntablesRewardId));
            Dt.stopMusic(), Dt.pauseAll(), this._isLeaving = !0, Y.appConfig.isLandscapeLayout || Y.SwitchLoadingView.show(Y.config.getStringData("Loading"))
        }
        UpdateMenuPosition() {
            if (this.menuAnchorPoint) {
                const t = Y.appConfig.isLandscapeLayout ? W(_.ZERO) : new _(y.getSafeAreaRect().x, 0);
                this._humanboyMenu.getComponent(rt).setMenuPosition(new _(this.menuAnchorPoint.position.x, this.menuAnchorPoint.position.y).add(t))
            } else this._humanboyMenu.getComponent(rt).setMenuPosition(new _(this._btnMenu.node.position.x, this._btnMenu.node.position.y - this._btnMenu.node.getComponent(B).height / 2))
        }
        onGoldViewShop() {
            Y.config.GET_CLIENT_TYPE() == Y.Enum.ClientType.CowboyWeb || this.openShop(null)
        }
        initBetButtons() {
            this._betButtons = [], this._betButtonTexts = [], this._betButtonMasks = [];
            for (let t = 0; t < this._betButtonNum; t++) {
                let e = this._panel_betbtn.getChildByName("btn_bet_" + t).getComponent(l);
                this._betButtons.push(e), this._betButtonTexts.push(e.node.getChildByName("textBet")), this._betButtonMasks.push(e.node.getChildByName("imgMask").getComponent(w)), e.node.on(l.EventType.CLICK, (e => {
                    console.log("GameCowboyScene btnBet %d clicked", t), this.betButtonSelected(t), this.playCowboyEffect(this.s_button)
                }), this)
            }
            this._humanboyAdvancedAuto || (this._humanboyAdvancedAuto = p(this.HumanboyAdvancedAuto_prefab), this.node.addChild(this._humanboyAdvancedAuto), this._humanboyAdvancedAuto.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_ADVANCE_AUTO_SELECT)), this._btnBetAuto = this._panel_betbtn.getChildByName("btn_bet_auto").getComponent(l), this._btnBetAuto.node.on(l.EventType.CLICK, (t => {
                switch (this.playCowboyEffect(this.s_button), this._eAutoBtnStyle) {
                    case X.eGameboyAutoBtnStyle.GAB_STYLE_NORMAL:
                        Y.cowboyNet.RequestAutoBet();
                        break;
                    case X.eGameboyAutoBtnStyle.GAB_STYLE_ADVANCE: {
                        const t = this._humanboyAdvancedAuto.getComponent(dt),
                            e = new St(t);
                        e.adaptSelectPanelPos(this._btnBetAuto.node), e.showSelectPanel(!0)
                    }
                    break;
                    case X.eGameboyAutoBtnStyle.GAB_STYLE_ADVANCE_USING: {
                        let t = q.getCowboyRoom().iUsedAutoBetCount,
                            e = q.getCowboyRoom().iSelectAutoBetCount,
                            o = p(this.HumanboyDialog_prefab);
                        const i = o.getComponent(Pt);
                        this.node.addChild(o), o.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_TOAST);
                        const n = o.getComponent(st),
                            s = Y.StringTools.formatC(Y.config.getStringDataCasino("Cowboy_auto_bet_stop_tips"), e - t, e),
                            a = Y.config.getStringDataCasino("CowBoy_btn_desc_stop_auto_bet"),
                            r = Y.config.getStringDataCasino("CowBoy_btn_desc_resume_auto_bet"),
                            l = t => {
                                Y.cowboyNet.ReqCancelAdvanceAutoBet()
                            },
                            d = t => {
                                null == i || i.close()
                            },
                            h = Y.config.getStringDataCasino("MiniGame_AddAutoBet_Text"),
                            _ = t => {
                                this.showAutoAddBetList(t)
                            },
                            u = t => {
                                if (n) {
                                    let t = q.getCowboyRoom().iUsedAutoBetCount,
                                        e = q.getCowboyRoom().iSelectAutoBetCount;
                                    n.txt_content.string = Y.StringTools.formatC(Y.config.getStringDataCasino("Cowboy_auto_bet_stop_tips"), e - t, e)
                                }
                                q.getCowboyRoom().reachLimitBet && (null == i || i.blockCenterButton())
                            },
                            g = {
                                title: "Notice_Layer_notice_panel_message_button",
                                textContent: "Cowboy_auto_bet_stop_tips",
                                leftBtn: "CowBoy_btn_desc_stop_auto_bet",
                                rightBtn: "CowBoy_btn_desc_resume_auto_bet",
                                centerBtn: "MiniGame_AddAutoBet_Text",
                                gameID: Y.Enum.GameId.CowBoy,
                                contentArgs: () => {
                                    const t = q.getCowboyRoom().iUsedAutoBetCount,
                                        e = q.getCowboyRoom().iSelectAutoBetCount;
                                    return [e - t, e]
                                }
                            },
                            c = Tt.onChangeLanguageAutoBetPopup(n, i, g),
                            m = {
                                miniDialog: i,
                                stringContent: s,
                                stringLeftBtn: a,
                                stringRightBtn: r,
                                cbLeftBtn: l,
                                cbRightBtn: d,
                                isReachedMax: q.getCowboyRoom().reachLimitBet,
                                legacyDialog: n,
                                isShowBtnCenter: !0,
                                stringCenterButton: h,
                                cbCenterBtn: _,
                                onUpdateContent: u,
                                themeType: null,
                                onChangeLanguage: c
                            };
                        Tt.showDialog(m)
                    }
                }
            })), this._labelBetAuto = this._btnBetAuto.getComponentInChildren(f), this._labelBetAuto && (this._autobetBtnColor = this._labelBetAuto.node.getComponent(R).color), this._autoBetUsingNode = C("is_using", this._btnBetAuto.node), this._autoBetUsingNode || Z("[CowboyScene] btnBetAuto is missing child node"), this._btnBetClean = this._panel_betbtn.getChildByName("btn_bet_clean").getComponent(l), this._btnBetClean.node.on(l.EventType.CLICK, (t => {
                Dt.playButtonSound("button_click"), this.clearAllBetAreaCoins()
            })), this._labelBetClean = this._btnBetClean.getComponentInChildren(f)
        }
        showAutoAddBetList(t) {
            this.advanceAutoAddBet || (this.advanceAutoAddBet = p(this.MiniGameAddAdvancedAuto_prefab), this.node.addChild(this.advanceAutoAddBet)), this.advanceAutoAddBet.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_ADVANCE_AUTO_ADD_SELECT);
            const e = this.advanceAutoAddBet.getComponent(Bt),
                o = new St(e);
            o.adaptSelectPanelPos(t.btn_center.node), o.showSelectPanel(!0), o.setCountUpdateCallback((() => {
                t.updateCenterButton()
            }))
        }
        initRedPackage() {
            this._btn_redpacket_festival = this._panel_betbtn.getChildByName("btn_redpacket_festival"), this._btn_redpacket_festival.getComponent(w).spriteFrame = null, this._btn_redpacket_festival.active = !1, this._btn_redpacket_festival_layer = p(this._btn_redpacket_festival), this.node.addChild(this._btn_redpacket_festival_layer), this._btn_redpacket_festival_layer.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_RED_PACKAGE);
            let t = W(0, 0);
            this._btn_redpacket_festival.getComponent(B).convertToWorldSpaceAR(W(_.ZERO), t), this._btn_redpacket_festival_layer.setPosition(this._btn_redpacket_festival_layer.parent.getComponent(B).convertToNodeSpaceAR(t)), this.showLuckButton()
        }
        clearAllBetAreaCoins() {
            let t = Y.StringTools.getArrayLength(this._betAreas);
            for (let e = 0; e < t; e++) this.hideAreaCoin(e, !1)
        }
        resetAllBetButtons() {
            let t = this._betButtons.length;
            for (let e = 0; e < t; e++) this._betButtons[e].node.setScale(this._fBetBtnSrcScaleRate, this._fBetBtnSrcScaleRate), this._betButtonTexts[e].active = !0, this._betButtonMasks[e].node.active = !1, this._betButtons[e].enabled = !0;
            this._curBetButtonIdx = -1
        }
        betButtonSelected(t, e) {
            e = 1 == e, this.resetAllBetButtons(), e || this._updateBetButtonState(), t < 0 || t > this._betButtonNum - 1 || (this._curBetButtonIdx = t, this._betButtons[t].node.setScale(this._fBetBtnTarScaleRate, this._fBetBtnTarScaleRate))
        }
        updateBetButtonText() {}
        _updateBetOddsDetail() {
            let t = q.getCowboyRoom().pkRoomParam.oddsDetail;
            for (let e = 0; e < t.length; e++) {
                let o = this.getAreaIdxByBetOption(t[e].option);
                this._textBetAreaOdds[o] && (this._textBetAreaOdds[o].string = Y.StringTools.clientGoldByServer(t[e].odds) + Y.config.getStringDataCasino("Cowboy_odds_text"))
            }
        }
        _updateBetButtonState() {
            let t = q.getCowboyRoom().vBetCoinOption,
                e = q.getCowboyRoom().selfPlayer.curCoin,
                o = Y.StringTools.getArrayLength(t);
            for (let i = 0; i < o; ++i) {
                let o = Y.StringTools.clientGoldByServer(t[i]);
                e >= t[i] ? (this._betButtons[i].interactable = !0, this._betButtons[i].enabled = !0, this.setCoinText(this._betButtonTexts[i], o, !0)) : (this._betButtons[i].interactable = !1, this._betButtons[i].enabled = !1, this.setCoinText(this._betButtonTexts[i], o, !1))
            }
            let i = q.getCowboyRoom().curState == q.Enum.RoundState.BET && this._leftTime > 0,
                n = Y.StringTools.getArrayLength(this._betButtons);
            for (let t = 0; t < n; ++t) this._betButtonMasks[t].node.active = !i, this._betButtonMasks[t].enabled = !0, this._betButtons[t].enabled = i;
            this._updateAutoBetBtnStatus(), this._updateCleanBtnStatus()
        }
        updatBetButtonByCurCoin() {}
        enableAutoBetButton(t) {
            this._btnBetAuto.enabled = t, this._btnBetAuto.interactable = t, this.setBetLabelEnable(this._labelBetAuto, t)
        }
        _updateAutoBetBtnStatus() {
            switch (this._eAutoBtnStyle) {
                case X.eGameboyAutoBtnStyle.GAB_STYLE_NORMAL:
                    q.getCowboyRoom().curState == q.Enum.RoundState.BET && this._leftTime > 0 ? q.getCowboyRoom().hasBetInCurRound ? this.enableAutoBetButton(!1) : this.enableAutoBetButton(q.getCowboyRoom().canAuto) : this.enableAutoBetButton(!1);
                    break;
                case X.eGameboyAutoBtnStyle.GAB_STYLE_ADVANCE:
                    q.getCowboyRoom().hasBetInCurRound ? this.enableAutoBetButton(!0) : this.enableAutoBetButton(q.getCowboyRoom().canAuto);
                    break;
                case X.eGameboyAutoBtnStyle.GAB_STYLE_ADVANCE_USING:
                    this.enableAutoBetButton(!0)
            }
        }
        _updateCleanBtnStatus() {
            let t = !1;
            q.getCowboyRoom().curState == J.BET && this._leftTime > 0 && (t = !0), this._btnBetClean.interactable = t, this.setBetLabelEnable(this._labelBetClean, t)
        }
        _updateBetAmountLevel() {
            let t = q.getCowboyRoom().vBetCoinOption,
                e = Y.StringTools.getArrayLength(t);
            for (let o = 0; o < e; ++o)
                if (o < this._betButtonNum) {
                    let e = Y.StringTools.clientGoldByServer(t[o]);
                    e < q.getCowboyRoom().llCoinUICritical ? (q.loadButtonTextureByPlist(this.game_dznz_PLIST, this._betButtons[o].node, "bet_coin_clicked", "bet_coin_clicked", "bet_coin_clicked", "bet_coin_disabled_big"), q.loadSpriteTextureByPlist(this.game_dznz_PLIST, this._betButtonMasks[o], "bet_coin_disable_mask_big"), this._betButtonMasks[o].node.scale = new _(1.05, 1.05)) : (q.loadButtonTextureByPlist(this.game_dznz_PLIST, this._betButtons[o].node, "bet_block_clicked", "bet_block_clicked", "bet_block_clicked", "bet_block_disabled_big"), q.loadSpriteTextureByPlist(this.game_dznz_PLIST, this._betButtonMasks[o], "bet_block_disable_mask_big"), this._betButtonMasks[o].node.scale = W(_.ONE)), this.setCoinText(this._betButtonTexts[o], e, !0)
                } else console.log("error!! HumanboyMainView._updateBetAmountLevel vBetCoinOption must be %d, size: %d", this._betButtonNum, e);
            switch (q.getCowboyRoom().eAutoLevel) {
                case Zt.cowboy_proto.AutoBetLevel.Level_Normal:
                    this._setAutoBetBtnStytle(X.eGameboyAutoBtnStyle.GAB_STYLE_NORMAL);
                    break;
                case Zt.cowboy_proto.AutoBetLevel.Level_Advance:
                    q.getCowboyRoom().iSelectAutoBetCount > 0 ? this._setAutoBetBtnStytle(X.eGameboyAutoBtnStyle.GAB_STYLE_ADVANCE_USING) : this._setAutoBetBtnStytle(X.eGameboyAutoBtnStyle.GAB_STYLE_ADVANCE)
            }
            this.adaptiveBetBtnPanel()
        }
        _setAutoBetBtnStytle(t) {
            switch (this._humanboyAdvancedAuto && (this._humanboyAdvancedAuto.getComponent(dt).hideAdvanceAutoTips(), this._humanboyAdvancedAuto.getComponent(dt).hideAdvanceAutoCount(), this._humanboyAdvancedAuto.getComponent(dt).hideSelectPanel(!1)), this._eAutoBtnStyle = t, this._eAutoBtnStyle) {
                case X.eGameboyAutoBtnStyle.GAB_STYLE_NONE:
                    break;
                case X.eGameboyAutoBtnStyle.GAB_STYLE_NORMAL:
                    q.loadButtonTextureByAutoAtlas(this.cowboy_PLIST, this._btnBetAuto.node, "autobet_normal", "autobet_normal", "autobet_normal", "autobet_gray", this.mappingPlist), this._autoBetUsingNode && (this._autoBetUsingNode.active = !1);
                    break;
                case X.eGameboyAutoBtnStyle.GAB_STYLE_ADVANCE:
                    q.loadButtonTextureByAutoAtlas(this.cowboy_PLIST, this._btnBetAuto.node, "autobet_block_normal", "autobet_block_normal", "autobet_block_normal", "autobet_block_gray", this.mappingPlist), this._autoBetUsingNode && (this._autoBetUsingNode.active = !1);
                    break;
                case X.eGameboyAutoBtnStyle.GAB_STYLE_ADVANCE_USING:
                    q.loadButtonTextureByAutoAtlas(this.cowboy_PLIST, this._btnBetAuto.node, "autobet_block_normal", "autobet_block_normal", "autobet_block_normal", "autobet_block_gray", this.mappingPlist), this._autoBetUsingNode && (this._autoBetUsingNode.active = !0), this._humanboyAdvancedAuto && (this._humanboyAdvancedAuto.getComponent(dt).adaptAdvanceAutoCountPos(this._btnBetAuto.node), this._humanboyAdvancedAuto.getComponent(dt).showAdvanceAutoCount())
            }
            this._btnBetAuto.getComponent(w).type = w.Type.SIMPLE
        }
        _getAutoBetBtnStytle() {
            return this._eAutoBtnStyle
        }
        _checkAdvanceAutoReq() {
            q.getCowboyRoom().curState == q.Enum.RoundState.BET && this._getAutoBetBtnStytle() === X.eGameboyAutoBtnStyle.GAB_STYLE_ADVANCE_USING && (this._humanboyAdvancedAuto && this._humanboyAdvancedAuto.getComponent(dt).hideAdvanceAutoTips(), q.getCowboyRoom().iUsedAutoBetCount < q.getCowboyRoom().iSelectAutoBetCount && Y.cowboyNet.reqAdvanceAutoBet())
        }
        clearBetArea(t) {
            Y.StringTools.getArrayLength(this._sprBetAreaWinFlags) > t && (this._sprBetAreaWinFlags[t].node.active = !1), this.hideWinFlagAnim(t), this._betCoinContents[t].destroyAllChildren(), this._betCoinContents[t].removeAllChildren(), console.log("clearBetArea-.清理areaIndex = " + t), this.hideAreaCoin(t, !1), this.updateSelfBetAreaCoin(t, 0), this.updateTotalBetAreaCoin(t, 0)
        }
        clearAllBetArea() {
            let t = this._betAreas.length;
            for (let e = 0; e < t; e++) this.clearBetArea(e)
        }
        getAreaIdxByBetOption(t) {
            return this._mapBetOptionArea.get(t)
        }
        getBetOptionByAreaIdx(t) {
            let e = -1;
            return this._mapBetOptionArea.forEach((function(o, i, n) {
                i == t && (e = o)
            })), e < 0 && console.log("error!! getOptionByAreaIdx -1"), e
        }
        getCurBetLevel() {
            if (this._curBetButtonIdx < 0) return 0;
            return q.getCowboyRoom().vBetCoinOption[this._curBetButtonIdx]
        }
        initHistoryDots() {
            this._topBg = this.node.getChildByName("top_bg").getComponent(w), this._topBg.node.active = !0, this._btnZouShi = this._topBg.node.getChildByName("btnZouShi").getComponent(l), this._btnZouShi.enabled = !1, this._topBg.node.on(r.EventType.TOUCH_END, (t => {
                Y.cowboyNet.RequestTrend(), this._cowboyChart.active = !0, Y.MessageCenter.send("on_display_page1"), this.playCowboyEffect(this.s_button)
            }), this);
            let t = this._topBg.node.getChildByName("panelRecord");
            for (let e = 0; e < this._recordNum; e++) {
                this._recordDots.push(t.getChildByName(Y.StringTools.formatC("recordDot%d", e)).getComponent(w));
                let o = new _(this._recordDots[e].node.getPosition());
                this._oriRecordDotsPos.push(o)
            }
            t.getComponent(V).enabled && (t.getComponent(V).enabled = !1), this._lastRecordDotWorldPos = t.getComponent(B).convertToWorldSpaceAR(this._recordDots[this._recordNum - 1].node.getPosition()), this._topBg.node.on(l.EventType.CLICK, (t => {
                Y.cowboyNet.RequestTrend(), this.playCowboyEffect(this.s_button)
            }), this)
        }
        _initMexicoInfoPanel() {
            if (!Y.appConfig.getGameConfig().miniGameConfig.showMexicoDisclaimerAndCurrencyConversion || Y.dataHandler.getUserData().getCountryCurrency().type !== gt.MXN) return;
            const t = new r("mexico_panel"),
                e = this._betContentBg.node.scale.x;
            t.addOrGetComponent(B).width = this._betContentBg.node.addOrGetComponent(B).width * e, t.addOrGetComponent(B).height = this._betContentBg.node.addOrGetComponent(B).height * e, t.position = this._gameContent.position, this.node.addChild(t, Lo.COWBOY_LOCAL_ZORDER_MENU_PANEL);
            const o = p(this.mxnCurrencyInfo_prefab);
            t.addChild(o);
            const i = o.getComponent(F);
            let n = !1;
            const s = this._leftPlayerPanel.getComponent(B).width,
                a = this._rightPlayerPanel.getComponent(B).width,
                l = s + t.getComponent(B).width + a;
            n = Math.abs(this._leftPlayerPanel.position.x) + Math.abs(this._rightPlayerPanel.position.x) + .5 * s + .5 * a > l + 100, n ? (i.top = 110, i.right = -35) : (i.top = -40, i.right = 30), i.updateAlignment()
        }
        updateDotState() {
            this.hideHistoryMoveAnim();
            let t = q.getCowboyRoom().historyResults.length;
            if (2 == t) {
                let t = this._recordNum - 1;
                this._recordDots[t].node.active = !0
            }
            if (t > 2)
                for (let e = 0; e < this._recordNum; e++) {
                    let o = t - e - 1,
                        i = this._recordNum - e - 1;
                    this._recordDots[i].node.active = !0, this._recordDots[i].node.active = !(o <= 0)
                }
        }
        updateHistoryResults() {
            this.hideHistoryMoveAnim();
            let t = q.getCowboyRoom().historyResults.length;
            for (let e = 0; e < this._recordNum; e++) {
                let o = t - e - 1,
                    i = this._recordNum - e - 1;
                if (this._recordDots[i].node.active = !0, this._recordDotsTemp.length > 0 && (this._recordDotsTemp[i].node.active = !0), o < 0) q.loadSpriteTextureByPlist(this.game_dznz_PLIST, this._recordDots[i], "record_draw"), this._recordDots[i].node.active = !1, this._recordDotsTemp.length > 0 && (q.loadSpriteTextureByPlist(this.game_dznz_PLIST, this._recordDotsTemp[i], "record_draw"), this._recordDotsTemp[i].node.active = !1);
                else {
                    let t = q.getCowboyRoom().historyResults[o],
                        e = "record_draw";
                    t == q.Enum.BetZoneOption.RED_WIN ? e = "record_red" : t == q.Enum.BetZoneOption.BLUE_WIN && (e = "record_blue"), q.loadSpriteTextureByPlist(this.game_dznz_PLIST, this._recordDots[i], e), this._recordDots[i].node.active = !0, this._recordDotsTemp.length > 0 && (q.loadSpriteTextureByPlist(this.game_dznz_PLIST, this._recordDotsTemp[i], e), this._recordDotsTemp[i].node.active = !0)
                }
            }
        }
        updateHistoryResultsPrevious() {
            let t = q.getCowboyRoom().removeCurrentHistoryResult(); - 1 != t && (this.updateHistoryResults(), q.getCowboyRoom().addCurrentHistoryResult(t))
        }
        showHistoryMoveAnim() {
            if (q.getCowboyRoom().historyResults.length > 0) {
                let t = Y.StringTools.getArrayLength(this._recordDots),
                    e = this._topBg.node.getChildByName("panelRecord"),
                    o = e.getComponent(V);
                if (o) o.enabled || (o.enabled = !0);
                else {
                    e.addComponent(V).type = V.Type.GRAPHICS_RECT
                }
                let i = new g(this._oriRecordDotsPos[0].x - this._oriRecordDotsPos[1].x, this._oriRecordDotsPos[0].y - this._oriRecordDotsPos[1].y);
                if (this.updateDotState(), 1 == q.getCowboyRoom().historyResults.length) L(this._nodeAnim).delay(.3).call((() => {
                    this.updateHistoryResults()
                })).start();
                else
                    for (let e = 0; e < t; e++)
                        if (console.log("----2222222----. len = " + t + ", i = " + e), 1 == this._recordDots[e].node.active) {
                            q.getCowboyRoom().historyResults.length;
                            L(this._recordDots[e].node).by(.3, {
                                position: new _(i.x, i.y)
                            }).call((() => {
                                Y.StringTools.getArrayLength(this._recordDots);
                                console.log("--------. len = " + t + ", i = " + e), e == t - 1 && this.updateHistoryResults()
                            })).start()
                        } Y.MessageCenter.send("cowboy_start_history_move_anim"), q.getCowboyRoom().isOpen && Y.cowboyNet.RequestTrend()
            }
        }
        hideHistoryMoveAnim() {
            let t = Y.StringTools.getArrayLength(this._recordDots);
            for (let e = 0; e < t; e++) O.stopAllByTarget(this._recordDots[e].node), this._recordDots[e].node.setPosition(this._oriRecordDotsPos[e]);
            let e = this._topBg.node.getChildByName("panelRecord");
            e.getComponent(V).enabled && (e.getComponent(V).enabled = !1)
        }
        addEvent() {
            this._isAddEvent || (this._isAddEvent = !0, Y.MessageCenter.register("on_cowboy_game_round_end_notify", this.OnGameRoundEndNotify.bind(this), this.node), Y.MessageCenter.register("on_cowboy_deal_notify", this.OnDealNotify.bind(this), this.node), Y.MessageCenter.register("on_cowboy_start_bet_notify", this.OnStartBetNotify.bind(this), this.node), Y.MessageCenter.register("on_cowboy_bet_notify", this.OnBetNotify.bind(this), this.node), Y.MessageCenter.register("on_cowboy_auto_bet_notify", this.OnAutoBetNotify.bind(this), this.node), Y.MessageCenter.register("on_cowboy_auto_bet_notify_handle_over", this.OnAutoBetNotifyHandleOver.bind(this), this.node), Y.MessageCenter.register("on_cowboy_leave_room_succ", this.OnLeaveRoomSucc.bind(this), this.node), Y.MessageCenter.register("on_cowboy_auto_bet_succ", this.OnAutoBetSucc.bind(this), this.node), Y.MessageCenter.register("on_cowboy_room_param_change_notify", this.OnRoomParamChangeNotify.bind(this), this.node), Y.MessageCenter.register("on_cowboy_server_error", this.OnServerError.bind(this), this.node), Y.MessageCenter.register("on_cowboy_kick_notify", this.OnKickNotify.bind(this), this.node), Y.MessageCenter.register("on_cowboy_join_room_failed", this.OnJoinRoomFailed.bind(this), this.node), Y.MessageCenter.register("showShopPanel", this.openShop.bind(this), this.node), Y.MessageCenter.register("showLuckButton", this.onShowLuckButton.bind(this), this.node), Y.MessageCenter.register("turntableResultNotice", this.onTurntableResultNotice.bind(this), this.node), Y.MessageCenter.register("update_gold", this._onMsgUpdateWorldServerGold.bind(this), this.node), Y.MessageCenter.register("on_cowboy_bet_amount_level_change", this._onMsgBetAmountLevelChange.bind(this), this.node), Y.MessageCenter.register("on_cowboy_advance_autobet_set", this._onMsgAdvanceAutobetSet.bind(this), this.node), Y.MessageCenter.register("on_advance_autobet", this._onMsgAdvanceAutobet.bind(this), this.node), Y.MessageCenter.register("on_cowboy_advance_autobet_cancel", this._onMsgAdvanceAutobetCancel.bind(this), this.node), Y.MessageCenter.register("on_cowboy_advance_autobet_limit_reached", this._onMsgAdvanceAutobetLimitReached.bind(this), this.node), Y.MessageCenter.register(Y.config.CHANGE_LANGUAGE, this.onLanguageChange.bind(this), this.node))
        }
        OnTrendUpdate() {
            var t;
            null == this._cowboyChart || 0 != q.getCowboyRoom().showTheNewestTrend ? this._cowboyChart.getComponent(et).setData() : null == (t = this._cowboyChart.getComponent(et)) || t.resetblink()
        }
        OnPlayerListUpdate() {
            null == this._cowboyList ? (this._cowboyList = p(this.cowboyList), this.node.addChild(this._cowboyList), this._cowboyList.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_TOAST), this._cowboyList.getComponent(nt).setCowboyData(), this._cowboyList.getComponent(nt).displayCell(0)) : (this._cowboyList.active = !0, this._cowboyList.getComponent(nt).setCowboyData(), this._cowboyList.getComponent(nt).displayCell(-1))
        }
        onStatusLantencyUpdated(t) {
            this._statusController && this._statusController.showLatency(t)
        }
        OnGameDataSynNotify(t) {
            if (t == Y.Enum.GameId.CowBoy) {
                if (this._statusController && this._statusController.showLatency(It.Normal), this._bSwitchTable = !1, q.getCowboyRoom().showTheNewestTrend = !0, this._vCoinOptimizationDeque.clear(), this.clearRound(), this.addEvent(), this.resetLeftTimer(), this._updateBetAmountLevel(), this.updatBetButtonByCurCoin(), this._updateBetButtonState(), this._updateBetOddsDetail(), this.updateSelfInfo(), this.updateOtherPlayersInfo(), this.updateHistoryResults(), this.updateAllPlayerWinCount(), q.getCowboyRoom().curState == q.Enum.RoundState.GAME_PENDING);
                else if (q.getCowboyRoom().curState == q.Enum.RoundState.NEW_ROUND) this.updateCards(), this._updateAllWayOut();
                else if (q.getCowboyRoom().curState == q.Enum.RoundState.BET) this.updateCards(), this._updateAllWayOut(), this.updateAllBetAreas(), this.updateBetCoutDown(), this._leftTime > 4 && this.showFightBeginAnim(), q.getCowboyRoom().canAdvanceAuto && this._checkAdvanceAutoReq();
                else if (q.getCowboyRoom().curState == q.Enum.RoundState.WAIT_NEXT_ROUND) {
                    let t = this.isResultSpecialCardType(),
                        e = t ? this._specialCardTypeDuration : 0;
                    this._leftTime > this._showNextRoundDuration + this._betWinFlagsAndFlyCoinsDuration + e + this._hideLoseBetCoinsDuration + this._showPublicCardsDuration + this._showHandCardsDuration + this._fightEndDuration + this._betCountDownEndDuration ? (q.getCowboyRoom().showTheNewestTrend = !1, this.updateHistoryResultsPrevious(), this.showWaitForNextRoundInAnim(), this.updateAllCardsBeforeSettle(), this.updatePlayerCoinBeforeSettle(), this.updateAllBetAreas(), this.showBetCoutDownEndAnim(), console.log("OnGameDataSynNotify, enter this.showBetCoutDownEndAnim")) : this._leftTime > this._showNextRoundDuration + this._betWinFlagsAndFlyCoinsDuration + e + this._hideLoseBetCoinsDuration + this._showPublicCardsDuration + this._showHandCardsDuration + this._fightEndDuration ? (q.getCowboyRoom().showTheNewestTrend = !1, this.updateHistoryResultsPrevious(), this.showWaitForNextRoundInAnim(), this.updateAllCardsBeforeSettle(), this.updatePlayerCoinBeforeSettle(), this.updateAllBetAreas(), this.showFightEndAnim(), console.log("OnGameDataSynNotify, enter showFightEndAnim")) : this._leftTime > this._showNextRoundDuration + this._betWinFlagsAndFlyCoinsDuration + e + this._hideLoseBetCoinsDuration + this._showPublicCardsDuration + this._showHandCardsDuration ? (q.getCowboyRoom().showTheNewestTrend = !1, this.updateHistoryResultsPrevious(), this.showWaitForNextRoundInAnim(), this.updateAllCardsBeforeSettle(), this.updatePlayerCoinBeforeSettle(), this.updateAllBetAreas(), this.showHandCardsAnim(), console.log("OnGameDataSynNotify, enter showHandCardsAnim")) : this._leftTime > this._showNextRoundDuration + this._betWinFlagsAndFlyCoinsDuration + e + this._hideLoseBetCoinsDuration + this._showPublicCardsDuration ? (q.getCowboyRoom().showTheNewestTrend = !1, this.updateHistoryResultsPrevious(), this.showWaitForNextRoundInAnim(), this.updateAllCardsExceptPublicBeforeSettle(), this.updatePlayerCoinBeforeSettle(), this.updateAllBetAreas(), this.showPublicCardsAnim(), console.log("OnGameDataSynNotify, enter showPublicCardsAnim")) : this._leftTime > this._showNextRoundDuration + this._betWinFlagsAndFlyCoinsDuration + e + this._hideLoseBetCoinsDuration ? (q.getCowboyRoom().showTheNewestTrend = !0, this.updateHistoryResultsPrevious(), this.showWaitForNextRoundInAnim(), this.updatePlayerCoinBeforeSettle(), this.updateAllBetAreas(), this.updateCards(), this.updateCardType(), this.updateWinCards(), this.showHideLoseBetCoinsAnim(), this.showCowboyLoseAnim(), console.log("OnGameDataSynNotify, enter showHideLoseBetCoinsAnim")) : this._leftTime > this._showNextRoundDuration + this._betWinFlagsAndFlyCoinsDuration + e ? (q.getCowboyRoom().showTheNewestTrend = !0, this.updateHistoryResultsPrevious(), this.showWaitForNextRoundInAnim(), this.updatePlayerCoinBeforeSettle(), this.updateAllBetAreas(), this.updateCards(), this.updateCardType(), this.updateWinCards(), this.clearLoseBetCoins(), this.showCowboyLoseAnim(), t ? this.showSpecialCardTypeAnim() : this.showBetWinFlagsAndFlyCoinsAnim(), console.log("OnGameDataSynNotify, enter showSpecialCardTypeAnim/showBetWinFlagsAndFlyCoinsAnim")) : this._leftTime > this._showNextRoundDuration + this._betWinFlagsAndFlyCoinsDuration ? (q.getCowboyRoom().showTheNewestTrend = !0, this.showWaitForNextRoundInAnim(), this.updateAllBetAreas(), this.updateCards(), this.updateCardType(), this.updateWinCards(), this.clearLoseBetCoins(), this.showCowboyLoseAnim(), t ? this.showSpecialCardTypeAnim(!0, this._leftTime - this._showNextRoundDuration - this._betWinFlagsAndFlyCoinsDuration) : this.showBetWinFlagsAndFlyCoinsAnim(), console.log("OnGameDataSynNotify, enter showSpecialCardTypeAnim/showBetWinFlagsAndFlyCoinsAnim, left time")) : this._leftTime > this._showNextRoundDuration ? (q.getCowboyRoom().showTheNewestTrend = !0, this.showWaitForNextRoundInAnim(), this.updateAllBetAreas(), this.updateCards(), this.updateCardType(), this.updateWinCards(), this.showNextRoundTips(), console.log("OnGameDataSynNotify, enter showSpecialCardTypeAnim left time")) : (q.getCowboyRoom().showTheNewestTrend = !0, this._leftTime > 2 && this.showWaitForNextRoundInAnim(), this.updateAllBetAreas(), this.updateCards(), this.updateCardType(), this.updateWinCards(), this.updateWinFlags(), this.showNextRoundTips(), console.log("OnGameDataSynNotify, enter showNextRoundTips")), this._leftTime > this._showNextRoundDuration + this._betWinFlagsAndFlyCoinsDuration ? this._updateAllWayOut(1) : this._leftTime > this._showNextRoundDuration ? (this._updateAllWayOut(1), this._showAllWayOutAnim()) : this._updateAllWayOut()
                }
                Y.appConfig.getGeneralConfig().multiWindowEnabled ? this.schedule((() => {
                    this._miniGameLoadingScreen.active = !1
                }), 0, 0, 1) : (Y.SwitchLoadingView.hide(), Y.appConfig.isWebApp || Y.SwitchLoadingView.switchToPotrait())
            }
        }
        OnGameRoundEndNotify() {
            q.getCowboyRoom().showTheNewestTrend = !1, this.resetLeftTimer(), this.showBetCoutDownEndAnim(), this._humanboyAdvancedAuto && this._humanboyAdvancedAuto.getComponent(dt).hideSelectPanel(!1)
        }
        OnDealNotify() {
            q.getCowboyRoom().showTheNewestTrend = !0, this.clearRound(), this.resetLeftTimer(), this.updatBetButtonByCurCoin(), this._updateBetButtonState(), this.updateSelfCoin(), this.updateOtherPlayersInfo(), this.showSendCardTips(), this.updateAllPlayerWinCount(), this.handleCoin(), this._updateAllWayOut(), this.showRoundStartAnim()
        }
        OnStartBetNotify() {
            this.playCowboyEffect(this.s_timer_starts), q.getCowboyRoom().showTheNewestTrend = !0, this.resetLeftTimer(), this.updatBetButtonByCurCoin(), this._updateBetButtonState(), this.hideGameTips(), this.showBetCoutDownBeginAnim(), this._checkAdvanceAutoReq()
        }
        OnBetNotify() {
            this._updateAutoBetBtnStatus(), q.getCowboyRoom().curPlayerBet.uid == this.getCowboyuserId() && this._updateBetButtonState();
            let t = q.getCowboyRoom().curPlayerBet,
                e = new Q;
            e.betAmount = t.betAmount, e.betOption = t.betOption, e.uid = t.uid, this._vCoinOptimizationDeque.push_back(e)
        }
        OnAutoBetNotify() {
            let t = q.getCowboyRoom().curPlayerBet,
                e = new Q;
            e.betAmount = t.betAmount, e.betOption = t.betOption, e.uid = t.uid, this._vCoinOptimizationDeque.push_back(e)
        }
        OnAutoBetNotifyHandleOver(t) {
            t > 1 ? this.playCowboyEffect(this.s_betin_many) : this.playCowboyEffect(this.s_betin), this._updateBetButtonState()
        }
        OnLeaveRoomSucc(t) {
            this.cleanData(), this.backToMainScene()
        }
        OnAutoBetSucc() {
            this._updateAutoBetBtnStatus()
        }
        _onMsgBetAmountLevelChange(t) {
            this._updateBetAmountLevel(), this._updateBetButtonState()
        }
        _onMsgAdvanceAutobetSet(t) {
            this._setAutoBetBtnStytle(X.eGameboyAutoBtnStyle.GAB_STYLE_ADVANCE_USING), !q.getCowboyRoom().hasBetInCurRound && q.getCowboyRoom().canAuto && this._checkAdvanceAutoReq()
        }
        _onMsgAdvanceAutobet(t) {
            let e = t;
            switch (e) {
                case q.Enum.ErrorCode.OK:
                    break;
                case q.Enum.ErrorCode.AUTO_BET_EXCEED_LIMIT:
                    this._humanboyAdvancedAuto && (this._advancceAutoTipsLabelKey = Y.StringTools.formatC("PokerMaster_ServerErrorCode%d", e), this._humanboyAdvancedAuto.getComponent(dt).adaptAdvanceAutoTipsPos(this._btnBetAuto.node), this._humanboyAdvancedAuto.getComponent(dt).showAdvanceAutoTips(Y.config.getStringDataCasino(this._advancceAutoTipsLabelKey)));
                    break;
                case q.Enum.ErrorCode.AUTO_BET_NO_MONEY:
                    if (Y.config.GET_CLIENT_TYPE() == Y.Enum.ClientType.CowboyWeb) Y.TP.showMsg(Y.config.getStringDataCasino(Y.StringTools.formatC("Cowboy_ServerErrorCode%d", e)), Y.Enum.ButtonStyle.GOLD_BUTTON, null, null, !1, !1, "", !1, f.HorizontalAlign.CENTER, !1, Y.roomManager.getGameScene(Y.Enum.GameId.CowBoy, Y.roomManager.getMiniGameRoomIdTemplate(Y.Enum.GameId.CowBoy)));
                    else {
                        let t = "cowboy_dialog_recharge";
                        if (!this.node.getChildByName(t)) {
                            let o = p(this.HumanboyDialog_prefab);
                            o.name = t;
                            const i = o.getComponent(Pt),
                                n = o.getComponent(st);
                            this.node.addChild(o), this.node.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_TOAST);
                            const s = Y.config.getStringDataCasino(Y.StringTools.formatC("Cowboy_ServerErrorCode%d", e)),
                                a = Y.config.getStringDataCasino("CowBoy_btn_desc_auto_cancel"),
                                r = Y.config.getStringDataCasino("CowBoy_btn_desc_auto_recharge"),
                                l = t => {
                                    Y.cowboyNet.ReqCancelAdvanceAutoBet()
                                },
                                d = t => {
                                    this.openShop(null)
                                },
                                h = {
                                    title: "Notice_Layer_notice_panel_message_button",
                                    textContent: Y.StringTools.formatC("Cowboy_ServerErrorCode%d", e),
                                    leftBtn: "CowBoy_btn_desc_auto_cancel",
                                    rightBtn: "CowBoy_btn_desc_auto_recharge",
                                    centerBtn: "",
                                    gameID: Y.Enum.GameId.CowBoy
                                },
                                _ = Tt.onChangeLanguageAutoBetPopup(n, i, h),
                                u = {
                                    miniDialog: i,
                                    stringContent: s,
                                    stringLeftBtn: a,
                                    stringRightBtn: r,
                                    cbLeftBtn: l,
                                    cbRightBtn: d,
                                    isReachedMax: !1,
                                    legacyDialog: n,
                                    isShowBtnCenter: !1,
                                    themeType: Ot.TwoButton_NoMoney_Style,
                                    onChangeLanguage: _
                                };
                            Tt.showDialog(u)
                        }
                    }
                    break;
                default:
                    Y.MessageCenter.send("on_cowboy_server_error", e)
            }
            this._humanboyAdvancedAuto && (this._humanboyAdvancedAuto.getComponent(dt).adaptAdvanceAutoCountPos(this._btnBetAuto.node), this._humanboyAdvancedAuto.getComponent(dt).showAdvanceAutoCount())
        }
        _onMsgAdvanceAutobetCancel(t) {
            this._updateBetAmountLevel(), this._updateBetButtonState()
        }
        OnRoomParamChangeNotify() {
            this._updateBetAmountLevel(), this._updateBetButtonState()
        }
        _onMsgAdvanceAutobetLimitReached(t) {
            const e = t;
            e && this.showCowboyToast("MiniGame_btn_desc_auto_bet_reached", [e.toString()])
        }
        OnServerError(t) {
            let e = t,
                o = Y.StringTools.formatC("Cowboy_ServerErrorCode%d", e);
            if (console.log("%s", o), e == q.Enum.ErrorCode.BET_TOO_SMALL) {
                let t = Y.StringTools.clientGoldByServer(q.getCowboyRoom().pkRoomParam.smallBet);
                this.showCowboyToast(o, [Y.StringTools.numberToString(t)])
            } else e == q.Enum.ErrorCode.NO_BET || this.showCowboyToast(o)
        }
        OnKickNotify(t) {
            let e = t.kickType;
            t.idle_roomid > 0 ? this._bSwitchTable || (q.getCowboyRoom().idle_roomid = t.idle_roomid, this.showSwitchTable()) : e == q.Enum.Kick.IDLE_LONG_TIME ? this.backToMainScene(Y.StringTools.formatC("%s", Y.config.getStringDataCasino("Cowboy_server_kick_long_time_text"))) : e == q.Enum.Kick.Stop_World && this.backToMainScene(Y.StringTools.formatC("%s", Y.config.getStringDataCasino("Cowboy_server_kick_stop_world_text")))
        }
        OnBackgroundMusicEnable(t) {
            t ? Dt.playMusic(this.s_cowboyBGM, !0) : Dt.stopMusic()
        }
        OnSelfInfo() {}
        OnJoinRoomFailed(t) {
            let e = t,
                o = Y.StringTools.formatC("Cowboy_ServerErrorCode%d", e);
            this.backToMainScene(Y.StringTools.formatC("%s", Y.config.getStringDataCasino(o)))
        }
        OnCowboyRewardTips(t) {
            this._rewardPanel.active = !0, this._rewardPanel.getComponent(B).setContentSize(this._rewardPanel_width, this._rewardPanel.getComponent(B).height), this._rewardTips.maxWidth = 0, Y.resMgr.adaptWidget(this._rewardPanel, !0), this._rewardTips.maxWidth = this._rewardTips.node.getComponent(B).width;
            let e = Y.StringTools.getLengthForCN(this._rewardTips.node, t);
            if (e > 3) {
                let t = e / 3 * this._rewardTips.node.getComponent(B).width;
                this._rewardTips.maxWidth = t, this._rewardPanel.getComponent(B).setContentSize(t + 27, this._rewardPanel.getComponent(B).height), Y.resMgr.adaptWidget(this._rewardPanel, !0)
            }
            if (e = Y.StringTools.calculateAutoWrapString(this._rewardTips.node, t).split("\n").length, e > 3) {
                let t = e / 3 * this._rewardTips.node.getComponent(B).width;
                this._rewardTips.maxWidth = t, this._rewardPanel.getComponent(B).setContentSize(t + 27, this._rewardPanel.getComponent(B).height), Y.resMgr.adaptWidget(this._rewardPanel, !0)
            }
            this._rewardTips.string = Y.StringTools.calculateAutoWrapString(this._rewardTips.node, t), O.stopAllByTarget(this._rewardPanel), L(this._rewardPanel).delay(4).call((() => {
                O.stopAllByTarget(this._rewardPanel), this._rewardPanel.active = !1
            })).start()
        }
        onBtnTopBgClick(t) {
            Y.cowboyNet.RequestTrend(), this.playCowboyEffect(this.s_button)
        }
        _onMsgUpdateWorldServerGold(t) {
            if (Y.appConfig.getGameConfig().miniGameConfig.useSharePlayerPool) return;
            t = 1 == t;
            let e = Y.dataHandler.getUserData().total_amount;
            if (q.getCowboyRoom().bCanUpdateWorldServerGold || t) {
                q.getCowboyRoom().selfPlayer.curCoin = e, this.updateSelfCoin();
                let t = !1,
                    o = q.getCowboyRoom().otherPlayers,
                    i = o.length;
                for (let n = 0; n < i; ++n) this.getCowboyuserId() == o[n].uid && (t = !0, o[n].curCoin = e);
                t && this.updateOtherCoin()
            }
        }
        _initWayOutInfoByAreaIdx(t) {
            if (t < 0 || t >= Y.StringTools.getArrayLength(this._betAreas)) return;
            let e = this._betAreas[t].getChildByName("panel_way_out");
            if (!e) return;
            e.getComponent(V) && e.removeComponent(V);
            let o = new Io;
            this._mapWayOutInfo.add(t, o), o.iAreaIdx = t, o.panelWayOut = e, o.panelWayOut.on(r.EventType.TOUCH_END, (() => {
                Y.cowboyNet.RequestTrend(), this._cowboyChart.active = !0, Y.MessageCenter.send("on_display_page2"), this.playCowboyEffect(this.s_button)
            }));
            {
                let t = o.panelWayOut.children.length;
                for (let e = 0; e < t; ++e) {
                    let t = Y.StringTools.formatC("img_%d", e),
                        i = o.panelWayOut.getChildByName(t);
                    i && (i.active = !1, o.vWayOutImg.push(i), o.vWayOutImgSrcPos.push(i.getPosition()))
                }
            } {
                let t = o.panelWayOut.getChildByName("txt_way_out");
                if (t) {
                    o.rtxtWayOut || (o.rtxtWayOut = (new r).addComponent(S)), o.rtxtWayOut.fontSize = t.getComponent(f).fontSize, o.rtxtWayOut.node.addOrGetComponent(B).setAnchorPoint(t.getComponent(B).anchorPoint), o.rtxtWayOut.node.addOrGetComponent(B).setContentSize(t.getComponent(B).contentSize);
                    let e = this._betContentBg.node.addOrGetComponent(B).convertToNodeSpaceAR(t.getParent().addOrGetComponent(B).convertToWorldSpaceAR(t.getPosition()));
                    o.rtxtWayOut.node.setPosition(e), o.rtxtWayOut.node.active = !1, o.rtxtWayOut.handleTouchEvent = !1, o.rtxtWayOut.verticalAlign = S.VerticalAlign.CENTER, this._betContentBg.node.addChild(o.rtxtWayOut.node), Y.tools.isValidNode(t) && (t.removeFromParent(), t.destroy())
                }
            }
            switch (this.getBetOptionByAreaIdx(t)) {
                case q.Enum.BetZoneOption.EQUAL:
                    o.eWayOutStyle = X.eGameboyWayOutStyle.GWS_TXT, o.iWayOutLoseLimitCount = 200;
                    break;
                case q.Enum.BetZoneOption.HOLE_3_TONG_SAME_SHUN:
                case q.Enum.BetZoneOption.FIVE_NONE_1DUI:
                case q.Enum.BetZoneOption.FIVE_2DUI:
                    o.eWayOutStyle = X.eGameboyWayOutStyle.GWS_IMG;
                    break;
                case q.Enum.BetZoneOption.HOLE_SAME:
                    o.eWayOutStyle = X.eGameboyWayOutStyle.GWS_AUTO, o.iWayOutLoseLimitCount = 200;
                    break;
                case q.Enum.BetZoneOption.HOLE_A:
                    o.eWayOutStyle = X.eGameboyWayOutStyle.GWS_TXT, o.iWayOutLoseLimitCount = 200;
                    break;
                case q.Enum.BetZoneOption.FIVE_3_SHUN_TONG_HUA:
                    o.eWayOutStyle = X.eGameboyWayOutStyle.GWS_IMG;
                    break;
                case q.Enum.BetZoneOption.FIVE_3_2:
                    o.eWayOutStyle = X.eGameboyWayOutStyle.GWS_TXT, o.iWayOutLoseLimitCount = 200;
                    break;
                case q.Enum.BetZoneOption.FIVE_KING_TONG_HUA_SHUN_4:
                    o.eWayOutStyle = X.eGameboyWayOutStyle.GWS_TXT, o.iWayOutLoseLimitCount = 300
            }
        }
        _clearWayOutInfo() {
            this._mapWayOutInfo.clear()
        }
        _showWayOutMoveAnim(t) {
            if (!this._mapWayOutInfo.has(t)) return;
            let e = this._mapWayOutInfo.get(t).panelWayOut,
                o = this._mapWayOutInfo.get(t).vWayOutImg,
                i = this._mapWayOutInfo.get(t).vWayOutImgSrcPos;
            !e || Y.StringTools.getArrayLength(o) <= 0 || (L(o[0]).to(.2, {
                scale: W(_.ZERO)
            }).call((() => {
                o[0].active = !1;
                let e = new g(g.ZERO);
                for (let n = 0; n < o.length; ++n) 0 !== n && (e.x = i[n - 1].x, e.y = i[n - 1].y, L(o[n]).to(.5, {
                    position: new _(e.x, e.y)
                }).call((() => {
                    n === o.length - 1 && (this._updateWayOut(t, 0), o[0].setScale(W(_.ONE)), zt.addOrGetComponent(o[0], x).opacity = 255, o[0].active = !0)
                })).start())
            })).start(), L(zt.addOrGetComponent(o[0], x)).to(.3, {
                opacity: 0
            }).start())
        }
        _hideWayOutMoveAnim() {
            for (let t = 0; t < this.AREA_SIZE; ++t) {
                if (!this._mapWayOutInfo.has(t)) continue;
                let e = this._mapWayOutInfo.get(t).panelWayOut;
                if (!e) continue;
                e.getComponent(V) && e.removeComponent(V);
                let o = this._mapWayOutInfo.get(t).vWayOutImg,
                    i = Y.StringTools.getArrayLength(o);
                for (let e = 0; e < i; ++e) O.stopAllByTarget(o[e]), o[e].setPosition(this._mapWayOutInfo.get(t).vWayOutImgSrcPos[e])
            }
        }
        _showWayOutImgAnim(t) {
            if (!this._mapWayOutInfo.has(t)) return;
            let e = this._mapWayOutInfo.get(t).vWayOutImg,
                o = Y.StringTools.getArrayLength(e);
            if (o <= 0) return;
            let i = q.getCowboyRoom().mapZoneData.get(this.getBetOptionByAreaIdx(t));
            if (!i) return;
            let n = this._mapWayOutInfo.get(t).rtxtWayOut;
            n && (n.string = "", n.node.active = !1);
            let s = i.result,
                a = "";
            0 == s ? a = "cowboy_icon_circle_small_gray" : 1 == s && (a = Y.config.getCurrentLanguage() == Y.Enum.LANGUAGE_TYPE.zh_CN || Y.config.getCurrentLanguage() == Y.Enum.LANGUAGE_TYPE.zh_TW ? "cowboy_icon_circle_small_red" : "cowboy_icon_circle_small_red_en");
            let r = e.length;
            for (let t = 0; t < r; ++t)
                if (!e[t].active) {
                    r = t;
                    break
                } r > o - 1 ? L(this._nodeAnim).delay(.3 * this._fActExecute_WayOut).call((() => {
                this._showWayOutMoveAnim(t)
            })).start() : L(this._nodeAnim).delay(.8 * this._fActExecute_WayOut).call((() => {
                e[r].active = !0, q.loadSpriteTextureByPlist(this.game_dznz_PLIST, e[r].getComponent(w), a)
            })).start()
        }
        _showWayOutAnim(t) {
            if (!this._mapWayOutInfo.has(t)) return;
            let e = this._mapWayOutInfo.get(t).panelWayOut,
                o = this._mapWayOutInfo.get(t).vWayOutImg,
                i = Y.StringTools.getArrayLength(o);
            if (!e || i <= 0) return;
            let n = q.getCowboyRoom().mapZoneData.get(this.getBetOptionByAreaIdx(t));
            if (n) switch (this._mapWayOutInfo.get(t).eWayOutStyle) {
                case X.eGameboyWayOutStyle.GWS_NONE:
                    break;
                case X.eGameboyWayOutStyle.GWS_IMG:
                    this._updateWayOutImg(t, 1), this._showWayOutImgAnim(t);
                    break;
                case X.eGameboyWayOutStyle.GWS_TXT:
                    this._updateWayOutTxt(t);
                    break;
                case X.eGameboyWayOutStyle.GWS_AUTO: {
                    let e = !1,
                        i = n.vHistoryResults;
                    if (i.length > 0 && i.length > o.length) {
                        let t = !0,
                            n = o.length;
                        for (let e = 0; e <= n; ++e) t = t && 0 == i[e];
                        t && (e = !0)
                    }
                    e ? this._updateWayOutTxt(t) : (this._updateWayOutImg(t, 1), this._showWayOutImgAnim(t))
                }
            }
        }
        _showAllWayOutAnim() {
            this._mapWayOutInfo.forEach(((t, e) => {
                this._showWayOutAnim(t)
            }))
        }
        _updateWayOutImg(t, e) {
            if (!this._mapWayOutInfo.has(t)) return;
            this._mapWayOutInfo.get(t).panelWayOut.active = !0;
            let o = this._mapWayOutInfo.get(t).vWayOutImg,
                i = this._mapWayOutInfo.get(t).vWayOutImgSrcPos,
                n = q.getCowboyRoom().mapZoneData.get(this.getBetOptionByAreaIdx(t));
            if (!n) return;
            let s = this._mapWayOutInfo.get(t).rtxtWayOut;
            s && (s.string = "", s.node.active = !1);
            let a = "",
                r = n.vHistoryResults,
                l = Y.StringTools.getArrayLength(o),
                d = Y.StringTools.getArrayLength(r),
                h = l < d ? l : d,
                _ = 0,
                u = 0;
            l >= d ? (_ = h - 1, u = h - e) : (_ = h - 1 + e, u = h);
            for (let t = 0; t < l; ++t) {
                o[t].setPosition(i[t]);
                let e = _ - t;
                if (t < u && e >= 0 && e < d) {
                    o[t].active = !0;
                    let i = r[e];
                    0 == i ? a = "cowboy_icon_circle_small_gray" : 1 == i && (a = Y.config.getCurrentLanguage() == Y.Enum.LANGUAGE_TYPE.zh_CN || Y.config.getCurrentLanguage() == Y.Enum.LANGUAGE_TYPE.zh_TW ? "cowboy_icon_circle_small_red" : "cowboy_icon_circle_small_red_en"), q.loadSpriteTextureByPlist(this.game_dznz_PLIST, o[t].getComponent(w), a)
                } else o[t].active = !1
            }
        }
        _updateWayOutTxt(t) {
            if (!this._mapWayOutInfo.has(t)) return;
            let e = this._mapWayOutInfo.get(t).rtxtWayOut;
            if (!e) return;
            let o = this._mapWayOutInfo.get(t).vWayOutImg,
                i = this._mapWayOutInfo.get(t).iWayOutLoseLimitCount,
                n = Y.StringTools.getArrayLength(o);
            for (let t = 0; t < n; ++t) o[t].active = !1;
            let s = q.getCowboyRoom().curState,
                a = q.getCowboyRoom().mapZoneData.get(this.getBetOptionByAreaIdx(t));
            if (a) {
                let t = a.luckLoseHand;
                if (t < 0) e.string = "";
                else if (0 == t) s == q.Enum.RoundState.WAIT_NEXT_ROUND ? Y.StringTools.setRichTextString(e.node, Y.config.getStringDataCasino("Cowboy_game_wayout_hit_txt")) : Y.StringTools.setRichTextString(e.node, Y.config.getStringDataCasino("Cowboy_game_wayout_hit_last_txt"));
                else {
                    let o = "",
                        n = "Cowboy_game_wayout_lose_txt";
                    0 != i && t > i ? o = Y.StringTools.formatC("%d+", i) : (o = Y.StringTools.formatC("%d", t), n = 1 == t ? "Cowboy_game_wayout_lose_txt_single" : "Cowboy_game_wayout_lose_txt"), Y.StringTools.setRichTextString(e.node, Y.StringTools.formatC(Y.config.getStringDataCasino(n), o))
                }
                e.node.getParent().getComponent(B).contentSize, e.node.getComponent(B).contentSize;
                e.node.active = !0
            }
        }
        _updateWayOut(t, e) {
            if (!this._mapWayOutInfo.has(t)) return;
            let o = this._mapWayOutInfo.get(t).vWayOutImg,
                i = q.getCowboyRoom().mapZoneData.get(this.getBetOptionByAreaIdx(t));
            if (i) switch (this._mapWayOutInfo.get(t).eWayOutStyle) {
                case X.eGameboyWayOutStyle.GWS_NONE:
                    break;
                case X.eGameboyWayOutStyle.GWS_IMG:
                    this._updateWayOutImg(t, e);
                    break;
                case X.eGameboyWayOutStyle.GWS_TXT:
                    this._updateWayOutTxt(t);
                    break;
                case X.eGameboyWayOutStyle.GWS_AUTO: {
                    let n = !1,
                        s = i.vHistoryResults,
                        a = Y.StringTools.getArrayLength(o),
                        r = Y.StringTools.getArrayLength(s);
                    if (r > 0 && r > a) {
                        let t = !0;
                        for (let e = 0; e <= a; ++e) t = t && 0 == s[e];
                        t && (n = !0)
                    }
                    n ? this._updateWayOutTxt(t) : this._updateWayOutImg(t, e)
                }
            }
        }
        _updateAllWayOut(t) {
            t = null == t ? 0 : t, this._mapWayOutInfo.forEach(((e, o) => {
                this._updateWayOut(e, t)
            }))
        }
        initCowboyAnims() {
            this._mainCowboyNode = this.initAni(this._heroBoy.getParent(), this.mainCowboyPrefab), this._mainCowboyNode.setSiblingIndex(0), this._mainCowboyNode.active = !0, this._mainCowboyNode.position = new _(0, 0, 0), this._mainCowboyAction = this._mainCowboyNode.getComponent(I), this._mainCowboyParticle = this._mainCowboyNode.getComponent(Et), this._skeletonAnimHandler.initMainCowboySkeleton(this._mainCowboyNode), this._mainBullNode = this.initAni(this._heroCow.getParent(), this.mainBullPrefab), this._mainBullNode.setSiblingIndex(0), this._mainBullNode.active = !0, this._mainBullNode.position = new _(0, 0, 0), this._mainBullAction = this._mainBullNode.getComponent(I), this._mainBullParticle = this._mainBullNode.getComponent(Et), this._skeletonAnimHandler.initMainBullSkeleton(this._mainBullNode)
        }
        getTimelineAnimSpeed(t, e) {
            let o = 0;
            if (t && e > 0) {
                let i = 1 / 60;
                o = t.defaultClip.duration * i / e
            }
            return o
        }
        setTimeSpeed(t, e) {
            t.defaultClip.speed = e
        }
        showCowboyLoseAnim() {
            this.playCowboyEffect(this.s_win_lose), 1 == q.getCowboyRoom().result ? (this._skeletonAnimHandler.setMainCowboyWinState(), this._mainCowboyAction.play("Cowboy_Win"), this._mainCowboyParticle.playParticles(), this._skeletonAnimHandler.setMainBullLooseState(), this._mainBullAction.play("Bull_Lose")) : -1 == q.getCowboyRoom().result && (this._skeletonAnimHandler.setMainBullWinState(), this._mainBullAction.play("Bull_Win"), this._mainBullParticle.playParticles(), this._skeletonAnimHandler.setMainCowboyLooseState(), this._mainCowboyAction.play("Cowboy_Lose"))
        }
        onShowLuckButton(t) {
            bt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || this.showLuckButton()
        }
        showLuckButton() {
            if (!this._luckButton) {
                this._luckButton = p(this.luckButton_prefab).getComponent(ht), this._btn_redpacket_festival.addChild(this._luckButton.node), this._luckButton.init(this.luckPanelLayer), this.luckPanelLayer.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_GIFT_POPUP), this._luckButton.node.setPosition(0, 0);
                let t = this._selfCoin.node.getComponent(B).convertToWorldSpaceAR(W(_.ZERO));
                this._luckButton.setViewData(t), this._luckButton.onAbleToShowWelcome = this.showLuckPopupWelcome.bind(this)
            }
            Y.dataHandler.getUserData().isShowLuckTurntables ? (this._btn_redpacket_festival.active = !0, this._luckButton.updateView(!1, this._btn_redpacket_festival_layer)) : this._btn_redpacket_festival.active = !1, this._btn_redpacket_festival_layer.active = this._btn_redpacket_festival.active, this.adaptiveBetBtnPanel()
        }
        showLuckPopupWelcome(t) {
            Y.dataHandler.getUserData().isShowLuckTurntables ? t && !this._hasShownLuckWelcomePopup && this._showLuckWelcomePopupNode() : this._removeLuckWelcomePopupNode()
        }
        _removeLuckWelcomePopupNode() {
            Y.tools.isValidNode(this._luckWelcomePopupNode) && this._luckWelcomePopupNode.removeFromParent()
        }
        _showLuckWelcomePopupNode() {
            Y.tools.isValidNode(this._luckWelcomePopupNode) || (this._luckWelcomePopupNode = p(this.luckWelcomePopup_prefab), this.node.addChild(this._luckWelcomePopupNode), this.node.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_GIFT_WELCOME), this._luckWelcomePopupNode.setPosition(0, 0), this._hasShownLuckWelcomePopup = !0)
        }
        onTurntableResultNotice(t) {
            bt.isInvalidRoomMultiWindow(t.gameData, null == this ? void 0 : this.node) || this.turntableResultNotice(t.puf)
        }
        turntableResultNotice(t) {
            let e = this.getPlayerCoinNodesByUid(t.uid);
            0 == e.length && e.push(this._btnPlayerList.node);
            for (let t = 0; t < e.length; t++) this._luckButton.runGoldMoveAction(this._btn_redpacket_festival, e[t])
        }
        playPointAni() {
            if (!pt.Instance.getGameConfig().miniGameConfig.showChangePoints) return;
            let t = q.getCowboyRoom().change_points;
            t < 0 || (this.points_node || (this.points_node = p(this.points_ani_prefab), this.node.addChild(this.points_node), this.points_node.getComponent(B).node.setSiblingIndex(Lo.COWBOY_LOCAL_ZORDER_ANIM_NODE), this.points_node.setPosition(this.node.getComponent(B).convertToNodeSpaceAR(this._selfHeadBg.parent.getComponent(B).convertToWorldSpaceAR(this._selfHeadBg.position))), this.points_node.getComponent(I).on(I.EventType.FINISHED, (t => {
                this.resetPointAni()
            }), this)), this.points_node.getComponent(ct).playPointAni(t))
        }
        resetPointAni() {
            q.getCowboyRoom().change_points = 0, this.points_node && this.points_node.getComponent(ct).resetPointAni()
        }
        setLeftAndRightList() {
            let t = this._leftPlayerPanel.getChildByName("player_0").getComponent(B).width,
                e = [288, 92, -104, -300, -300],
                o = new _(-4, 330),
                i = new _(-16, 333),
                n = 22;
            if (this._isIpad) e = [419, 205, -9, -223, -437], o = new _(-4, 461), i = new _(-16, 464);
            else if (this._isViewX) {
                n = 96 + .5 * (this.getWinSize().width - 2338)
            } else {
                let t = this.getWinSize().width - 1920;
                n = t > 0 ? 22 + .5 * t : 22
            }
            this._leftPlayerPanel.getComponent(F).left = n + .5 * t - .5 * this._leftPlayerPanel.getComponent(B).width, this._rightPlayerPanel.getComponent(F).right = n + .5 * t - .5 * this._rightPlayerPanel.getComponent(B).width, Y.resMgr.adaptWidget(this._leftPlayerPanel), Y.resMgr.adaptWidget(this._rightPlayerPanel);
            for (let t = 0; t < 5; ++t) {
                let n = this._leftPlayerPanel.getChildByName(Y.StringTools.formatC("player_%d", t)),
                    s = this._leftPlayerPanel.getChildByName(Y.StringTools.formatC("text_coin_%d", t)),
                    a = this._rightPlayerPanel.getChildByName(Y.StringTools.formatC("player_%d", t)),
                    r = this._rightPlayerPanel.getChildByName(Y.StringTools.formatC("text_coin_%d", t));
                if (n.setPosition(new _(0, e[t])), s.setPosition(new _(0, e[t] + -67)), a.setPosition(new _(0, e[t])), r.setPosition(new _(0, e[t] + -67)), 0 === t) {
                    let t = n.getChildByName("nb_flag"),
                        e = a.getChildByName("nb_flag");
                    t.setPosition(n.getComponent(B).convertToNodeSpaceAR(n.parent.getComponent(B).convertToWorldSpaceAR(o))), e.setPosition(a.getComponent(B).convertToNodeSpaceAR(a.parent.getComponent(B).convertToWorldSpaceAR(i)))
                }
            }
        }
        showSwitchTable() {
            this._bSwitchTable || (this._bSwitchTable = !0, Y.TP.showMsg(Y.config.getStringDataCasino("MiniGames_Switch_content"), Y.Enum.ButtonStyle.TWO_BUTTON, (() => {
                Y.MessageCenter.send("HideWebview_ShowWindows", !0), Y.roomManager.setMiniGameRoomIdTemplate(Y.Enum.GameId.CowBoy, q.getCowboyRoom().idle_roomid), bt.getInstanceGameData(null == this ? void 0 : this.node).tRoomData.m_bIsReconnectMode = !0, Y.netWorkManager.clearLoginGameServerSuccFlag(Y.Enum.GameId.CowBoy), Y.roomManager.RequestJoinRoom(Y.Enum.GameId.CowBoy, q.getCowboyRoom().idle_roomid)
            }), (() => {
                Y.MessageCenter.send("HideWebview_ShowWindows", !0), this.backToMainScene()
            }), !1, !1, "", !1, f.HorizontalAlign.CENTER, !1, Y.roomManager.getGameScene(Y.Enum.GameId.CowBoy, Y.roomManager.getMiniGameRoomIdTemplate(Y.Enum.GameId.CowBoy))), Y.TP.setButtonText(Y.Enum.ButtonType.TWO_BUTTON_SWITCH_TABLE))
        }
        onCalmDownShowTip(t) {
            let e = t.CalmDownLeftSeconds,
                o = t.CalmDownDeadLineTimeStamp;
            if (!(e <= 0 || o <= 0) && e > 0) {
                mt.getSinglePrefabInst(this.popSilencePre).getComponent(mt).autoShow(Y.Enum.popSilenceType.countDownGame, t)
            }
        }
        onMsgAdvanceAutobetAdd(t) {
            console.log("onMsgAdvanceAutobetAdd", t), this._humanboyAdvancedAuto && (this._humanboyAdvancedAuto.getComponent(dt).adaptAdvanceAutoCountPos(this._btnBetAuto.node), this._humanboyAdvancedAuto.getComponent(dt).showAdvanceAutoCount())
        }
        onLanguageChange() {
            if (this._humanboyAdvancedAuto && this._humanboyAdvancedAuto.active) {
                const t = this._humanboyAdvancedAuto.getComponent(dt);
                t.onChangeLanguage(), this._eAutoBtnStyle === X.eGameboyAutoBtnStyle.GAB_STYLE_ADVANCE_USING && t.showAdvanceAutoCount()
            }
            this._otherPlayerDescLeft && this._otherPlayerDescLeft.node.active && (this._otherPlayerDescLeft.string = Y.config.getStringDataCasino("Cowboy_richest_text")), this._otherPlayerDescRight && this._otherPlayerDescRight.node.active && (this._otherPlayerDescRight.string = Y.config.getStringDataCasino("Cowboy_shensuanzi_text"));
            const t = [Y.Enum.LANGUAGE_TYPE.en_US, Y.Enum.LANGUAGE_TYPE.zh_TW, ...Y.appConfig.getGameConfig().miniGameConfig.availableLangResForMiniGames];
            for (const e of this._winFlagAnims) {
                const o = e.getChildByName("win_29");
                o && (t.includes(Y.config.getCurrentLanguage()) ? Y.resMgr.setSpriteFrame(o, q.getLanguagePath("game/cowboy/language/win_flag")) : Y.resMgr.setSpriteFrame(o, "en_US/game/cowboy/language/win_flag"))
            }
            this._mapWayOutInfo.forEach(((t, e) => {
                const o = e.rtxtWayOut;
                o && o.node.active && this._updateWayOutTxt(t)
            })), this.updateAllPlayerWinCount(), this.showSpecialCardTypeAnim(), this.updateCardTypeText(), "" != this._advancceAutoTipsLabelKey && this._humanboyAdvancedAuto.getComponent(dt).updateAdvanceAutoTipsText(this._advancceAutoTipsLabelKey)
        }
        setBetLabelEnable(t, e) {
            e ? (t.node.getComponent(x).opacity = 255, t.node.getComponent(R).color = this._autobetBtnColor) : (t.node.getComponent(x).opacity = 100, t.node.getComponent(R).color = new v(v.WHITE))
        }
        showNoticeMsg(t) {
            this.pushNotice.addPushNotice(t, !1)
        }
        onResize(t = !1) {
            if (Y.config.origionAdaptScreenHen(this.node), !this.isIPadDesign()) {
                const t = this.node.scene.getComponentInChildren(c);
                let e = !1,
                    o = !1;
                if (this._isViewX) {
                    const t = Y.config.isWinSizeIphoneX();
                    e = t, o = !t
                } else {
                    const i = t.designResolution,
                        n = b.getVisibleSize(),
                        s = (n.width > n.height ? n.width / n.height : n.height / n.width) > i.width / i.height;
                    e = s, o = !s
                }
                t.overrideResolutionPolicy && (t.resolutionPolicy = Y.config.getResolutionPolicy(o, e))
            }
            Y.resMgr.adaptWidget(this.node, !0, !1), !0 !== t && (this.setLeftAndRightList(), this.adaptiveScreen(), this.adaptiveBetBtnPanel(), this.updateLastRecordWorldPos(), U(this._humanboyMenu) && this.UpdateMenuPosition(), U(this._humanboyGuid) && this._humanboyGuid.active && this._humanboyGuid.getComponent(at).reLayout(this._topBg.node), this.isChangedLayout() && this.startReloadScene())
        }
        startReloadScene() {
            Y.SwitchLoadingView.show(Y.config.getStringData("Loading")), this.unschedule(this.reloadScene), this.scheduleOnce(this.reloadScene, .3)
        }
        reloadScene() {
            if (this._isLeaving) return;
            if (!this.isChangedLayout()) return void Y.SwitchLoadingView.hide();
            const t = A.getScene().name;
            A.loadScene(t, ((t, e) => {
                if (t) return void console.error("[CowboyScene] reload scene error: ", t);
                const o = Y.roomManager.getCowboyGame();
                o ? bt.addInstance(e, o) : console.trace("room instance for cowboy game should be defined")
            }))
        }
        isChangedLayout() {
            if (!Y.appConfig.isWebApp) return !1;
            if (this._isIpad) return !this.isIPadDesign();
            {
                let t = this.isIPadDesign();
                if (!t) {
                    const e = this.isTrueFullScreenOnWeb() && Y.config.IS_FULLSCREEN;
                    t = this._isViewX && !e || !this._isViewX && e
                }
                return t
            }
        }
        isTrueFullScreenOnWeb() {
            let t = !1;
            if (Y.appConfig.isWebApp) {
                const e = this.node.getChildByName("leftPlayerPanel"),
                    o = this.node.getChildByName("rightPlayerPanel");
                if (Y.native.isScreenLandscape()) {
                    let i = 0;
                    i += 2 * this.g_fullScreenOffset.x, i += this.bet_content_bg_ipx_width, i += e.getComponent(B).width - 50, i += o.getComponent(B).width - 50, t = i <= b.getVisibleSize().width && Y.config.IS_IPHONEX_SCREEN
                }
            }
            return t
        }
        updateLastRecordWorldPos() {
            let t = this._topBg.node.getChildByName("panelRecord");
            this._lastRecordDotWorldPos = t.convertToWorldSpaceAR(this._recordDots[this._recordNum - 1].node.getPosition())
        }
        _onMsgSwitchSceneBegan(t) {
            Y.appConfig.isWebApp && (this.clearSpecialCardTypeAnim(), this.hideAllTimelineAnims(), this.hideAllCardsAndCardType())
        }
        registerPageVisibility() {
            Y.appConfig.isWebApp && document && document.addEventListener("visibilitychange", this.onPageVisibilityChange)
        }
        unregisterPageVisibility() {
            Y.appConfig.isWebApp && document && document.removeEventListener("visibilitychange", this.onPageVisibilityChange)
        }
    }).prototype, "round_start_prefab", [Vt], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Fe = e(Ge.prototype, "fight_begin_prefab", [Yt], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), ke = e(Ge.prototype, "fight_end_prefab", [qt], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), ze = e(Ge.prototype, "wait_for_next_round_prefab", [Kt], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Ue = e(Ge.prototype, "win_flag_prefab", [Xt], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Ze = e(Ge.prototype, "special_card_type_prefab", [jt], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Ve = e(Ge.prototype, "win_player_light_prefab", [Jt], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Ye = e(Ge.prototype, "btnBet_0_prefab", [Qt], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), qe = e(Ge.prototype, "btnBet_3_prefab", [$t], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Ke = e(Ge.prototype, "mainCowboyPrefab", [te], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Xe = e(Ge.prototype, "mainBullPrefab", [ee], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), je = e(Ge.prototype, "cowboyChart", [oe], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Je = e(Ge.prototype, "humanboyExchange_prefab", [ie], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Qe = e(Ge.prototype, "cowboyRule", [ne], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), $e = e(Ge.prototype, "cowboySetting", [se], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), to = e(Ge.prototype, "cowboyExit", [ae], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), eo = e(Ge.prototype, "cowboyList", [re], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), oo = e(Ge.prototype, "humanboyAdvancedSetting_prefab", [le], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), io = e(Ge.prototype, "humanboyGuid_prefab", [de], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), no = e(Ge.prototype, "HumanboyMenu_prefab", [he], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), so = e(Ge.prototype, "HumanboyAdvancedAuto_prefab", [_e], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), ao = e(Ge.prototype, "MiniGameAddAdvancedAuto_prefab", [ue], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), ro = e(Ge.prototype, "HumanboyDialog_prefab", [ge], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), lo = e(Ge.prototype, "game_dznz_PLIST", [ce], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), ho = e(Ge.prototype, "cowboy_trend_anim_PLIST", [me], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), _o = e(Ge.prototype, "special_card_type_PLIST", [Ce], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), uo = e(Ge.prototype, "chart_PLIST", [pe], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), go = e(Ge.prototype, "cowboy_PLIST", [ye], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), co = e(Ge.prototype, "win_num_FNT", [be], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), mo = e(Ge.prototype, "bet_btn_num_gray", [Ae], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Co = e(Ge.prototype, "bet_btn_num_yellow", [we], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), po = e(Ge.prototype, "luckButton_prefab", [fe], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), yo = e(Ge.prototype, "points_ani_prefab", [Be], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), bo = e(Ge.prototype, "popSilencePre", [Se], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Ao = e(Ge.prototype, "miniGameLoadingScreenPrefab", [Te], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), wo = e(Ge.prototype, "resultCardTypePrefab", [Pe], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), fo = e(Ge.prototype, "winCountPrefab", [Oe], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Bo = e(Ge.prototype, "menuAnchorPoint", [Ee], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), So = e(Ge.prototype, "btnInfo", [Ne], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), To = e(Ge.prototype, "btnInfo2", [Re], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Po = e(Ge.prototype, "mappingPlist", [ve], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return []
        }
    }), Oo = e(Ge.prototype, "luckPanelLayer", [Le], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Eo = e(Ge.prototype, "pushNotice", [Ie], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), No = e(Ge.prototype, "luckWelcomePopup_prefab", [De], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Ro = e(Ge.prototype, "mxnCurrencyInfo_prefab", [We], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), vo = e(Ge.prototype, "gameSceneInstance", [xe], {
        configurable: !0,
        enumerable: !0,
        writable: !0,
        initializer: function() {
            return null
        }
    }), Me = Ge)) || Me));
    i._RF.pop()
}